<html><head>
<title>ns_schedule - NaviServer Built-in Commands </title>
<link rel="stylesheet" href=".././nsd.css" type="text/css">
</head>
<! -- Generated from file 'files/ns_schedule.html' by tcllib/doctools with format 'html'
   -->
<! -- CVS: $Id$ ns_schedule.n
   -->

<body>
<hr> [
  <a href=".././toc.html">Table Of Contents</a>
| <a href=".././index.html">Keyword Index</a>
] <hr>

<h1> ns_schedule(n) 4.99  &quot;NaviServer Built-in Commands&quot;</h1>
<h2><a name="name">NAME</a></h2>
<p>
<p> ns_schedule - Scheduling Tcl scripts




<h2><a name="table_of_contents">TABLE OF CONTENTS</a></h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#table_of_contents">TABLE OF CONTENTS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#synopsis">SYNOPSIS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#description">DESCRIPTION</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#commands">COMMANDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#see_also">SEE ALSO</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#keywords">KEYWORDS</a><br>
<h2><a name="synopsis">SYNOPSIS</a></h2>
<p>
<table border=1 width=100% cellspacing=0 cellpadding=0><tr            bgcolor=lightyellow><td bgcolor=lightyellow><table 0 width=100% cellspacing=0 cellpadding=0><tr valign=top ><td ><a href="#1"><b class='cmd'><a href="../index.html#key73"> ns_schedule_weekly </a></b> ?<i class='arg'>-once</i>? ?<i class='arg'>-thread</i>? <i class='arg'>day</i> <i class='arg'>hour</i> <i class='arg'>minute</i> <i class='arg'>script</i></a></td></tr>
<tr valign=top ><td ><a href="#2"><b class='cmd'><a href="../index.html#key78"> ns_schedule_daily </a></b> ?<i class='arg'>-once</i>? ?<i class='arg'>-thread</i>? <i class='arg'>hour</i> <i class='arg'>minute</i> <i class='arg'>script</i></a></td></tr>
<tr valign=top ><td ><a href="#3"><b class='cmd'><a href="../index.html#key72"> ns_schedule_proc </a></b> ?<i class='arg'>-once</i>? ?<i class='arg'>-thread</i>? <i class='arg'>interval</i> <i class='arg'>script</i></a></td></tr>
<tr valign=top ><td ><a href="#4"><b class='cmd'><a href="../index.html#key77"> ns_unschedule_proc </a></b> <i class='arg'>id</i></a></td></tr>
</table></td></tr></table>
<h2><a name="description">DESCRIPTION</a></h2>
<p>

These commands perform scheduling of Tcl scripts at various intervals. Script will run in
separate thread as background procedures. This functionality is similar to Unix cron.

<h2><a name="commands">COMMANDS</a></h2>
<p>

<dl>

<dt><a name="1"><b class='cmd'><a href="../index.html#key73"> ns_schedule_weekly </a></b> ?<i class='arg'>-once</i>? ?<i class='arg'>-thread</i>? <i class='arg'>day</i> <i class='arg'>hour</i> <i class='arg'>minute</i> <i class='arg'>script</i></a><dd>



This command schedules a script to be run on a certain day of the week at a
certain hour and minute of that day.  Returns the ID of the newly scheduled script.
The week starts on Sunday as day zero and runs to Saturday as day six.  If -once is
specified, then the script is run once and then unscheduled, otherwise it will continue
to run every week on that day at that time.  If -thread is specified, then the script
will be run in its own thread, otherwise it will run in the scheduler's thread.  If
the script is long-running, this may interfere with the running of other scheduled
scripts, so long-running scripts should be run in their own threads.

NOTE: day, hour and minute are specified in local time.  Beware of Daylight Savings Time
shifts affecting the time of day when the script will execute.

<p><table><tr><td bgcolor=black>&nbsp;</td><td><pre class='sample'>
   % set id [[ns_schedule_weekly -once 2 5 35 { ns_log notice &quot;It is now Tuesday at 5:35 AM.&quot; }]]
   123
</pre></td></tr></table></p>

<p><table><tr><td bgcolor=black>&nbsp;</td><td><pre class='sample'>
   % ns_unschedule_proc $id
</pre></td></tr></table></p>


<br><br>
<dt><a name="2"><b class='cmd'><a href="../index.html#key78"> ns_schedule_daily </a></b> ?<i class='arg'>-once</i>? ?<i class='arg'>-thread</i>? <i class='arg'>hour</i> <i class='arg'>minute</i> <i class='arg'>script</i></a><dd>


This command schedules a script to be run at a certain hour and minute of the day.
Returns the ID of the newly scheduled script.  If -once is specified, then the script
is run once and then unscheduled, otherwise it will continue to run every day at that
time.  If -thread is specified, then the script will be run in its own thread,
otherwise it will run in the scheduler's thread.  If the script is long-running,
this may interfere with the running of other scheduled scripts, so long-running scripts should
be run in their own threads.

NOTE: hour and minute are specified in local time.  Beware of Daylight Savings Time
shifts affecting the time of day when the script will execute.

<p><table><tr><td bgcolor=black>&nbsp;</td><td><pre class='sample'>
   % set id [[ns_schedule_daily -once 5 35 { ns_log notice &quot;It is now 5:35 AM.&quot; }]]
   123
</pre></td></tr></table></p>

<p><table><tr><td bgcolor=black>&nbsp;</td><td><pre class='sample'>
   % ns_unschedule_proc $id
</pre></td></tr></table></p>


<br><br>
<dt><a name="3"><b class='cmd'><a href="../index.html#key72"> ns_schedule_proc </a></b> ?<i class='arg'>-once</i>? ?<i class='arg'>-thread</i>? <i class='arg'>interval</i> <i class='arg'>script</i></a><dd>


This command schedules a script to be run after a certain number of seconds.
Returns the ID of the newly scheduled script.  If -once is specified, then the
script is run once and then unscheduled, otherwise it will continue to run every
interval seconds.  If -thread is specified, then the script will be run in its
own thread, otherwise it will run in the scheduler's thread.  If the script is
long-running, this may interfere with the running of other scheduled scripts,
so long-running scripts should be run in their own threads.

<p><table><tr><td bgcolor=black>&nbsp;</td><td><pre class='sample'>
   % set id [[ns_schedule_proc -once 60 { ns_log notice &quot;this should run in 60 seconds&quot; }]]
   123
</pre></td></tr></table></p>


<br><br>
<dt><a name="4"><b class='cmd'><a href="../index.html#key77"> ns_unschedule_proc </a></b> <i class='arg'>id</i></a><dd>


ns_unschedule_proc command unschedules a  previous  scheduled  script.

<br><br>
NOTE: Current  behavior  is  to silently return without error if the id
doesn't represent a currently scheduled ID.

<p><table><tr><td bgcolor=black>&nbsp;</td><td><pre class='sample'>
   % ns_unschedule_proc $id
</pre></td></tr></table></p>


</dl>




<h2><a name="see_also">SEE ALSO</a></h2>
<p>
<a href="../index.html#key527"> nsd </a>
<h2><a name="keywords">KEYWORDS</a></h2>
<p>
<a href="../index.html#key568"> ns_after </a>, <a href="../index.html#key6"> ns_info </a>, <a href="../index.html#key76"> ns_pause </a>, <a href="../index.html#key74"> ns_resume </a>, <a href="../index.html#key78"> ns_schedule_daily </a>, <a href="../index.html#key72"> ns_schedule_proc </a>, <a href="../index.html#key77"> ns_unschedule_proc </a>, <a href="../index.html#key75"> scheduled </a>
</body></html>

