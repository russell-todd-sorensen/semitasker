00000000  55 54 46 2d 38 20 64 65  63 6f 64 65 72 20 63 61  |UTF-8 decoder ca|
00000010  70 61 62 69 6c 69 74 79  20 61 6e 64 20 73 74 72  |pability and str|
00000020  65 73 73 20 74 65 73 74  0a 2d 2d 2d 2d 2d 2d 2d  |ess test.-------|
00000030  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  |----------------|
*
00000050  2d 0a 0a 4d 61 72 6b 75  73 20 4b 75 68 6e 20 3c  |-..Markus Kuhn <|
00000060  68 74 74 70 3a 2f 2f 77  77 77 2e 63 6c 2e 63 61  |http://www.cl.ca|
00000070  6d 2e 61 63 2e 75 6b 2f  7e 6d 67 6b 32 35 2f 3e  |m.ac.uk/~mgk25/>|
00000080  20 2d 20 32 30 31 35 2d  30 38 2d 32 38 20 2d 20  | - 2015-08-28 - |
00000090  43 43 20 42 59 20 34 2e  30 0a 0a 54 68 69 73 20  |CC BY 4.0..This |
000000a0  74 65 73 74 20 66 69 6c  65 20 63 61 6e 20 68 65  |test file can he|
000000b0  6c 70 20 79 6f 75 20 65  78 61 6d 69 6e 65 2c 20  |lp you examine, |
000000c0  68 6f 77 20 79 6f 75 72  20 55 54 46 2d 38 20 64  |how your UTF-8 d|
000000d0  65 63 6f 64 65 72 20 68  61 6e 64 6c 65 73 0a 76  |ecoder handles.v|
000000e0  61 72 69 6f 75 73 20 74  79 70 65 73 20 6f 66 20  |arious types of |
000000f0  63 6f 72 72 65 63 74 2c  20 6d 61 6c 66 6f 72 6d  |correct, malform|
00000100  65 64 2c 20 6f 72 20 6f  74 68 65 72 77 69 73 65  |ed, or otherwise|
00000110  20 69 6e 74 65 72 65 73  74 69 6e 67 20 55 54 46  | interesting UTF|
00000120  2d 38 0a 73 65 71 75 65  6e 63 65 73 2e 20 54 68  |-8.sequences. Th|
00000130  69 73 20 66 69 6c 65 20  69 73 20 6e 6f 74 20 6d  |is file is not m|
00000140  65 61 6e 74 20 74 6f 20  62 65 20 61 20 63 6f 6e  |eant to be a con|
00000150  66 6f 72 6d 61 6e 63 65  20 74 65 73 74 2e 20 49  |formance test. I|
00000160  74 20 64 6f 65 73 0a 6e  6f 74 20 70 72 65 73 63  |t does.not presc|
00000170  72 69 62 65 20 61 6e 79  20 70 61 72 74 69 63 75  |ribe any particu|
00000180  6c 61 72 20 6f 75 74 63  6f 6d 65 2e 20 54 68 65  |lar outcome. The|
00000190  72 65 66 6f 72 65 2c 20  74 68 65 72 65 20 69 73  |refore, there is|
000001a0  20 6e 6f 20 77 61 79 20  74 6f 0a 22 70 61 73 73  | no way to."pass|
000001b0  22 20 6f 72 20 22 66 61  69 6c 22 20 74 68 69 73  |" or "fail" this|
000001c0  20 74 65 73 74 20 66 69  6c 65 2c 20 65 76 65 6e  | test file, even|
000001d0  20 74 68 6f 75 67 68 20  74 68 65 20 74 65 78 74  | though the text|
000001e0  20 64 6f 65 73 20 73 75  67 67 65 73 74 20 61 0a  | does suggest a.|
000001f0  70 72 65 66 65 72 61 62  6c 65 20 64 65 63 6f 64  |preferable decod|
00000200  65 72 20 62 65 68 61 76  69 6f 75 72 20 61 74 20  |er behaviour at |
00000210  73 6f 6d 65 20 70 6c 61  63 65 73 2e 20 49 74 73  |some places. Its|
00000220  20 61 69 6d 20 69 73 2c  20 69 6e 73 74 65 61 64  | aim is, instead|
00000230  2c 20 74 6f 0a 68 65 6c  70 20 79 6f 75 20 74 68  |, to.help you th|
00000240  69 6e 6b 20 61 62 6f 75  74 2c 20 61 6e 64 20 74  |ink about, and t|
00000250  65 73 74 2c 20 74 68 65  20 62 65 68 61 76 69 6f  |est, the behavio|
00000260  75 72 20 6f 66 20 79 6f  75 72 20 55 54 46 2d 38  |ur of your UTF-8|
00000270  20 64 65 63 6f 64 65 72  20 6f 6e 20 61 0a 73 79  | decoder on a.sy|
00000280  73 74 65 6d 61 74 69 63  20 63 6f 6c 6c 65 63 74  |stematic collect|
00000290  69 6f 6e 20 6f 66 20 75  6e 75 73 75 61 6c 20 69  |ion of unusual i|
000002a0  6e 70 75 74 73 2e 20 45  78 70 65 72 69 65 6e 63  |nputs. Experienc|
000002b0  65 20 73 6f 20 66 61 72  20 73 75 67 67 65 73 74  |e so far suggest|
000002c0  73 0a 74 68 61 74 20 6d  6f 73 74 20 66 69 72 73  |s.that most firs|
000002d0  74 2d 74 69 6d 65 20 61  75 74 68 6f 72 73 20 6f  |t-time authors o|
000002e0  66 20 55 54 46 2d 38 20  64 65 63 6f 64 65 72 73  |f UTF-8 decoders|
000002f0  20 66 69 6e 64 20 61 74  20 6c 65 61 73 74 20 6f  | find at least o|
00000300  6e 65 0a 73 65 72 69 6f  75 73 20 70 72 6f 62 6c  |ne.serious probl|
00000310  65 6d 20 69 6e 20 74 68  65 69 72 20 64 65 63 6f  |em in their deco|
00000320  64 65 72 20 75 73 69 6e  67 20 74 68 69 73 20 66  |der using this f|
00000330  69 6c 65 2e 0a 0a 54 68  65 20 74 65 73 74 20 6c  |ile...The test l|
00000340  69 6e 65 73 20 62 65 6c  6f 77 20 63 6f 76 65 72  |ines below cover|
00000350  20 62 6f 75 6e 64 61 72  79 20 63 6f 6e 64 69 74  | boundary condit|
00000360  69 6f 6e 73 2c 20 6d 61  6c 66 6f 72 6d 65 64 20  |ions, malformed |
00000370  55 54 46 2d 38 0a 73 65  71 75 65 6e 63 65 73 2c  |UTF-8.sequences,|
00000380  20 61 73 20 77 65 6c 6c  20 61 73 20 63 6f 72 72  | as well as corr|
00000390  65 63 74 6c 79 20 65 6e  63 6f 64 65 64 20 55 54  |ectly encoded UT|
000003a0  46 2d 38 20 73 65 71 75  65 6e 63 65 73 20 6f 66  |F-8 sequences of|
000003b0  20 55 6e 69 63 6f 64 65  20 63 6f 64 65 0a 70 6f  | Unicode code.po|
000003c0  69 6e 74 73 20 74 68 61  74 20 73 68 6f 75 6c 64  |ints that should|
000003d0  20 6e 65 76 65 72 20 6f  63 63 75 72 20 69 6e 20  | never occur in |
000003e0  61 20 63 6f 72 72 65 63  74 20 55 54 46 2d 38 20  |a correct UTF-8 |
000003f0  66 69 6c 65 2e 0a 0a 41  63 63 6f 72 64 69 6e 67  |file...According|
00000400  20 74 6f 20 49 53 4f 20  31 30 36 34 36 2d 31 3a  | to ISO 10646-1:|
00000410  32 30 30 30 2c 20 73 65  63 74 69 6f 6e 73 20 44  |2000, sections D|
00000420  2e 37 20 61 6e 64 20 32  2e 33 63 2c 20 61 20 64  |.7 and 2.3c, a d|
00000430  65 76 69 63 65 0a 72 65  63 65 69 76 69 6e 67 20  |evice.receiving |
00000440  55 54 46 2d 38 20 73 68  61 6c 6c 20 69 6e 74 65  |UTF-8 shall inte|
00000450  72 70 72 65 74 20 61 20  22 6d 61 6c 66 6f 72 6d  |rpret a "malform|
00000460  65 64 20 73 65 71 75 65  6e 63 65 20 69 6e 20 74  |ed sequence in t|
00000470  68 65 20 73 61 6d 65 20  77 61 79 0a 74 68 61 74  |he same way.that|
00000480  20 69 74 20 69 6e 74 65  72 70 72 65 74 73 20 61  | it interprets a|
00000490  20 63 68 61 72 61 63 74  65 72 20 74 68 61 74 20  | character that |
000004a0  69 73 20 6f 75 74 73 69  64 65 20 74 68 65 20 61  |is outside the a|
000004b0  64 6f 70 74 65 64 20 73  75 62 73 65 74 22 20 61  |dopted subset" a|
000004c0  6e 64 0a 22 63 68 61 72  61 63 74 65 72 73 20 74  |nd."characters t|
000004d0  68 61 74 20 61 72 65 20  6e 6f 74 20 77 69 74 68  |hat are not with|
000004e0  69 6e 20 74 68 65 20 61  64 6f 70 74 65 64 20 73  |in the adopted s|
000004f0  75 62 73 65 74 20 73 68  61 6c 6c 20 62 65 20 69  |ubset shall be i|
00000500  6e 64 69 63 61 74 65 64  0a 74 6f 20 74 68 65 20  |ndicated.to the |
00000510  75 73 65 72 22 20 62 79  20 61 20 72 65 63 65 69  |user" by a recei|
00000520  76 69 6e 67 20 64 65 76  69 63 65 2e 20 4f 6e 65  |ving device. One|
00000530  20 63 6f 6d 6d 6f 6e 6c  79 20 75 73 65 64 20 61  | commonly used a|
00000540  70 70 72 6f 61 63 68 20  69 6e 0a 55 54 46 2d 38  |pproach in.UTF-8|
00000550  20 64 65 63 6f 64 65 72  73 20 69 73 20 74 6f 20  | decoders is to |
00000560  72 65 70 6c 61 63 65 20  61 6e 79 20 6d 61 6c 66  |replace any malf|
00000570  6f 72 6d 65 64 20 55 54  46 2d 38 20 73 65 71 75  |ormed UTF-8 sequ|
00000580  65 6e 63 65 20 62 79 20  61 0a 72 65 70 6c 61 63  |ence by a.replac|
00000590  65 6d 65 6e 74 20 63 68  61 72 61 63 74 65 72 20  |ement character |
000005a0  28 55 2b 46 46 46 44 29  2c 20 77 68 69 63 68 20  |(U+FFFD), which |
000005b0  6c 6f 6f 6b 73 20 61 20  62 69 74 20 6c 69 6b 65  |looks a bit like|
000005c0  20 61 6e 20 69 6e 76 65  72 74 65 64 0a 71 75 65  | an inverted.que|
000005d0  73 74 69 6f 6e 20 6d 61  72 6b 2c 20 6f 72 20 61  |stion mark, or a|
000005e0  20 73 69 6d 69 6c 61 72  20 73 79 6d 62 6f 6c 2e  | similar symbol.|
000005f0  20 49 74 20 6d 69 67 68  74 20 62 65 20 61 20 67  | It might be a g|
00000600  6f 6f 64 20 69 64 65 61  20 74 6f 0a 76 69 73 75  |ood idea to.visu|
00000610  61 6c 6c 79 20 64 69 73  74 69 6e 67 75 69 73 68  |ally distinguish|
00000620  20 61 20 6d 61 6c 66 6f  72 6d 65 64 20 55 54 46  | a malformed UTF|
00000630  2d 38 20 73 65 71 75 65  6e 63 65 20 66 72 6f 6d  |-8 sequence from|
00000640  20 61 20 63 6f 72 72 65  63 74 6c 79 0a 65 6e 63  | a correctly.enc|
00000650  6f 64 65 64 20 55 6e 69  63 6f 64 65 20 63 68 61  |oded Unicode cha|
00000660  72 61 63 74 65 72 20 74  68 61 74 20 69 73 20 6a  |racter that is j|
00000670  75 73 74 20 6e 6f 74 20  61 76 61 69 6c 61 62 6c  |ust not availabl|
00000680  65 20 69 6e 20 74 68 65  20 63 75 72 72 65 6e 74  |e in the current|
00000690  0a 66 6f 6e 74 20 62 75  74 20 6f 74 68 65 72 77  |.font but otherw|
000006a0  69 73 65 20 66 75 6c 6c  79 20 6c 65 67 61 6c 2c  |ise fully legal,|
000006b0  20 65 76 65 6e 20 74 68  6f 75 67 68 20 49 53 4f  | even though ISO|
000006c0  20 31 30 36 34 36 2d 31  20 64 6f 65 73 6e 27 74  | 10646-1 doesn't|
000006d0  0a 6d 61 6e 64 61 74 65  20 74 68 69 73 2e 20 49  |.mandate this. I|
000006e0  6e 20 61 6e 79 20 63 61  73 65 2c 20 6a 75 73 74  |n any case, just|
000006f0  20 69 67 6e 6f 72 69 6e  67 20 6d 61 6c 66 6f 72  | ignoring malfor|
00000700  6d 65 64 20 73 65 71 75  65 6e 63 65 73 20 6f 72  |med sequences or|
00000710  0a 75 6e 61 76 61 69 6c  61 62 6c 65 20 63 68 61  |.unavailable cha|
00000720  72 61 63 74 65 72 73 20  64 6f 65 73 20 6e 6f 74  |racters does not|
00000730  20 63 6f 6e 66 6f 72 6d  20 74 6f 20 49 53 4f 20  | conform to ISO |
00000740  31 30 36 34 36 2c 20 77  69 6c 6c 20 6d 61 6b 65  |10646, will make|
00000750  0a 64 65 62 75 67 67 69  6e 67 20 6d 6f 72 65 20  |.debugging more |
00000760  64 69 66 66 69 63 75 6c  74 2c 20 61 6e 64 20 63  |difficult, and c|
00000770  61 6e 20 6c 65 61 64 20  74 6f 20 75 73 65 72 20  |an lead to user |
00000780  63 6f 6e 66 75 73 69 6f  6e 2e 0a 0a 50 6c 65 61  |confusion...Plea|
00000790  73 65 20 63 68 65 63 6b  2c 20 77 68 65 74 68 65  |se check, whethe|
000007a0  72 20 61 20 6d 61 6c 66  6f 72 6d 65 64 20 55 54  |r a malformed UT|
000007b0  46 2d 38 20 73 65 71 75  65 6e 63 65 20 69 73 20  |F-8 sequence is |
000007c0  28 31 29 20 72 65 70 72  65 73 65 6e 74 65 64 20  |(1) represented |
000007d0  61 74 0a 61 6c 6c 2c 20  28 32 29 20 72 65 70 72  |at.all, (2) repr|
000007e0  65 73 65 6e 74 65 64 20  62 79 20 65 78 61 63 74  |esented by exact|
000007f0  6c 79 20 6f 6e 65 20 73  69 6e 67 6c 65 20 72 65  |ly one single re|
00000800  70 6c 61 63 65 6d 65 6e  74 20 63 68 61 72 61 63  |placement charac|
00000810  74 65 72 20 28 6f 72 0a  65 71 75 69 76 61 6c 65  |ter (or.equivale|
00000820  6e 74 20 73 69 67 6e 61  6c 29 2c 20 61 6e 64 20  |nt signal), and |
00000830  28 33 29 20 74 68 65 20  66 6f 6c 6c 6f 77 69 6e  |(3) the followin|
00000840  67 20 71 75 6f 74 61 74  69 6f 6e 20 6d 61 72 6b  |g quotation mark|
00000850  20 61 66 74 65 72 20 61  6e 0a 69 6c 6c 65 67 61  | after an.illega|
00000860  6c 20 55 54 46 2d 38 20  73 65 71 75 65 6e 63 65  |l UTF-8 sequence|
00000870  20 69 73 20 63 6f 72 72  65 63 74 6c 79 20 64 69  | is correctly di|
00000880  73 70 6c 61 79 65 64 2c  20 69 2e 65 2e 20 70 72  |splayed, i.e. pr|
00000890  6f 70 65 72 0a 72 65 73  79 6e 63 68 72 6f 6e 69  |oper.resynchroni|
000008a0  7a 61 74 69 6f 6e 20 74  61 6b 65 73 20 70 6c 61  |zation takes pla|
000008b0  63 65 20 69 6d 6d 65 64  69 61 74 65 6c 79 20 61  |ce immediately a|
000008c0  66 74 65 72 20 61 6e 79  20 6d 61 6c 66 6f 72 6d  |fter any malform|
000008d0  65 64 0a 73 65 71 75 65  6e 63 65 2e 20 54 68 69  |ed.sequence. Thi|
000008e0  73 20 66 69 6c 65 20 73  61 79 73 20 22 54 48 45  |s file says "THE|
000008f0  20 45 4e 44 22 20 69 6e  20 74 68 65 20 6c 61 73  | END" in the las|
00000900  74 20 6c 69 6e 65 2c 20  73 6f 20 69 66 20 79 6f  |t line, so if yo|
00000910  75 20 64 6f 6e 27 74 0a  73 65 65 20 74 68 61 74  |u don't.see that|
00000920  2c 20 79 6f 75 72 20 64  65 63 6f 64 65 72 20 63  |, your decoder c|
00000930  72 61 73 68 65 64 20 73  6f 6d 65 68 6f 77 20 62  |rashed somehow b|
00000940  65 66 6f 72 65 2c 20 77  68 69 63 68 20 73 68 6f  |efore, which sho|
00000950  75 6c 64 20 61 6c 77 61  79 73 20 62 65 0a 63 61  |uld always be.ca|
00000960  75 73 65 20 66 6f 72 20  63 6f 6e 63 65 72 6e 2e  |use for concern.|
00000970  0a 0a 41 6c 6c 20 6c 69  6e 65 73 20 69 6e 20 74  |..All lines in t|
00000980  68 69 73 20 66 69 6c 65  20 61 72 65 20 65 78 61  |his file are exa|
00000990  63 74 6c 79 20 37 39 20  63 68 61 72 61 63 74 65  |ctly 79 characte|
000009a0  72 73 20 6c 6f 6e 67 20  28 70 6c 75 73 20 74 68  |rs long (plus th|
000009b0  65 20 6c 69 6e 65 0a 66  65 65 64 29 2e 20 49 6e  |e line.feed). In|
000009c0  20 61 64 64 69 74 69 6f  6e 2c 20 61 6c 6c 20 6c  | addition, all l|
000009d0  69 6e 65 73 20 65 6e 64  20 77 69 74 68 20 22 7c  |ines end with "||
000009e0  22 2c 20 65 78 63 65 70  74 20 66 6f 72 20 74 68  |", except for th|
000009f0  65 20 74 77 6f 20 74 65  73 74 0a 6c 69 6e 65 73  |e two test.lines|
00000a00  20 32 2e 31 2e 31 20 61  6e 64 20 32 2e 32 2e 31  | 2.1.1 and 2.2.1|
00000a10  2c 20 77 68 69 63 68 20  63 6f 6e 74 61 69 6e 20  |, which contain |
00000a20  6e 6f 6e 2d 70 72 69 6e  74 61 62 6c 65 20 41 53  |non-printable AS|
00000a30  43 49 49 20 63 6f 6e 74  72 6f 6c 73 0a 55 2b 30  |CII controls.U+0|
00000a40  30 30 30 20 61 6e 64 20  55 2b 30 30 37 46 2e 20  |000 and U+007F. |
00000a50  49 66 20 79 6f 75 20 64  69 73 70 6c 61 79 20 74  |If you display t|
00000a60  68 69 73 20 66 69 6c 65  20 77 69 74 68 20 61 20  |his file with a |
00000a70  66 69 78 65 64 2d 77 69  64 74 68 20 66 6f 6e 74  |fixed-width font|
00000a80  2c 0a 74 68 65 73 65 20  22 7c 22 20 63 68 61 72  |,.these "|" char|
00000a90  61 63 74 65 72 73 20 73  68 6f 75 6c 64 20 61 6c  |acters should al|
00000aa0  6c 20 6c 69 6e 65 20 75  70 20 69 6e 20 63 6f 6c  |l line up in col|
00000ab0  75 6d 6e 20 37 39 20 28  72 69 67 68 74 20 6d 61  |umn 79 (right ma|
00000ac0  72 67 69 6e 29 2e 0a 54  68 69 73 20 61 6c 6c 6f  |rgin)..This allo|
00000ad0  77 73 20 79 6f 75 20 74  6f 20 74 65 73 74 20 71  |ws you to test q|
00000ae0  75 69 63 6b 6c 79 2c 20  77 68 65 74 68 65 72 20  |uickly, whether |
00000af0  79 6f 75 72 20 55 54 46  2d 38 20 64 65 63 6f 64  |your UTF-8 decod|
00000b00  65 72 20 66 69 6e 64 73  20 74 68 65 0a 63 6f 72  |er finds the.cor|
00000b10  72 65 63 74 20 6e 75 6d  62 65 72 20 6f 66 20 63  |rect number of c|
00000b20  68 61 72 61 63 74 65 72  73 20 69 6e 20 65 76 65  |haracters in eve|
00000b30  72 79 20 6c 69 6e 65 2c  20 74 68 61 74 20 69 73  |ry line, that is|
00000b40  20 77 68 65 74 68 65 72  20 65 61 63 68 0a 6d 61  | whether each.ma|
00000b50  6c 66 6f 72 6d 65 64 20  73 65 71 75 65 6e 63 65  |lformed sequence|
00000b60  73 20 69 73 20 72 65 70  6c 61 63 65 64 20 62 79  |s is replaced by|
00000b70  20 61 20 73 69 6e 67 6c  65 20 72 65 70 6c 61 63  | a single replac|
00000b80  65 6d 65 6e 74 20 63 68  61 72 61 63 74 65 72 2e  |ement character.|
00000b90  0a 0a 4e 6f 74 65 20 74  68 61 74 2c 20 61 73 20  |..Note that, as |
00000ba0  61 6e 20 61 6c 74 65 72  6e 61 74 69 76 65 20 74  |an alternative t|
00000bb0  6f 20 74 68 65 20 6e 6f  74 69 6f 6e 20 6f 66 20  |o the notion of |
00000bc0  6d 61 6c 66 6f 72 6d 65  64 20 73 65 71 75 65 6e  |malformed sequen|
00000bd0  63 65 20 75 73 65 64 0a  68 65 72 65 2c 20 69 74  |ce used.here, it|
00000be0  20 69 73 20 61 6c 73 6f  20 61 20 70 65 72 66 65  | is also a perfe|
00000bf0  63 74 6c 79 20 61 63 63  65 70 74 61 62 6c 65 20  |ctly acceptable |
00000c00  28 61 6e 64 20 69 6e 20  73 6f 6d 65 20 73 69 74  |(and in some sit|
00000c10  75 61 74 69 6f 6e 73 20  65 76 65 6e 0a 70 72 65  |uations even.pre|
00000c20  66 65 72 61 62 6c 65 29  20 73 6f 6c 75 74 69 6f  |ferable) solutio|
00000c30  6e 20 74 6f 20 72 65 70  72 65 73 65 6e 74 20 65  |n to represent e|
00000c40  61 63 68 20 69 6e 64 69  76 69 64 75 61 6c 20 62  |ach individual b|
00000c50  79 74 65 20 6f 66 20 61  20 6d 61 6c 66 6f 72 6d  |yte of a malform|
00000c60  65 64 0a 73 65 71 75 65  6e 63 65 20 77 69 74 68  |ed.sequence with|
00000c70  20 61 20 72 65 70 6c 61  63 65 6d 65 6e 74 20 63  | a replacement c|
00000c80  68 61 72 61 63 74 65 72  2e 20 49 66 20 79 6f 75  |haracter. If you|
00000c90  20 66 6f 6c 6c 6f 77 20  74 68 69 73 20 73 74 72  | follow this str|
00000ca0  61 74 65 67 79 20 69 6e  0a 79 6f 75 72 20 64 65  |ategy in.your de|
00000cb0  63 6f 64 65 72 2c 20 74  68 65 6e 20 70 6c 65 61  |coder, then plea|
00000cc0  73 65 20 69 67 6e 6f 72  65 20 74 68 65 20 22 7c  |se ignore the "||
00000cd0  22 20 63 6f 6c 75 6d 6e  2e 0a 0a 0a 48 65 72 65  |" column....Here|
00000ce0  20 63 6f 6d 65 20 74 68  65 20 74 65 73 74 73 3a  | come the tests:|
00000cf0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00000d20  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00000d30  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00000d70  20 20 20 20 20 20 20 20  20 20 7c 0a 31 20 20 53  |          |.1  S|
00000d80  6f 6d 65 20 63 6f 72 72  65 63 74 20 55 54 46 2d  |ome correct UTF-|
00000d90  38 20 74 65 78 74 20 20  20 20 20 20 20 20 20 20  |8 text          |
00000da0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00000dc0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00000dd0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00000e10  20 20 20 20 20 20 20 20  20 20 7c 0a 59 6f 75 20  |          |.You |
00000e20  73 68 6f 75 6c 64 20 73  65 65 20 74 68 65 20 47  |should see the G|
00000e30  72 65 65 6b 20 77 6f 72  64 20 27 6b 6f 73 6d 65  |reek word 'kosme|
00000e40  27 3a 20 20 20 20 20 20  20 22 ce ba e1 bd b9 cf  |':       "......|
00000e50  83 ce bc ce b5 22 20 20  20 20 20 20 20 20 20 20  |....."          |
00000e60  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00000e70  7c 0a 20 20 20 20 20 20  20 20 20 20 20 20 20 20  ||.              |
00000e80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00000ec0  7c 0a 32 20 20 42 6f 75  6e 64 61 72 79 20 63 6f  ||.2  Boundary co|
00000ed0  6e 64 69 74 69 6f 6e 20  74 65 73 74 20 63 61 73  |ndition test cas|
00000ee0  65 73 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |es              |
00000ef0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00000f10  7c 0a 20 20 20 20 20 20  20 20 20 20 20 20 20 20  ||.              |
00000f20  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00000f60  7c 0a 32 2e 31 20 20 46  69 72 73 74 20 70 6f 73  ||.2.1  First pos|
00000f70  73 69 62 6c 65 20 73 65  71 75 65 6e 63 65 20 6f  |sible sequence o|
00000f80  66 20 61 20 63 65 72 74  61 69 6e 20 6c 65 6e 67  |f a certain leng|
00000f90  74 68 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |th              |
00000fa0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00000fb0  7c 0a 20 20 20 20 20 20  20 20 20 20 20 20 20 20  ||.              |
00000fc0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001000  7c 0a 32 2e 31 2e 31 20  20 31 20 62 79 74 65 20  ||.2.1.1  1 byte |
00001010  20 28 55 2d 30 30 30 30  30 30 30 30 29 3a 20 20  | (U-00000000):  |
00001020  20 20 20 20 20 20 22 00  22 20 20 20 20 20 20 20  |      "."       |
00001030  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001050  20 0a 32 2e 31 2e 32 20  20 32 20 62 79 74 65 73  | .2.1.2  2 bytes|
00001060  20 28 55 2d 30 30 30 30  30 30 38 30 29 3a 20 20  | (U-00000080):  |
00001070  20 20 20 20 20 20 22 c2  80 22 20 20 20 20 20 20  |      ".."      |
00001080  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000010a0  20 7c 0a 32 2e 31 2e 33  20 20 33 20 62 79 74 65  | |.2.1.3  3 byte|
000010b0  73 20 28 55 2d 30 30 30  30 30 38 30 30 29 3a 20  |s (U-00000800): |
000010c0  20 20 20 20 20 20 20 22  e0 a0 80 22 20 20 20 20  |       "..."    |
000010d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000010f0  20 20 20 7c 0a 32 2e 31  2e 34 20 20 34 20 62 79  |   |.2.1.4  4 by|
00001100  74 65 73 20 28 55 2d 30  30 30 31 30 30 30 30 29  |tes (U-00010000)|
00001110  3a 20 20 20 20 20 20 20  20 22 f0 90 80 80 22 20  |:        "...." |
00001120  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001140  20 20 20 20 20 20 7c 0a  32 2e 31 2e 35 20 20 35  |      |.2.1.5  5|
00001150  20 62 79 74 65 73 20 28  55 2d 30 30 32 30 30 30  | bytes (U-002000|
00001160  30 30 29 3a 20 20 20 20  20 20 20 20 22 f8 88 80  |00):        "...|
00001170  80 80 22 20 20 20 20 20  20 20 20 20 20 20 20 20  |.."             |
00001180  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001190  20 20 20 20 20 20 20 20  20 20 7c 0a 32 2e 31 2e  |          |.2.1.|
000011a0  36 20 20 36 20 62 79 74  65 73 20 28 55 2d 30 34  |6  6 bytes (U-04|
000011b0  30 30 30 30 30 30 29 3a  20 20 20 20 20 20 20 20  |000000):        |
000011c0  22 fc 84 80 80 80 80 22  20 20 20 20 20 20 20 20  |"......"        |
000011d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000011e0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
000011f0  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
00001200  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001230  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00001240  0a 32 2e 32 20 20 4c 61  73 74 20 70 6f 73 73 69  |.2.2  Last possi|
00001250  62 6c 65 20 73 65 71 75  65 6e 63 65 20 6f 66 20  |ble sequence of |
00001260  61 20 63 65 72 74 61 69  6e 20 6c 65 6e 67 74 68  |a certain length|
00001270  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001280  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00001290  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
000012a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000012d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
000012e0  0a 32 2e 32 2e 31 20 20  31 20 62 79 74 65 20 20  |.2.2.1  1 byte  |
000012f0  28 55 2d 30 30 30 30 30  30 37 46 29 3a 20 20 20  |(U-0000007F):   |
00001300  20 20 20 20 20 22 7f 22  20 20 20 20 20 20 20 20  |     "."        |
00001310  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001330  0a 32 2e 32 2e 32 20 20  32 20 62 79 74 65 73 20  |.2.2.2  2 bytes |
00001340  28 55 2d 30 30 30 30 30  37 46 46 29 3a 20 20 20  |(U-000007FF):   |
00001350  20 20 20 20 20 22 df bf  22 20 20 20 20 20 20 20  |     ".."       |
00001360  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001380  7c 0a 32 2e 32 2e 33 20  20 33 20 62 79 74 65 73  ||.2.2.3  3 bytes|
00001390  20 28 55 2d 30 30 30 30  46 46 46 46 29 3a 20 20  | (U-0000FFFF):  |
000013a0  20 20 20 20 20 20 22 ef  bf bf 22 20 20 20 20 20  |      "..."     |
000013b0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000013d0  20 20 7c 0a 32 2e 32 2e  34 20 20 34 20 62 79 74  |  |.2.2.4  4 byt|
000013e0  65 73 20 28 55 2d 30 30  31 46 46 46 46 46 29 3a  |es (U-001FFFFF):|
000013f0  20 20 20 20 20 20 20 20  22 f7 bf bf bf 22 20 20  |        "...."  |
00001400  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001420  20 20 20 20 20 7c 0a 32  2e 32 2e 35 20 20 35 20  |     |.2.2.5  5 |
00001430  62 79 74 65 73 20 28 55  2d 30 33 46 46 46 46 46  |bytes (U-03FFFFF|
00001440  46 29 3a 20 20 20 20 20  20 20 20 22 fb bf bf bf  |F):        "....|
00001450  bf 22 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |."              |
00001460  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001470  20 20 20 20 20 20 20 20  20 7c 0a 32 2e 32 2e 36  |         |.2.2.6|
00001480  20 20 36 20 62 79 74 65  73 20 28 55 2d 37 46 46  |  6 bytes (U-7FF|
00001490  46 46 46 46 46 29 3a 20  20 20 20 20 20 20 20 22  |FFFFF):        "|
000014a0  fd bf bf bf bf bf 22 20  20 20 20 20 20 20 20 20  |......"         |
000014b0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000014c0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
000014d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001510  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00001520  32 2e 33 20 20 4f 74 68  65 72 20 62 6f 75 6e 64  |2.3  Other bound|
00001530  61 72 79 20 63 6f 6e 64  69 74 69 6f 6e 73 20 20  |ary conditions  |
00001540  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001560  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00001570  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000015b0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
000015c0  32 2e 33 2e 31 20 20 55  2d 30 30 30 30 44 37 46  |2.3.1  U-0000D7F|
000015d0  46 20 3d 20 65 64 20 39  66 20 62 66 20 3d 20 22  |F = ed 9f bf = "|
000015e0  ed 9f bf 22 20 20 20 20  20 20 20 20 20 20 20 20  |..."            |
000015f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001610  7c 0a 32 2e 33 2e 32 20  20 55 2d 30 30 30 30 45  ||.2.3.2  U-0000E|
00001620  30 30 30 20 3d 20 65 65  20 38 30 20 38 30 20 3d  |000 = ee 80 80 =|
00001630  20 22 ee 80 80 22 20 20  20 20 20 20 20 20 20 20  | "..."          |
00001640  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001660  20 20 7c 0a 32 2e 33 2e  33 20 20 55 2d 30 30 30  |  |.2.3.3  U-000|
00001670  30 46 46 46 44 20 3d 20  65 66 20 62 66 20 62 64  |0FFFD = ef bf bd|
00001680  20 3d 20 22 ef bf bd 22  20 20 20 20 20 20 20 20  | = "..."        |
00001690  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000016b0  20 20 20 20 7c 0a 32 2e  33 2e 34 20 20 55 2d 30  |    |.2.3.4  U-0|
000016c0  30 31 30 46 46 46 46 20  3d 20 66 34 20 38 66 20  |010FFFF = f4 8f |
000016d0  62 66 20 62 66 20 3d 20  22 f4 8f bf bf 22 20 20  |bf bf = "...."  |
000016e0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001700  20 20 20 20 20 20 20 7c  0a 32 2e 33 2e 35 20 20  |       |.2.3.5  |
00001710  55 2d 30 30 31 31 30 30  30 30 20 3d 20 66 34 20  |U-00110000 = f4 |
00001720  39 30 20 38 30 20 38 30  20 3d 20 22 f4 90 80 80  |90 80 80 = "....|
00001730  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00001740  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001750  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001760  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000017a0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 20 20 4d  |          |.3  M|
000017b0  61 6c 66 6f 72 6d 65 64  20 73 65 71 75 65 6e 63  |alformed sequenc|
000017c0  65 73 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |es              |
000017d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000017f0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001800  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001840  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 20  |          |.3.1 |
00001850  20 55 6e 65 78 70 65 63  74 65 64 20 63 6f 6e 74  | Unexpected cont|
00001860  69 6e 75 61 74 69 6f 6e  20 62 79 74 65 73 20 20  |inuation bytes  |
00001870  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001890  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
000018a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000018e0  20 20 20 20 20 20 20 20  20 20 7c 0a 45 61 63 68  |          |.Each|
000018f0  20 75 6e 65 78 70 65 63  74 65 64 20 63 6f 6e 74  | unexpected cont|
00001900  69 6e 75 61 74 69 6f 6e  20 62 79 74 65 20 73 68  |inuation byte sh|
00001910  6f 75 6c 64 20 62 65 20  73 65 70 61 72 61 74 65  |ould be separate|
00001920  6c 79 20 73 69 67 6e 61  6c 6c 65 64 20 61 73 20  |ly signalled as |
00001930  61 20 20 20 20 20 20 20  20 20 7c 0a 6d 61 6c 66  |a         |.malf|
00001940  6f 72 6d 65 64 20 73 65  71 75 65 6e 63 65 20 6f  |ormed sequence o|
00001950  66 20 69 74 73 20 6f 77  6e 2e 20 20 20 20 20 20  |f its own.      |
00001960  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001980  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001990  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000019d0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
000019e0  31 20 20 46 69 72 73 74  20 63 6f 6e 74 69 6e 75  |1  First continu|
000019f0  61 74 69 6f 6e 20 62 79  74 65 20 30 78 38 30 3a  |ation byte 0x80:|
00001a00  20 22 80 22 20 20 20 20  20 20 20 20 20 20 20 20  | "."            |
00001a10  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001a20  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001a30  32 20 20 4c 61 73 74 20  20 63 6f 6e 74 69 6e 75  |2  Last  continu|
00001a40  61 74 69 6f 6e 20 62 79  74 65 20 30 78 62 66 3a  |ation byte 0xbf:|
00001a50  20 22 bf 22 20 20 20 20  20 20 20 20 20 20 20 20  | "."            |
00001a60  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001a70  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001a80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001ac0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001ad0  33 20 20 32 20 63 6f 6e  74 69 6e 75 61 74 69 6f  |3  2 continuatio|
00001ae0  6e 20 62 79 74 65 73 3a  20 22 80 bf 22 20 20 20  |n bytes: ".."   |
00001af0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001b10  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001b20  34 20 20 33 20 63 6f 6e  74 69 6e 75 61 74 69 6f  |4  3 continuatio|
00001b30  6e 20 62 79 74 65 73 3a  20 22 80 bf 80 22 20 20  |n bytes: "..."  |
00001b40  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001b60  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001b70  35 20 20 34 20 63 6f 6e  74 69 6e 75 61 74 69 6f  |5  4 continuatio|
00001b80  6e 20 62 79 74 65 73 3a  20 22 80 bf 80 bf 22 20  |n bytes: "...." |
00001b90  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001bb0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001bc0  36 20 20 35 20 63 6f 6e  74 69 6e 75 61 74 69 6f  |6  5 continuatio|
00001bd0  6e 20 62 79 74 65 73 3a  20 22 80 bf 80 bf 80 22  |n bytes: "....."|
00001be0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001c00  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001c10  37 20 20 36 20 63 6f 6e  74 69 6e 75 61 74 69 6f  |7  6 continuatio|
00001c20  6e 20 62 79 74 65 73 3a  20 22 80 bf 80 bf 80 bf  |n bytes: "......|
00001c30  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00001c40  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001c50  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001c60  38 20 20 37 20 63 6f 6e  74 69 6e 75 61 74 69 6f  |8  7 continuatio|
00001c70  6e 20 62 79 74 65 73 3a  20 22 80 bf 80 bf 80 bf  |n bytes: "......|
00001c80  80 22 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |."              |
00001c90  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00001ca0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001cb0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001cf0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 31 2e  |          |.3.1.|
00001d00  39 20 20 53 65 71 75 65  6e 63 65 20 6f 66 20 61  |9  Sequence of a|
00001d10  6c 6c 20 36 34 20 70 6f  73 73 69 62 6c 65 20 63  |ll 64 possible c|
00001d20  6f 6e 74 69 6e 75 61 74  69 6f 6e 20 62 79 74 65  |ontinuation byte|
00001d30  73 20 28 30 78 38 30 2d  30 78 62 66 29 3a 20 20  |s (0x80-0xbf):  |
00001d40  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001d50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001d90  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 22  |          |.   "|
00001da0  80 81 82 83 84 85 86 87  88 89 8a 8b 8c 8d 8e 8f  |................|
00001db0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001de0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001df0  90 91 92 93 94 95 96 97  98 99 9a 9b 9c 9d 9e 9f  |................|
00001e00  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001e30  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001e40  a0 a1 a2 a3 a4 a5 a6 a7  a8 a9 aa ab ac ad ae af  |................|
00001e50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001e80  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001e90  b0 b1 b2 b3 b4 b5 b6 b7  b8 b9 ba bb bc bd be bf  |................|
00001ea0  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00001eb0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001ed0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001ee0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001f20  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 32 20  |          |.3.2 |
00001f30  20 4c 6f 6e 65 6c 79 20  73 74 61 72 74 20 63 68  | Lonely start ch|
00001f40  61 72 61 63 74 65 72 73  20 20 20 20 20 20 20 20  |aracters        |
00001f50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001f70  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00001f80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00001fc0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 32 2e  |          |.3.2.|
00001fd0  31 20 20 41 6c 6c 20 33  32 20 66 69 72 73 74 20  |1  All 32 first |
00001fe0  62 79 74 65 73 20 6f 66  20 32 2d 62 79 74 65 20  |bytes of 2-byte |
00001ff0  73 65 71 75 65 6e 63 65  73 20 28 30 78 63 30 2d  |sequences (0xc0-|
00002000  30 78 64 66 29 2c 20 20  20 20 20 20 20 20 20 20  |0xdf),          |
00002010  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002020  20 20 20 65 61 63 68 20  66 6f 6c 6c 6f 77 65 64  |   each followed|
00002030  20 62 79 20 61 20 73 70  61 63 65 20 63 68 61 72  | by a space char|
00002040  61 63 74 65 72 3a 20 20  20 20 20 20 20 20 20 20  |acter:          |
00002050  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00002060  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002070  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000020b0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 22  |          |.   "|
000020c0  c0 20 c1 20 c2 20 c3 20  c4 20 c5 20 c6 20 c7 20  |. . . . . . . . |
000020d0  c8 20 c9 20 ca 20 cb 20  cc 20 cd 20 ce 20 cf 20  |. . . . . . . . |
000020e0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002100  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002110  d0 20 d1 20 d2 20 d3 20  d4 20 d5 20 d6 20 d7 20  |. . . . . . . . |
00002120  d8 20 d9 20 da 20 db 20  dc 20 dd 20 de 20 df 20  |. . . . . . . . |
00002130  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00002140  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00002150  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002160  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000021a0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 32 2e  |          |.3.2.|
000021b0  32 20 20 41 6c 6c 20 31  36 20 66 69 72 73 74 20  |2  All 16 first |
000021c0  62 79 74 65 73 20 6f 66  20 33 2d 62 79 74 65 20  |bytes of 3-byte |
000021d0  73 65 71 75 65 6e 63 65  73 20 28 30 78 65 30 2d  |sequences (0xe0-|
000021e0  30 78 65 66 29 2c 20 20  20 20 20 20 20 20 20 20  |0xef),          |
000021f0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002200  20 20 20 65 61 63 68 20  66 6f 6c 6c 6f 77 65 64  |   each followed|
00002210  20 62 79 20 61 20 73 70  61 63 65 20 63 68 61 72  | by a space char|
00002220  61 63 74 65 72 3a 20 20  20 20 20 20 20 20 20 20  |acter:          |
00002230  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00002240  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002250  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002290  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 22  |          |.   "|
000022a0  e0 20 e1 20 e2 20 e3 20  e4 20 e5 20 e6 20 e7 20  |. . . . . . . . |
000022b0  e8 20 e9 20 ea 20 eb 20  ec 20 ed 20 ee 20 ef 20  |. . . . . . . . |
000022c0  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
000022d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000022e0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
000022f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002330  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 32 2e  |          |.3.2.|
00002340  33 20 20 41 6c 6c 20 38  20 66 69 72 73 74 20 62  |3  All 8 first b|
00002350  79 74 65 73 20 6f 66 20  34 2d 62 79 74 65 20 73  |ytes of 4-byte s|
00002360  65 71 75 65 6e 63 65 73  20 28 30 78 66 30 2d 30  |equences (0xf0-0|
00002370  78 66 37 29 2c 20 20 20  20 20 20 20 20 20 20 20  |xf7),           |
00002380  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002390  20 20 20 65 61 63 68 20  66 6f 6c 6c 6f 77 65 64  |   each followed|
000023a0  20 62 79 20 61 20 73 70  61 63 65 20 63 68 61 72  | by a space char|
000023b0  61 63 74 65 72 3a 20 20  20 20 20 20 20 20 20 20  |acter:          |
000023c0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000023d0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
000023e0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002420  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 22  |          |.   "|
00002430  f0 20 f1 20 f2 20 f3 20  f4 20 f5 20 f6 20 f7 20  |. . . . . . . . |
00002440  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00002450  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002470  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002480  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000024c0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 32 2e  |          |.3.2.|
000024d0  34 20 20 41 6c 6c 20 34  20 66 69 72 73 74 20 62  |4  All 4 first b|
000024e0  79 74 65 73 20 6f 66 20  35 2d 62 79 74 65 20 73  |ytes of 5-byte s|
000024f0  65 71 75 65 6e 63 65 73  20 28 30 78 66 38 2d 30  |equences (0xf8-0|
00002500  78 66 62 29 2c 20 20 20  20 20 20 20 20 20 20 20  |xfb),           |
00002510  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002520  20 20 20 65 61 63 68 20  66 6f 6c 6c 6f 77 65 64  |   each followed|
00002530  20 62 79 20 61 20 73 70  61 63 65 20 63 68 61 72  | by a space char|
00002540  61 63 74 65 72 3a 20 20  20 20 20 20 20 20 20 20  |acter:          |
00002550  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00002560  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002570  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000025b0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 22  |          |.   "|
000025c0  f8 20 f9 20 fa 20 fb 20  22 20 20 20 20 20 20 20  |. . . . "       |
000025d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002600  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002610  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002650  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 32 2e  |          |.3.2.|
00002660  35 20 20 41 6c 6c 20 32  20 66 69 72 73 74 20 62  |5  All 2 first b|
00002670  79 74 65 73 20 6f 66 20  36 2d 62 79 74 65 20 73  |ytes of 6-byte s|
00002680  65 71 75 65 6e 63 65 73  20 28 30 78 66 63 2d 30  |equences (0xfc-0|
00002690  78 66 64 29 2c 20 20 20  20 20 20 20 20 20 20 20  |xfd),           |
000026a0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
000026b0  20 20 20 65 61 63 68 20  66 6f 6c 6c 6f 77 65 64  |   each followed|
000026c0  20 62 79 20 61 20 73 70  61 63 65 20 63 68 61 72  | by a space char|
000026d0  61 63 74 65 72 3a 20 20  20 20 20 20 20 20 20 20  |acter:          |
000026e0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000026f0  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002700  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002740  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 22  |          |.   "|
00002750  fc 20 fd 20 22 20 20 20  20 20 20 20 20 20 20 20  |. . "           |
00002760  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002790  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
000027a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000027e0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 33 20  |          |.3.3 |
000027f0  20 53 65 71 75 65 6e 63  65 73 20 77 69 74 68 20  | Sequences with |
00002800  6c 61 73 74 20 63 6f 6e  74 69 6e 75 61 74 69 6f  |last continuatio|
00002810  6e 20 62 79 74 65 20 6d  69 73 73 69 6e 67 20 20  |n byte missing  |
00002820  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00002830  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002840  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002880  20 20 20 20 20 20 20 20  20 20 7c 0a 41 6c 6c 20  |          |.All |
00002890  62 79 74 65 73 20 6f 66  20 61 6e 20 69 6e 63 6f  |bytes of an inco|
000028a0  6d 70 6c 65 74 65 20 73  65 71 75 65 6e 63 65 20  |mplete sequence |
000028b0  73 68 6f 75 6c 64 20 62  65 20 73 69 67 6e 61 6c  |should be signal|
000028c0  6c 65 64 20 61 73 20 61  20 73 69 6e 67 6c 65 20  |led as a single |
000028d0  20 20 20 20 20 20 20 20  20 20 7c 0a 6d 61 6c 66  |          |.malf|
000028e0  6f 72 6d 65 64 20 73 65  71 75 65 6e 63 65 2c 20  |ormed sequence, |
000028f0  69 2e 65 2e 2c 20 79 6f  75 20 73 68 6f 75 6c 64  |i.e., you should|
00002900  20 73 65 65 20 6f 6e 6c  79 20 61 20 73 69 6e 67  | see only a sing|
00002910  6c 65 20 72 65 70 6c 61  63 65 6d 65 6e 74 20 20  |le replacement  |
00002920  20 20 20 20 20 20 20 20  20 20 7c 0a 63 68 61 72  |          |.char|
00002930  61 63 74 65 72 20 69 6e  20 65 61 63 68 20 6f 66  |acter in each of|
00002940  20 74 68 65 20 6e 65 78  74 20 31 30 20 74 65 73  | the next 10 tes|
00002950  74 73 2e 20 28 43 68 61  72 61 63 74 65 72 73 20  |ts. (Characters |
00002960  61 73 20 69 6e 20 73 65  63 74 69 6f 6e 20 32 29  |as in section 2)|
00002970  20 20 20 20 20 20 20 20  20 20 7c 0a 20 20 20 20  |          |.    |
00002980  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000029c0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 33 2e  |          |.3.3.|
000029d0  31 20 20 32 2d 62 79 74  65 20 73 65 71 75 65 6e  |1  2-byte sequen|
000029e0  63 65 20 77 69 74 68 20  6c 61 73 74 20 62 79 74  |ce with last byt|
000029f0  65 20 6d 69 73 73 69 6e  67 20 28 55 2b 30 30 30  |e missing (U+000|
00002a00  30 29 3a 20 20 20 20 20  22 c0 22 20 20 20 20 20  |0):     "."     |
00002a10  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 33 2e  |          |.3.3.|
00002a20  32 20 20 33 2d 62 79 74  65 20 73 65 71 75 65 6e  |2  3-byte sequen|
00002a30  63 65 20 77 69 74 68 20  6c 61 73 74 20 62 79 74  |ce with last byt|
00002a40  65 20 6d 69 73 73 69 6e  67 20 28 55 2b 30 30 30  |e missing (U+000|
00002a50  30 29 3a 20 20 20 20 20  22 e0 80 22 20 20 20 20  |0):     ".."    |
00002a60  20 20 20 20 20 20 20 20  20 20 20 7c 0a 33 2e 33  |           |.3.3|
00002a70  2e 33 20 20 34 2d 62 79  74 65 20 73 65 71 75 65  |.3  4-byte seque|
00002a80  6e 63 65 20 77 69 74 68  20 6c 61 73 74 20 62 79  |nce with last by|
00002a90  74 65 20 6d 69 73 73 69  6e 67 20 28 55 2b 30 30  |te missing (U+00|
00002aa0  30 30 29 3a 20 20 20 20  20 22 f0 80 80 22 20 20  |00):     "..."  |
00002ab0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 33  |             |.3|
00002ac0  2e 33 2e 34 20 20 35 2d  62 79 74 65 20 73 65 71  |.3.4  5-byte seq|
00002ad0  75 65 6e 63 65 20 77 69  74 68 20 6c 61 73 74 20  |uence with last |
00002ae0  62 79 74 65 20 6d 69 73  73 69 6e 67 20 28 55 2b  |byte missing (U+|
00002af0  30 30 30 30 29 3a 20 20  20 20 20 22 f8 80 80 80  |0000):     "....|
00002b00  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00002b10  7c 0a 33 2e 33 2e 35 20  20 36 2d 62 79 74 65 20  ||.3.3.5  6-byte |
00002b20  73 65 71 75 65 6e 63 65  20 77 69 74 68 20 6c 61  |sequence with la|
00002b30  73 74 20 62 79 74 65 20  6d 69 73 73 69 6e 67 20  |st byte missing |
00002b40  28 55 2b 30 30 30 30 29  3a 20 20 20 20 20 22 fc  |(U+0000):     ".|
00002b50  80 80 80 80 22 20 20 20  20 20 20 20 20 20 20 20  |...."           |
00002b60  20 20 20 20 7c 0a 33 2e  33 2e 36 20 20 32 2d 62  |    |.3.3.6  2-b|
00002b70  79 74 65 20 73 65 71 75  65 6e 63 65 20 77 69 74  |yte sequence wit|
00002b80  68 20 6c 61 73 74 20 62  79 74 65 20 6d 69 73 73  |h last byte miss|
00002b90  69 6e 67 20 28 55 2d 30  30 30 30 30 37 46 46 29  |ing (U-000007FF)|
00002ba0  3a 20 22 df 22 20 20 20  20 20 20 20 20 20 20 20  |: "."           |
00002bb0  20 20 20 20 7c 0a 33 2e  33 2e 37 20 20 33 2d 62  |    |.3.3.7  3-b|
00002bc0  79 74 65 20 73 65 71 75  65 6e 63 65 20 77 69 74  |yte sequence wit|
00002bd0  68 20 6c 61 73 74 20 62  79 74 65 20 6d 69 73 73  |h last byte miss|
00002be0  69 6e 67 20 28 55 2d 30  30 30 30 46 46 46 46 29  |ing (U-0000FFFF)|
00002bf0  3a 20 22 ef bf 22 20 20  20 20 20 20 20 20 20 20  |: ".."          |
00002c00  20 20 20 20 20 7c 0a 33  2e 33 2e 38 20 20 34 2d  |     |.3.3.8  4-|
00002c10  62 79 74 65 20 73 65 71  75 65 6e 63 65 20 77 69  |byte sequence wi|
00002c20  74 68 20 6c 61 73 74 20  62 79 74 65 20 6d 69 73  |th last byte mis|
00002c30  73 69 6e 67 20 28 55 2d  30 30 31 46 46 46 46 46  |sing (U-001FFFFF|
00002c40  29 3a 20 22 f7 bf bf 22  20 20 20 20 20 20 20 20  |): "..."        |
00002c50  20 20 20 20 20 20 20 7c  0a 33 2e 33 2e 39 20 20  |       |.3.3.9  |
00002c60  35 2d 62 79 74 65 20 73  65 71 75 65 6e 63 65 20  |5-byte sequence |
00002c70  77 69 74 68 20 6c 61 73  74 20 62 79 74 65 20 6d  |with last byte m|
00002c80  69 73 73 69 6e 67 20 28  55 2d 30 33 46 46 46 46  |issing (U-03FFFF|
00002c90  46 46 29 3a 20 22 fb bf  bf bf 22 20 20 20 20 20  |FF): "...."     |
00002ca0  20 20 20 20 20 20 20 20  20 20 7c 0a 33 2e 33 2e  |          |.3.3.|
00002cb0  31 30 20 36 2d 62 79 74  65 20 73 65 71 75 65 6e  |10 6-byte sequen|
00002cc0  63 65 20 77 69 74 68 20  6c 61 73 74 20 62 79 74  |ce with last byt|
00002cd0  65 20 6d 69 73 73 69 6e  67 20 28 55 2d 37 46 46  |e missing (U-7FF|
00002ce0  46 46 46 46 46 29 3a 20  22 fd bf bf bf bf 22 20  |FFFFF): "....." |
00002cf0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00002d00  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002d40  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00002d50  33 2e 34 20 20 43 6f 6e  63 61 74 65 6e 61 74 69  |3.4  Concatenati|
00002d60  6f 6e 20 6f 66 20 69 6e  63 6f 6d 70 6c 65 74 65  |on of incomplete|
00002d70  20 73 65 71 75 65 6e 63  65 73 20 20 20 20 20 20  | sequences      |
00002d80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00002d90  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00002da0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002de0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00002df0  41 6c 6c 20 74 68 65 20  31 30 20 73 65 71 75 65  |All the 10 seque|
00002e00  6e 63 65 73 20 6f 66 20  33 2e 33 20 63 6f 6e 63  |nces of 3.3 conc|
00002e10  61 74 65 6e 61 74 65 64  2c 20 79 6f 75 20 73 68  |atenated, you sh|
00002e20  6f 75 6c 64 20 73 65 65  20 31 30 20 6d 61 6c 66  |ould see 10 malf|
00002e30  6f 72 6d 65 64 20 20 20  20 20 20 20 20 20 7c 0a  |ormed         |.|
00002e40  73 65 71 75 65 6e 63 65  73 20 62 65 69 6e 67 20  |sequences being |
00002e50  73 69 67 6e 61 6c 6c 65  64 3a 20 20 20 20 20 20  |signalled:      |
00002e60  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002e80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00002e90  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002ed0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 7c 0a  |              |.|
00002ee0  20 20 20 22 c0 e0 80 f0  80 80 f8 80 80 80 fc 80  |   "............|
00002ef0  80 80 80 df ef bf f7 bf  bf fb bf bf bf fd bf bf  |................|
00002f00  bf bf 22 20 20 20 20 20  20 20 20 20 20 20 20 20  |.."             |
00002f10  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002f40  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
00002f50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002f90  20 20 7c 0a 33 2e 35 20  20 49 6d 70 6f 73 73 69  |  |.3.5  Impossi|
00002fa0  62 6c 65 20 62 79 74 65  73 20 20 20 20 20 20 20  |ble bytes       |
00002fb0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00002fe0  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
00002ff0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003030  20 20 7c 0a 54 68 65 20  66 6f 6c 6c 6f 77 69 6e  |  |.The followin|
00003040  67 20 74 77 6f 20 62 79  74 65 73 20 63 61 6e 6e  |g two bytes cann|
00003050  6f 74 20 61 70 70 65 61  72 20 69 6e 20 61 20 63  |ot appear in a c|
00003060  6f 72 72 65 63 74 20 55  54 46 2d 38 20 73 74 72  |orrect UTF-8 str|
00003070  69 6e 67 20 20 20 20 20  20 20 20 20 20 20 20 20  |ing             |
00003080  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
00003090  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000030d0  20 20 7c 0a 33 2e 35 2e  31 20 20 66 65 20 3d 20  |  |.3.5.1  fe = |
000030e0  22 fe 22 20 20 20 20 20  20 20 20 20 20 20 20 20  |"."             |
000030f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003120  20 20 7c 0a 33 2e 35 2e  32 20 20 66 66 20 3d 20  |  |.3.5.2  ff = |
00003130  22 ff 22 20 20 20 20 20  20 20 20 20 20 20 20 20  |"."             |
00003140  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003170  20 20 7c 0a 33 2e 35 2e  33 20 20 66 65 20 66 65  |  |.3.5.3  fe fe|
00003180  20 66 66 20 66 66 20 3d  20 22 fe fe ff ff 22 20  | ff ff = "...." |
00003190  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000031c0  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
000031d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003210  20 20 7c 0a 34 20 20 4f  76 65 72 6c 6f 6e 67 20  |  |.4  Overlong |
00003220  73 65 71 75 65 6e 63 65  73 20 20 20 20 20 20 20  |sequences       |
00003230  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003260  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
00003270  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000032b0  20 20 7c 0a 54 68 65 20  66 6f 6c 6c 6f 77 69 6e  |  |.The followin|
000032c0  67 20 73 65 71 75 65 6e  63 65 73 20 61 72 65 20  |g sequences are |
000032d0  6e 6f 74 20 6d 61 6c 66  6f 72 6d 65 64 20 61 63  |not malformed ac|
000032e0  63 6f 72 64 69 6e 67 20  74 6f 20 74 68 65 20 6c  |cording to the l|
000032f0  65 74 74 65 72 20 6f 66  20 20 20 20 20 20 20 20  |etter of        |
00003300  20 20 7c 0a 74 68 65 20  55 6e 69 63 6f 64 65 20  |  |.the Unicode |
00003310  32 2e 30 20 73 74 61 6e  64 61 72 64 2e 20 48 6f  |2.0 standard. Ho|
00003320  77 65 76 65 72 2c 20 74  68 65 79 20 61 72 65 20  |wever, they are |
00003330  6c 6f 6e 67 65 72 20 74  68 65 6e 20 6e 65 63 65  |longer then nece|
00003340  73 73 61 72 79 20 61 6e  64 20 20 20 20 20 20 20  |ssary and       |
00003350  20 20 7c 0a 61 20 63 6f  72 72 65 63 74 20 55 54  |  |.a correct UT|
00003360  46 2d 38 20 65 6e 63 6f  64 65 72 20 69 73 20 6e  |F-8 encoder is n|
00003370  6f 74 20 61 6c 6c 6f 77  65 64 20 74 6f 20 70 72  |ot allowed to pr|
00003380  6f 64 75 63 65 20 74 68  65 6d 2e 20 41 20 22 73  |oduce them. A "s|
00003390  61 66 65 20 55 54 46 2d  38 20 20 20 20 20 20 20  |afe UTF-8       |
000033a0  20 20 7c 0a 64 65 63 6f  64 65 72 22 20 73 68 6f  |  |.decoder" sho|
000033b0  75 6c 64 20 72 65 6a 65  63 74 20 74 68 65 6d 20  |uld reject them |
000033c0  6a 75 73 74 20 6c 69 6b  65 20 6d 61 6c 66 6f 72  |just like malfor|
000033d0  6d 65 64 20 73 65 71 75  65 6e 63 65 73 20 66 6f  |med sequences fo|
000033e0  72 20 74 77 6f 20 20 20  20 20 20 20 20 20 20 20  |r two           |
000033f0  20 20 7c 0a 72 65 61 73  6f 6e 73 3a 20 28 31 29  |  |.reasons: (1)|
00003400  20 49 74 20 68 65 6c 70  73 20 74 6f 20 64 65 62  | It helps to deb|
00003410  75 67 20 61 70 70 6c 69  63 61 74 69 6f 6e 73 20  |ug applications |
00003420  69 66 20 6f 76 65 72 6c  6f 6e 67 20 73 65 71 75  |if overlong sequ|
00003430  65 6e 63 65 73 20 61 72  65 20 20 20 20 20 20 20  |ences are       |
00003440  20 20 7c 0a 6e 6f 74 20  74 72 65 61 74 65 64 20  |  |.not treated |
00003450  61 73 20 76 61 6c 69 64  20 72 65 70 72 65 73 65  |as valid represe|
00003460  6e 74 61 74 69 6f 6e 73  20 6f 66 20 63 68 61 72  |ntations of char|
00003470  61 63 74 65 72 73 2c 20  62 65 63 61 75 73 65 20  |acters, because |
00003480  74 68 69 73 20 68 65 6c  70 73 20 20 20 20 20 20  |this helps      |
00003490  20 20 7c 0a 74 6f 20 73  70 6f 74 20 70 72 6f 62  |  |.to spot prob|
000034a0  6c 65 6d 73 20 6d 6f 72  65 20 71 75 69 63 6b 6c  |lems more quickl|
000034b0  79 2e 20 28 32 29 20 4f  76 65 72 6c 6f 6e 67 20  |y. (2) Overlong |
000034c0  73 65 71 75 65 6e 63 65  73 20 70 72 6f 76 69 64  |sequences provid|
000034d0  65 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |e               |
000034e0  20 20 7c 0a 61 6c 74 65  72 6e 61 74 69 76 65 20  |  |.alternative |
000034f0  72 65 70 72 65 73 65 6e  74 61 74 69 6f 6e 73 20  |representations |
00003500  6f 66 20 63 68 61 72 61  63 74 65 72 73 2c 20 74  |of characters, t|
00003510  68 61 74 20 63 6f 75 6c  64 20 6d 61 6c 69 63 69  |hat could malici|
00003520  6f 75 73 6c 79 20 62 65  20 20 20 20 20 20 20 20  |ously be        |
00003530  20 20 7c 0a 75 73 65 64  20 74 6f 20 62 79 70 61  |  |.used to bypa|
00003540  73 73 20 66 69 6c 74 65  72 73 20 74 68 61 74 20  |ss filters that |
00003550  63 68 65 63 6b 20 6f 6e  6c 79 20 66 6f 72 20 41  |check only for A|
00003560  53 43 49 49 20 63 68 61  72 61 63 74 65 72 73 2e  |SCII characters.|
00003570  20 46 6f 72 20 20 20 20  20 20 20 20 20 20 20 20  | For            |
00003580  20 20 7c 0a 69 6e 73 74  61 6e 63 65 2c 20 61 20  |  |.instance, a |
00003590  32 2d 62 79 74 65 20 65  6e 63 6f 64 65 64 20 6c  |2-byte encoded l|
000035a0  69 6e 65 20 66 65 65 64  20 28 4c 46 29 20 77 6f  |ine feed (LF) wo|
000035b0  75 6c 64 20 6e 6f 74 20  62 65 20 63 61 75 67 68  |uld not be caugh|
000035c0  74 20 62 79 20 61 20 20  20 20 20 20 20 20 20 20  |t by a          |
000035d0  20 20 7c 0a 6c 69 6e 65  20 63 6f 75 6e 74 65 72  |  |.line counter|
000035e0  20 74 68 61 74 20 63 6f  75 6e 74 73 20 6f 6e 6c  | that counts onl|
000035f0  79 20 30 78 30 61 20 62  79 74 65 73 2c 20 62 75  |y 0x0a bytes, bu|
00003600  74 20 69 74 20 77 6f 75  6c 64 20 73 74 69 6c 6c  |t it would still|
00003610  20 62 65 20 20 20 20 20  20 20 20 20 20 20 20 20  | be             |
00003620  20 20 7c 0a 70 72 6f 63  65 73 73 65 64 20 61 73  |  |.processed as|
00003630  20 61 20 6c 69 6e 65 20  66 65 65 64 20 62 79 20  | a line feed by |
00003640  61 6e 20 75 6e 73 61 66  65 20 55 54 46 2d 38 20  |an unsafe UTF-8 |
00003650  64 65 63 6f 64 65 72 20  6c 61 74 65 72 20 69 6e  |decoder later in|
00003660  20 74 68 65 20 20 20 20  20 20 20 20 20 20 20 20  | the            |
00003670  20 20 7c 0a 70 69 70 65  6c 69 6e 65 2e 20 46 72  |  |.pipeline. Fr|
00003680  6f 6d 20 61 20 73 65 63  75 72 69 74 79 20 70 6f  |om a security po|
00003690  69 6e 74 20 6f 66 20 76  69 65 77 2c 20 41 53 43  |int of view, ASC|
000036a0  49 49 20 63 6f 6d 70 61  74 69 62 69 6c 69 74 79  |II compatibility|
000036b0  20 6f 66 20 55 54 46 2d  38 20 20 20 20 20 20 20  | of UTF-8       |
000036c0  20 20 7c 0a 73 65 71 75  65 6e 63 65 73 20 6d 65  |  |.sequences me|
000036d0  61 6e 73 20 61 6c 73 6f  2c 20 74 68 61 74 20 41  |ans also, that A|
000036e0  53 43 49 49 20 63 68 61  72 61 63 74 65 72 73 20  |SCII characters |
000036f0  61 72 65 20 2a 6f 6e 6c  79 2a 20 61 6c 6c 6f 77  |are *only* allow|
00003700  65 64 20 74 6f 20 62 65  20 20 20 20 20 20 20 20  |ed to be        |
00003710  20 20 7c 0a 72 65 70 72  65 73 65 6e 74 65 64 20  |  |.represented |
00003720  62 79 20 41 53 43 49 49  20 62 79 74 65 73 20 69  |by ASCII bytes i|
00003730  6e 20 74 68 65 20 72 61  6e 67 65 20 30 78 30 30  |n the range 0x00|
00003740  2d 30 78 37 66 2e 20 54  6f 20 65 6e 73 75 72 65  |-0x7f. To ensure|
00003750  20 74 68 69 73 20 20 20  20 20 20 20 20 20 20 20  | this           |
00003760  20 20 7c 0a 61 73 70 65  63 74 20 6f 66 20 41 53  |  |.aspect of AS|
00003770  43 49 49 20 63 6f 6d 70  61 74 69 62 69 6c 69 74  |CII compatibilit|
00003780  79 2c 20 75 73 65 20 6f  6e 6c 79 20 22 73 61 66  |y, use only "saf|
00003790  65 20 55 54 46 2d 38 20  64 65 63 6f 64 65 72 73  |e UTF-8 decoders|
000037a0  22 20 74 68 61 74 20 20  20 20 20 20 20 20 20 20  |" that          |
000037b0  20 20 7c 0a 72 65 6a 65  63 74 20 6f 76 65 72 6c  |  |.reject overl|
000037c0  6f 6e 67 20 55 54 46 2d  38 20 73 65 71 75 65 6e  |ong UTF-8 sequen|
000037d0  63 65 73 20 66 6f 72 20  77 68 69 63 68 20 61 20  |ces for which a |
000037e0  73 68 6f 72 74 65 72 20  65 6e 63 6f 64 69 6e 67  |shorter encoding|
000037f0  20 65 78 69 73 74 73 2e  20 20 20 20 20 20 20 20  | exists.        |
00003800  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
00003810  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003850  20 20 7c 0a 34 2e 31 20  20 45 78 61 6d 70 6c 65  |  |.4.1  Example|
00003860  73 20 6f 66 20 61 6e 20  6f 76 65 72 6c 6f 6e 67  |s of an overlong|
00003870  20 41 53 43 49 49 20 63  68 61 72 61 63 74 65 72  | ASCII character|
00003880  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000038a0  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
000038b0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000038f0  20 20 7c 0a 57 69 74 68  20 61 20 73 61 66 65 20  |  |.With a safe |
00003900  55 54 46 2d 38 20 64 65  63 6f 64 65 72 2c 20 61  |UTF-8 decoder, a|
00003910  6c 6c 20 6f 66 20 74 68  65 20 66 6f 6c 6c 6f 77  |ll of the follow|
00003920  69 6e 67 20 66 69 76 65  20 6f 76 65 72 6c 6f 6e  |ing five overlon|
00003930  67 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |g               |
00003940  20 20 7c 0a 72 65 70 72  65 73 65 6e 74 61 74 69  |  |.representati|
00003950  6f 6e 73 20 6f 66 20 74  68 65 20 41 53 43 49 49  |ons of the ASCII|
00003960  20 63 68 61 72 61 63 74  65 72 20 73 6c 61 73 68  | character slash|
00003970  20 28 22 2f 22 29 20 73  68 6f 75 6c 64 20 62 65  | ("/") should be|
00003980  20 72 65 6a 65 63 74 65  64 20 20 20 20 20 20 20  | rejected       |
00003990  20 20 7c 0a 6c 69 6b 65  20 61 20 6d 61 6c 66 6f  |  |.like a malfo|
000039a0  72 6d 65 64 20 55 54 46  2d 38 20 73 65 71 75 65  |rmed UTF-8 seque|
000039b0  6e 63 65 2c 20 66 6f 72  20 69 6e 73 74 61 6e 63  |nce, for instanc|
000039c0  65 20 62 79 20 73 75 62  73 74 69 74 75 74 69 6e  |e by substitutin|
000039d0  67 20 69 74 20 77 69 74  68 20 20 20 20 20 20 20  |g it with       |
000039e0  20 20 7c 0a 61 20 72 65  70 6c 61 63 65 6d 65 6e  |  |.a replacemen|
000039f0  74 20 63 68 61 72 61 63  74 65 72 2e 20 49 66 20  |t character. If |
00003a00  79 6f 75 20 73 65 65 20  61 20 73 6c 61 73 68 20  |you see a slash |
00003a10  62 65 6c 6f 77 2c 20 79  6f 75 20 64 6f 20 6e 6f  |below, you do no|
00003a20  74 20 68 61 76 65 20 61  20 20 20 20 20 20 20 20  |t have a        |
00003a30  20 20 7c 0a 73 61 66 65  20 55 54 46 2d 38 20 64  |  |.safe UTF-8 d|
00003a40  65 63 6f 64 65 72 21 20  20 20 20 20 20 20 20 20  |ecoder!         |
00003a50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003a80  20 20 7c 0a 20 20 20 20  20 20 20 20 20 20 20 20  |  |.            |
00003a90  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003ad0  20 20 7c 0a 34 2e 31 2e  31 20 55 2b 30 30 32 46  |  |.4.1.1 U+002F|
00003ae0  20 3d 20 63 30 20 61 66  20 20 20 20 20 20 20 20  | = c0 af        |
00003af0  20 20 20 20 20 3d 20 22  c0 af 22 20 20 20 20 20  |     = ".."     |
00003b00  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003b20  20 20 20 7c 0a 34 2e 31  2e 32 20 55 2b 30 30 32  |   |.4.1.2 U+002|
00003b30  46 20 3d 20 65 30 20 38  30 20 61 66 20 20 20 20  |F = e0 80 af    |
00003b40  20 20 20 20 20 20 3d 20  22 e0 80 af 22 20 20 20  |      = "..."   |
00003b50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003b70  20 20 20 20 20 7c 0a 34  2e 31 2e 33 20 55 2b 30  |     |.4.1.3 U+0|
00003b80  30 32 46 20 3d 20 66 30  20 38 30 20 38 30 20 61  |02F = f0 80 80 a|
00003b90  66 20 20 20 20 20 20 20  3d 20 22 f0 80 80 af 22  |f       = "...."|
00003ba0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003bc0  20 20 20 20 20 20 20 20  7c 0a 34 2e 31 2e 34 20  |        |.4.1.4 |
00003bd0  55 2b 30 30 32 46 20 3d  20 66 38 20 38 30 20 38  |U+002F = f8 80 8|
00003be0  30 20 38 30 20 61 66 20  20 20 20 3d 20 22 f8 80  |0 80 af    = "..|
00003bf0  80 80 af 22 20 20 20 20  20 20 20 20 20 20 20 20  |..."            |
00003c00  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00003c10  20 20 20 20 20 20 20 20  20 20 20 20 7c 0a 34 2e  |            |.4.|
00003c20  31 2e 35 20 55 2b 30 30  32 46 20 3d 20 66 63 20  |1.5 U+002F = fc |
00003c30  38 30 20 38 30 20 38 30  20 38 30 20 61 66 20 3d  |80 80 80 80 af =|
00003c40  20 22 fc 80 80 80 80 af  22 20 20 20 20 20 20 20  | "......"       |
00003c50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003c70  20 7c 0a 20 20 20 20 20  20 20 20 20 20 20 20 20  | |.             |
00003c80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003cc0  20 7c 0a 34 2e 32 20 20  4d 61 78 69 6d 75 6d 20  | |.4.2  Maximum |
00003cd0  6f 76 65 72 6c 6f 6e 67  20 73 65 71 75 65 6e 63  |overlong sequenc|
00003ce0  65 73 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |es              |
00003cf0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003d10  20 7c 0a 20 20 20 20 20  20 20 20 20 20 20 20 20  | |.             |
00003d20  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003d60  20 7c 0a 42 65 6c 6f 77  20 79 6f 75 20 73 65 65  | |.Below you see|
00003d70  20 74 68 65 20 68 69 67  68 65 73 74 20 55 6e 69  | the highest Uni|
00003d80  63 6f 64 65 20 76 61 6c  75 65 20 74 68 61 74 20  |code value that |
00003d90  69 73 20 73 74 69 6c 6c  20 72 65 73 75 6c 74 69  |is still resulti|
00003da0  6e 67 20 69 6e 20 61 6e  20 20 20 20 20 20 20 20  |ng in an        |
00003db0  20 7c 0a 6f 76 65 72 6c  6f 6e 67 20 73 65 71 75  | |.overlong sequ|
00003dc0  65 6e 63 65 20 69 66 20  72 65 70 72 65 73 65 6e  |ence if represen|
00003dd0  74 65 64 20 77 69 74 68  20 74 68 65 20 67 69 76  |ted with the giv|
00003de0  65 6e 20 6e 75 6d 62 65  72 20 6f 66 20 62 79 74  |en number of byt|
00003df0  65 73 2e 20 54 68 69 73  20 20 20 20 20 20 20 20  |es. This        |
00003e00  20 7c 0a 69 73 20 61 20  62 6f 75 6e 64 61 72 79  | |.is a boundary|
00003e10  20 74 65 73 74 20 66 6f  72 20 73 61 66 65 20 55  | test for safe U|
00003e20  54 46 2d 38 20 64 65 63  6f 64 65 72 73 2e 20 41  |TF-8 decoders. A|
00003e30  6c 6c 20 66 69 76 65 20  63 68 61 72 61 63 74 65  |ll five characte|
00003e40  72 73 20 73 68 6f 75 6c  64 20 20 20 20 20 20 20  |rs should       |
00003e50  20 7c 0a 62 65 20 72 65  6a 65 63 74 65 64 20 6c  | |.be rejected l|
00003e60  69 6b 65 20 6d 61 6c 66  6f 72 6d 65 64 20 55 54  |ike malformed UT|
00003e70  46 2d 38 20 73 65 71 75  65 6e 63 65 73 2e 20 20  |F-8 sequences.  |
00003e80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003ea0  20 7c 0a 20 20 20 20 20  20 20 20 20 20 20 20 20  | |.             |
00003eb0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003ef0  20 7c 0a 34 2e 32 2e 31  20 20 55 2d 30 30 30 30  | |.4.2.1  U-0000|
00003f00  30 30 37 46 20 3d 20 63  31 20 62 66 20 20 20 20  |007F = c1 bf    |
00003f10  20 20 20 20 20 20 20 20  20 3d 20 22 c1 bf 22 20  |         = ".." |
00003f20  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00003f40  20 20 7c 0a 34 2e 32 2e  32 20 20 55 2d 30 30 30  |  |.4.2.2  U-000|
00003f50  30 30 37 46 46 20 3d 20  65 30 20 39 66 20 62 66  |007FF = e0 9f bf|
00003f60  20 20 20 20 20 20 20 20  20 20 3d 20 22 e0 9f bf  |          = "...|
00003f70  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00003f80  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00003f90  20 20 20 20 7c 0a 34 2e  32 2e 33 20 20 55 2d 30  |    |.4.2.3  U-0|
00003fa0  30 30 30 46 46 46 46 20  3d 20 66 30 20 38 66 20  |000FFFF = f0 8f |
00003fb0  62 66 20 62 66 20 20 20  20 20 20 20 3d 20 22 f0  |bf bf       = ".|
00003fc0  8f bf bf 22 20 20 20 20  20 20 20 20 20 20 20 20  |..."            |
00003fd0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00003fe0  20 20 20 20 20 20 20 7c  0a 34 2e 32 2e 34 20 20  |       |.4.2.4  |
00003ff0  55 2d 30 30 31 46 46 46  46 46 20 3d 20 66 38 20  |U-001FFFFF = f8 |
00004000  38 37 20 62 66 20 62 66  20 62 66 20 20 20 20 3d  |87 bf bf bf    =|
00004010  20 22 f8 87 bf bf bf 22  20 20 20 20 20 20 20 20  | "....."        |
00004020  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004030  20 20 20 20 20 20 20 20  20 20 20 7c 0a 34 2e 32  |           |.4.2|
00004040  2e 35 20 20 55 2d 30 33  46 46 46 46 46 46 20 3d  |.5  U-03FFFFFF =|
00004050  20 66 63 20 38 33 20 62  66 20 62 66 20 62 66 20  | fc 83 bf bf bf |
00004060  62 66 20 3d 20 22 fc 83  bf bf bf bf 22 20 20 20  |bf = "......"   |
00004070  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004090  7c 0a 20 20 20 20 20 20  20 20 20 20 20 20 20 20  ||.              |
000040a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000040e0  7c 0a 34 2e 33 20 20 4f  76 65 72 6c 6f 6e 67 20  ||.4.3  Overlong |
000040f0  72 65 70 72 65 73 65 6e  74 61 74 69 6f 6e 20 6f  |representation o|
00004100  66 20 74 68 65 20 4e 55  4c 20 63 68 61 72 61 63  |f the NUL charac|
00004110  74 65 72 20 20 20 20 20  20 20 20 20 20 20 20 20  |ter             |
00004120  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004130  7c 0a 20 20 20 20 20 20  20 20 20 20 20 20 20 20  ||.              |
00004140  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004180  7c 0a 54 68 65 20 66 6f  6c 6c 6f 77 69 6e 67 20  ||.The following |
00004190  66 69 76 65 20 73 65 71  75 65 6e 63 65 73 20 73  |five sequences s|
000041a0  68 6f 75 6c 64 20 61 6c  73 6f 20 62 65 20 72 65  |hould also be re|
000041b0  6a 65 63 74 65 64 20 6c  69 6b 65 20 6d 61 6c 66  |jected like malf|
000041c0  6f 72 6d 65 64 20 20 20  20 20 20 20 20 20 20 20  |ormed           |
000041d0  7c 0a 55 54 46 2d 38 20  73 65 71 75 65 6e 63 65  ||.UTF-8 sequence|
000041e0  73 20 61 6e 64 20 73 68  6f 75 6c 64 20 6e 6f 74  |s and should not|
000041f0  20 62 65 20 74 72 65 61  74 65 64 20 6c 69 6b 65  | be treated like|
00004200  20 74 68 65 20 41 53 43  49 49 20 4e 55 4c 20 20  | the ASCII NUL  |
00004210  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004220  7c 0a 63 68 61 72 61 63  74 65 72 2e 20 20 20 20  ||.character.    |
00004230  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004270  7c 0a 20 20 20 20 20 20  20 20 20 20 20 20 20 20  ||.              |
00004280  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000042c0  7c 0a 34 2e 33 2e 31 20  20 55 2b 30 30 30 30 20  ||.4.3.1  U+0000 |
000042d0  3d 20 63 30 20 38 30 20  20 20 20 20 20 20 20 20  |= c0 80         |
000042e0  20 20 20 20 3d 20 22 c0  80 22 20 20 20 20 20 20  |    = ".."      |
000042f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004310  20 7c 0a 34 2e 33 2e 32  20 20 55 2b 30 30 30 30  | |.4.3.2  U+0000|
00004320  20 3d 20 65 30 20 38 30  20 38 30 20 20 20 20 20  | = e0 80 80     |
00004330  20 20 20 20 20 3d 20 22  e0 80 80 22 20 20 20 20  |     = "..."    |
00004340  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004360  20 20 20 7c 0a 34 2e 33  2e 33 20 20 55 2b 30 30  |   |.4.3.3  U+00|
00004370  30 30 20 3d 20 66 30 20  38 30 20 38 30 20 38 30  |00 = f0 80 80 80|
00004380  20 20 20 20 20 20 20 3d  20 22 f0 80 80 80 22 20  |       = "...." |
00004390  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000043b0  20 20 20 20 20 20 7c 0a  34 2e 33 2e 34 20 20 55  |      |.4.3.4  U|
000043c0  2b 30 30 30 30 20 3d 20  66 38 20 38 30 20 38 30  |+0000 = f8 80 80|
000043d0  20 38 30 20 38 30 20 20  20 20 3d 20 22 f8 80 80  | 80 80    = "...|
000043e0  80 80 22 20 20 20 20 20  20 20 20 20 20 20 20 20  |.."             |
000043f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004400  20 20 20 20 20 20 20 20  20 20 7c 0a 34 2e 33 2e  |          |.4.3.|
00004410  35 20 20 55 2b 30 30 30  30 20 3d 20 66 63 20 38  |5  U+0000 = fc 8|
00004420  30 20 38 30 20 38 30 20  38 30 20 38 30 20 3d 20  |0 80 80 80 80 = |
00004430  22 fc 80 80 80 80 80 22  20 20 20 20 20 20 20 20  |"......"        |
00004440  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004450  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00004460  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
00004470  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000044a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
000044b0  0a 35 20 20 49 6c 6c 65  67 61 6c 20 63 6f 64 65  |.5  Illegal code|
000044c0  20 70 6f 73 69 74 69 6f  6e 73 20 20 20 20 20 20  | positions      |
000044d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000044f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00004500  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
00004510  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004540  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00004550  0a 54 68 65 20 66 6f 6c  6c 6f 77 69 6e 67 20 55  |.The following U|
00004560  54 46 2d 38 20 73 65 71  75 65 6e 63 65 73 20 73  |TF-8 sequences s|
00004570  68 6f 75 6c 64 20 62 65  20 72 65 6a 65 63 74 65  |hould be rejecte|
00004580  64 20 6c 69 6b 65 20 6d  61 6c 66 6f 72 6d 65 64  |d like malformed|
00004590  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
000045a0  0a 73 65 71 75 65 6e 63  65 73 2c 20 62 65 63 61  |.sequences, beca|
000045b0  75 73 65 20 74 68 65 79  20 6e 65 76 65 72 20 72  |use they never r|
000045c0  65 70 72 65 73 65 6e 74  20 76 61 6c 69 64 20 49  |epresent valid I|
000045d0  53 4f 20 31 30 36 34 36  20 63 68 61 72 61 63 74  |SO 10646 charact|
000045e0  65 72 73 20 61 6e 64 20  20 20 20 20 20 20 20 7c  |ers and        ||
000045f0  0a 61 20 55 54 46 2d 38  20 64 65 63 6f 64 65 72  |.a UTF-8 decoder|
00004600  20 74 68 61 74 20 61 63  63 65 70 74 73 20 74 68  | that accepts th|
00004610  65 6d 20 6d 69 67 68 74  20 69 6e 74 72 6f 64 75  |em might introdu|
00004620  63 65 20 73 65 63 75 72  69 74 79 20 70 72 6f 62  |ce security prob|
00004630  6c 65 6d 73 20 20 20 20  20 20 20 20 20 20 20 7c  |lems           ||
00004640  0a 63 6f 6d 70 61 72 61  62 6c 65 20 74 6f 20 6f  |.comparable to o|
00004650  76 65 72 6c 6f 6e 67 20  55 54 46 2d 38 20 73 65  |verlong UTF-8 se|
00004660  71 75 65 6e 63 65 73 2e  20 20 20 20 20 20 20 20  |quences.        |
00004670  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004680  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00004690  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
000046a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000046d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
000046e0  0a 35 2e 31 20 53 69 6e  67 6c 65 20 55 54 46 2d  |.5.1 Single UTF-|
000046f0  31 36 20 73 75 72 72 6f  67 61 74 65 73 20 20 20  |16 surrogates   |
00004700  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004720  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00004730  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
00004740  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004770  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00004780  0a 35 2e 31 2e 31 20 20  55 2b 44 38 30 30 20 3d  |.5.1.1  U+D800 =|
00004790  20 65 64 20 61 30 20 38  30 20 3d 20 22 ed a0 80  | ed a0 80 = "...|
000047a0  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
000047b0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000047d0  20 7c 0a 35 2e 31 2e 32  20 20 55 2b 44 42 37 46  | |.5.1.2  U+DB7F|
000047e0  20 3d 20 65 64 20 61 64  20 62 66 20 3d 20 22 ed  | = ed ad bf = ".|
000047f0  ad bf 22 20 20 20 20 20  20 20 20 20 20 20 20 20  |.."             |
00004800  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004820  20 20 20 7c 0a 35 2e 31  2e 33 20 20 55 2b 44 42  |   |.5.1.3  U+DB|
00004830  38 30 20 3d 20 65 64 20  61 65 20 38 30 20 3d 20  |80 = ed ae 80 = |
00004840  22 ed ae 80 22 20 20 20  20 20 20 20 20 20 20 20  |"..."           |
00004850  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004870  20 20 20 20 20 7c 0a 35  2e 31 2e 34 20 20 55 2b  |     |.5.1.4  U+|
00004880  44 42 46 46 20 3d 20 65  64 20 61 66 20 62 66 20  |DBFF = ed af bf |
00004890  3d 20 22 ed af bf 22 20  20 20 20 20 20 20 20 20  |= "..."         |
000048a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000048c0  20 20 20 20 20 20 20 7c  0a 35 2e 31 2e 35 20 20  |       |.5.1.5  |
000048d0  55 2b 44 43 30 30 20 3d  20 65 64 20 62 30 20 38  |U+DC00 = ed b0 8|
000048e0  30 20 3d 20 22 ed b0 80  22 20 20 20 20 20 20 20  |0 = "..."       |
000048f0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004910  20 20 20 20 20 20 20 20  20 7c 0a 35 2e 31 2e 36  |         |.5.1.6|
00004920  20 20 55 2b 44 46 38 30  20 3d 20 65 64 20 62 65  |  U+DF80 = ed be|
00004930  20 38 30 20 3d 20 22 ed  be 80 22 20 20 20 20 20  | 80 = "..."     |
00004940  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004960  20 20 20 20 20 20 20 20  20 20 20 7c 0a 35 2e 31  |           |.5.1|
00004970  2e 37 20 20 55 2b 44 46  46 46 20 3d 20 65 64 20  |.7  U+DFFF = ed |
00004980  62 66 20 62 66 20 3d 20  22 ed bf bf 22 20 20 20  |bf bf = "..."   |
00004990  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000049b0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
000049c0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004a00  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 35  |             |.5|
00004a10  2e 32 20 50 61 69 72 65  64 20 55 54 46 2d 31 36  |.2 Paired UTF-16|
00004a20  20 73 75 72 72 6f 67 61  74 65 73 20 20 20 20 20  | surrogates     |
00004a30  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004a50  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00004a60  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004aa0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 35  |             |.5|
00004ab0  2e 32 2e 31 20 20 55 2b  44 38 30 30 20 55 2b 44  |.2.1  U+D800 U+D|
00004ac0  43 30 30 20 3d 20 65 64  20 61 30 20 38 30 20 65  |C00 = ed a0 80 e|
00004ad0  64 20 62 30 20 38 30 20  3d 20 22 ed a0 80 ed b0  |d b0 80 = ".....|
00004ae0  80 22 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |."              |
00004af0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004b00  20 7c 0a 35 2e 32 2e 32  20 20 55 2b 44 38 30 30  | |.5.2.2  U+D800|
00004b10  20 55 2b 44 46 46 46 20  3d 20 65 64 20 61 30 20  | U+DFFF = ed a0 |
00004b20  38 30 20 65 64 20 62 66  20 62 66 20 3d 20 22 ed  |80 ed bf bf = ".|
00004b30  a0 80 ed bf bf 22 20 20  20 20 20 20 20 20 20 20  |....."          |
00004b40  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004b50  20 20 20 20 20 7c 0a 35  2e 32 2e 33 20 20 55 2b  |     |.5.2.3  U+|
00004b60  44 42 37 46 20 55 2b 44  43 30 30 20 3d 20 65 64  |DB7F U+DC00 = ed|
00004b70  20 61 64 20 62 66 20 65  64 20 62 30 20 38 30 20  | ad bf ed b0 80 |
00004b80  3d 20 22 ed ad bf ed b0  80 22 20 20 20 20 20 20  |= "......"      |
00004b90  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004ba0  20 20 20 20 20 20 20 20  20 7c 0a 35 2e 32 2e 34  |         |.5.2.4|
00004bb0  20 20 55 2b 44 42 37 46  20 55 2b 44 46 46 46 20  |  U+DB7F U+DFFF |
00004bc0  3d 20 65 64 20 61 64 20  62 66 20 65 64 20 62 66  |= ed ad bf ed bf|
00004bd0  20 62 66 20 3d 20 22 ed  ad bf ed bf bf 22 20 20  | bf = "......"  |
00004be0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004bf0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 35  |             |.5|
00004c00  2e 32 2e 35 20 20 55 2b  44 42 38 30 20 55 2b 44  |.2.5  U+DB80 U+D|
00004c10  43 30 30 20 3d 20 65 64  20 61 65 20 38 30 20 65  |C00 = ed ae 80 e|
00004c20  64 20 62 30 20 38 30 20  3d 20 22 ed ae 80 ed b0  |d b0 80 = ".....|
00004c30  80 22 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |."              |
00004c40  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004c50  20 7c 0a 35 2e 32 2e 36  20 20 55 2b 44 42 38 30  | |.5.2.6  U+DB80|
00004c60  20 55 2b 44 46 46 46 20  3d 20 65 64 20 61 65 20  | U+DFFF = ed ae |
00004c70  38 30 20 65 64 20 62 66  20 62 66 20 3d 20 22 ed  |80 ed bf bf = ".|
00004c80  ae 80 ed bf bf 22 20 20  20 20 20 20 20 20 20 20  |....."          |
00004c90  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004ca0  20 20 20 20 20 7c 0a 35  2e 32 2e 37 20 20 55 2b  |     |.5.2.7  U+|
00004cb0  44 42 46 46 20 55 2b 44  43 30 30 20 3d 20 65 64  |DBFF U+DC00 = ed|
00004cc0  20 61 66 20 62 66 20 65  64 20 62 30 20 38 30 20  | af bf ed b0 80 |
00004cd0  3d 20 22 ed af bf ed b0  80 22 20 20 20 20 20 20  |= "......"      |
00004ce0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004cf0  20 20 20 20 20 20 20 20  20 7c 0a 35 2e 32 2e 38  |         |.5.2.8|
00004d00  20 20 55 2b 44 42 46 46  20 55 2b 44 46 46 46 20  |  U+DBFF U+DFFF |
00004d10  3d 20 65 64 20 61 66 20  62 66 20 65 64 20 62 66  |= ed af bf ed bf|
00004d20  20 62 66 20 3d 20 22 ed  af bf ed bf bf 22 20 20  | bf = "......"  |
00004d30  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00004d40  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00004d50  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004d90  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 35  |             |.5|
00004da0  2e 33 20 4e 6f 6e 63 68  61 72 61 63 74 65 72 20  |.3 Noncharacter |
00004db0  63 6f 64 65 20 70 6f 73  69 74 69 6f 6e 73 20 20  |code positions  |
00004dc0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004de0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00004df0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00004e30  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 54  |             |.T|
00004e40  68 65 20 66 6f 6c 6c 6f  77 69 6e 67 20 22 6e 6f  |he following "no|
00004e50  6e 63 68 61 72 61 63 74  65 72 73 22 20 61 72 65  |ncharacters" are|
00004e60  20 22 72 65 73 65 72 76  65 64 20 66 6f 72 20 69  | "reserved for i|
00004e70  6e 74 65 72 6e 61 6c 20  75 73 65 22 20 62 79 20  |nternal use" by |
00004e80  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 61  |             |.a|
00004e90  70 70 6c 69 63 61 74 69  6f 6e 73 2c 20 61 6e 64  |pplications, and|
00004ea0  20 61 63 63 6f 72 64 69  6e 67 20 74 6f 20 6f 6c  | according to ol|
00004eb0  64 65 72 20 76 65 72 73  69 6f 6e 73 20 6f 66 20  |der versions of |
00004ec0  74 68 65 20 55 6e 69 63  6f 64 65 20 53 74 61 6e  |the Unicode Stan|
00004ed0  64 61 72 64 20 20 20 20  20 20 20 20 20 7c 0a 22  |dard         |."|
00004ee0  73 68 6f 75 6c 64 20 6e  65 76 65 72 20 62 65 20  |should never be |
00004ef0  69 6e 74 65 72 63 68 61  6e 67 65 64 22 2e 20 55  |interchanged". U|
00004f00  6e 69 63 6f 64 65 20 43  6f 72 72 69 67 65 6e 64  |nicode Corrigend|
00004f10  75 6d 20 23 39 20 64 72  6f 70 70 65 64 20 74 68  |um #9 dropped th|
00004f20  65 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 6c  |e            |.l|
00004f30  61 74 74 65 72 20 72 65  73 74 72 69 63 74 69 6f  |atter restrictio|
00004f40  6e 2e 20 4e 65 76 65 72  74 68 65 6c 65 73 73 2c  |n. Nevertheless,|
00004f50  20 74 68 65 69 72 20 70  72 65 73 65 6e 63 65 20  | their presence |
00004f60  69 6e 20 69 6e 63 6f 6d  69 6e 67 20 55 54 46 2d  |in incoming UTF-|
00004f70  38 20 64 61 74 61 20 20  20 20 20 20 20 7c 0a 63  |8 data       |.c|
00004f80  61 6e 20 72 65 6d 61 69  6e 20 61 20 70 6f 74 65  |an remain a pote|
00004f90  6e 74 69 61 6c 20 73 65  63 75 72 69 74 79 20 72  |ntial security r|
00004fa0  69 73 6b 2c 20 64 65 70  65 6e 64 69 6e 67 20 6f  |isk, depending o|
00004fb0  6e 20 77 68 61 74 20 75  73 65 20 69 73 20 6d 61  |n what use is ma|
00004fc0  64 65 20 6f 66 20 20 20  20 20 20 20 20 7c 0a 74  |de of        |.t|
00004fd0  68 65 73 65 20 63 6f 64  65 73 20 73 75 62 73 65  |hese codes subse|
00004fe0  71 75 65 6e 74 6c 79 2e  20 45 78 61 6d 70 6c 65  |quently. Example|
00004ff0  73 20 6f 66 20 73 75 63  68 20 69 6e 74 65 72 6e  |s of such intern|
00005000  61 6c 20 75 73 65 3a 20  20 20 20 20 20 20 20 20  |al use:         |
00005010  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00005020  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005060  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00005070  2d 20 53 6f 6d 65 20 66  69 6c 65 20 41 50 49 73  |- Some file APIs|
00005080  20 77 69 74 68 20 31 36  2d 62 69 74 20 63 68 61  | with 16-bit cha|
00005090  72 61 63 74 65 72 73 20  6d 61 79 20 75 73 65 20  |racters may use |
000050a0  74 68 65 20 69 6e 74 65  67 65 72 20 76 61 6c 75  |the integer valu|
000050b0  65 20 2d 31 20 20 20 20  20 20 20 20 20 7c 0a 20  |e -1         |. |
000050c0  20 20 3d 20 55 2b 46 46  46 46 20 74 6f 20 73 69  |  = U+FFFF to si|
000050d0  67 6e 61 6c 20 61 6e 20  65 6e 64 2d 6f 66 2d 66  |gnal an end-of-f|
000050e0  69 6c 65 20 28 45 4f 46  29 20 6f 72 20 65 72 72  |ile (EOF) or err|
000050f0  6f 72 20 63 6f 6e 64 69  74 69 6f 6e 2e 20 20 20  |or condition.   |
00005100  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00005110  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005150  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00005160  2d 20 49 6e 20 73 6f 6d  65 20 55 54 46 2d 31 36  |- In some UTF-16|
00005170  20 72 65 63 65 69 76 65  72 73 2c 20 63 6f 64 65  | receivers, code|
00005180  20 70 6f 69 6e 74 20 55  2b 46 46 46 45 20 6d 69  | point U+FFFE mi|
00005190  67 68 74 20 74 72 69 67  67 65 72 20 61 20 20 20  |ght trigger a   |
000051a0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
000051b0  20 20 62 79 74 65 2d 73  77 61 70 20 6f 70 65 72  |  byte-swap oper|
000051c0  61 74 69 6f 6e 20 28 74  6f 20 63 6f 6e 76 65 72  |ation (to conver|
000051d0  74 20 62 65 74 77 65 65  6e 20 55 54 46 2d 31 36  |t between UTF-16|
000051e0  4c 45 20 61 6e 64 20 55  54 46 2d 31 36 42 45 29  |LE and UTF-16BE)|
000051f0  2e 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |.            |. |
00005200  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005240  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 57  |             |.W|
00005250  69 74 68 20 73 75 63 68  20 69 6e 74 65 72 6e 61  |ith such interna|
00005260  6c 20 75 73 65 20 6f 66  20 6e 6f 6e 63 68 61 72  |l use of nonchar|
00005270  61 63 74 65 72 73 2c 20  69 74 20 6d 61 79 20 62  |acters, it may b|
00005280  65 20 64 65 73 69 72 61  62 6c 65 20 61 6e 64 20  |e desirable and |
00005290  73 61 66 65 72 20 20 20  20 20 20 20 20 7c 0a 74  |safer        |.t|
000052a0  6f 20 62 6c 6f 63 6b 20  74 68 6f 73 65 20 63 6f  |o block those co|
000052b0  64 65 20 70 6f 69 6e 74  73 20 69 6e 20 55 54 46  |de points in UTF|
000052c0  2d 38 20 64 65 63 6f 64  65 72 73 2c 20 61 73 20  |-8 decoders, as |
000052d0  74 68 65 79 20 73 68 6f  75 6c 64 20 6e 65 76 65  |they should neve|
000052e0  72 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 6f  |r            |.o|
000052f0  63 63 75 72 20 6c 65 67  69 74 69 6d 61 74 65 6c  |ccur legitimatel|
00005300  79 20 69 6e 20 69 6e 63  6f 6d 69 6e 67 20 55 54  |y in incoming UT|
00005310  46 2d 38 20 64 61 74 61  2c 20 61 6e 64 20 63 6f  |F-8 data, and co|
00005320  75 6c 64 20 74 72 69 67  67 65 72 20 75 6e 73 61  |uld trigger unsa|
00005330  66 65 20 20 20 20 20 20  20 20 20 20 20 7c 0a 62  |fe           |.b|
00005340  65 68 61 76 69 6f 75 72  20 69 6e 20 73 75 62 73  |ehaviour in subs|
00005350  65 71 75 65 6e 74 20 70  72 6f 63 65 73 73 69 6e  |equent processin|
00005360  67 2e 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |g.              |
00005370  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00005380  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00005390  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000053d0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 50  |             |.P|
000053e0  61 72 74 69 63 75 6c 61  72 6c 79 20 70 72 6f 62  |articularly prob|
000053f0  6c 65 6d 61 74 69 63 20  6e 6f 6e 63 68 61 72 61  |lematic nonchara|
00005400  63 74 65 72 73 20 69 6e  20 31 36 2d 62 69 74 20  |cters in 16-bit |
00005410  61 70 70 6c 69 63 61 74  69 6f 6e 73 3a 20 20 20  |applications:   |
00005420  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
00005430  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005470  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 35  |             |.5|
00005480  2e 33 2e 31 20 20 55 2b  46 46 46 45 20 3d 20 65  |.3.1  U+FFFE = e|
00005490  66 20 62 66 20 62 65 20  3d 20 22 ef bf be 22 20  |f bf be = "..." |
000054a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000054c0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
000054d0  0a 35 2e 33 2e 32 20 20  55 2b 46 46 46 46 20 3d  |.5.3.2  U+FFFF =|
000054e0  20 65 66 20 62 66 20 62  66 20 3d 20 22 ef bf bf  | ef bf bf = "...|
000054f0  22 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |"               |
00005500  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005520  20 7c 0a 20 20 20 20 20  20 20 20 20 20 20 20 20  | |.             |
00005530  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005570  20 7c 0a 4f 74 68 65 72  20 6e 6f 6e 63 68 61 72  | |.Other nonchar|
00005580  61 63 74 65 72 73 3a 20  20 20 20 20 20 20 20 20  |acters:         |
00005590  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000055c0  20 7c 0a 20 20 20 20 20  20 20 20 20 20 20 20 20  | |.             |
000055d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005610  20 7c 0a 35 2e 33 2e 33  20 20 55 2b 46 44 44 30  | |.5.3.3  U+FDD0|
00005620  20 2e 2e 20 55 2b 46 44  45 46 20 3d 20 22 ef b7  | .. U+FDEF = "..|
00005630  90 ef b7 91 ef b7 92 ef  b7 93 ef b7 94 ef b7 95  |................|
00005640  ef b7 96 ef b7 97 ef b7  98 ef b7 99 ef b7 9a ef  |................|
00005650  b7 9b ef b7 9c ef b7 9d  ef b7 9e ef b7 9f ef b7  |................|
00005660  a0 ef b7 a1 ef b7 a2 ef  b7 a3 ef b7 a4 ef b7 a5  |................|
00005670  ef b7 a6 ef b7 a7 ef b7  a8 ef b7 a9 ef b7 aa ef  |................|
00005680  b7 ab ef b7 ac ef b7 ad  ef b7 ae ef b7 af 22 7c  |.............."||
00005690  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
000056a0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000056d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
000056e0  0a 35 2e 33 2e 34 20 20  55 2b 6e 46 46 46 45 20  |.5.3.4  U+nFFFE |
000056f0  55 2b 6e 46 46 46 46 20  28 66 6f 72 20 6e 20 3d  |U+nFFFF (for n =|
00005700  20 31 2e 2e 31 30 29 20  20 20 20 20 20 20 20 20  | 1..10)         |
00005710  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00005720  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00005730  0a 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |.               |
00005740  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
00005770  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 7c  |               ||
00005780  0a 20 20 20 20 20 20 20  22 f0 9f bf be f0 9f bf  |.       ".......|
00005790  bf f0 af bf be f0 af bf  bf f0 bf bf be f0 bf bf  |................|
000057a0  bf f1 8f bf be f1 8f bf  bf f1 9f bf be f1 9f bf  |................|
000057b0  bf f1 af bf be f1 af bf  bf f1 bf bf be f1 bf bf  |................|
000057c0  bf f2 8f bf be f2 8f bf  bf 20 20 20 20 20 20 20  |.........       |
000057d0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
000057e0  20 20 20 20 20 20 20 20  20 20 20 20 20 7c 0a 20  |             |. |
000057f0  20 20 20 20 20 20 20 f2  9f bf be f2 9f bf bf f2  |       .........|
00005800  af bf be f2 af bf bf f2  bf bf be f2 bf bf bf f3  |................|
00005810  8f bf be f3 8f bf bf f3  9f bf be f3 9f bf bf f3  |................|
00005820  af bf be f3 af bf bf f3  bf bf be f3 bf bf bf f4  |................|
00005830  8f bf be f4 8f bf bf 22  20 20 20 20 20 20 20 20  |......."        |
00005840  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
00005850  20 20 20 20 20 20 20 20  20 20 20 7c 0a 20 20 20  |           |.   |
00005860  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000058a0  20 20 20 20 20 20 20 20  20 20 20 7c 0a 54 48 45  |           |.THE|
000058b0  20 45 4e 44 20 20 20 20  20 20 20 20 20 20 20 20  | END            |
000058c0  20 20 20 20 20 20 20 20  20 20 20 20 20 20 20 20  |                |
*
000058f0  20 20 20 20 20 20 20 20  20 20 20 7c 0a           |           |.|
000058fd
