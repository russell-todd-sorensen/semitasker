<!DOCTYPE HTML>
<html lang="en_US">
<head>
<meta charset="utf-8">
<title>Sliders</title>
<link rel="stylesheet" type="text/css" href="../../css/log.css" media="all">
<link rel="stylesheet" type="text/css" href="../../js/jQuery.UI.Combined.1.8.20.1/Content/Content/themes/base/jquery.ui.all.css" >
<style>
.slide {
    display: inline-block;
    padding: 1px;
    background-color: #bbb;
    border: 1px solid black;
    font-weight: bold;
    margin: 1px;
}

#my-form {
    margin: 0;
    padding: 0;
    border: 0;
}
#my-form .slide label {
    text-align: center;
    display: block;
    margin: auto;
}

#slider1, #slider2, #slider3 {
    margin: auto;
    margin-top: 1em;
    margin-bottom: .5em;
}

</style>
<!-- use this stylesheet to explore the CSS Box Model and HTML Page Structure 
<link rel="stylesheet" type="text/css" href="http://ic00408/css/box-model.css" media="all">-->
<script type="text/ecmascript" src="../../js/jquery-1.7.1.js"></script>
<script language="javascript" src="../../js/jQuery.UI.Combined.1.8.20.1/Content/Scripts/jquery-ui-1.8.20.js" type="text/javascript"></script>
<script type="text/javascript" src="../../js/d3.v3.js"></script>
<script type="text/javascript" src="../../js/log-2.js"></script>
<script type="text/javascript" src="../images/displace-exp.js"></script>
<script>

function noticeChange (evt) {
	Log.Notice("something changed");
}
function handleFormChange(evt) {
		
		var tmpOptions = evt.data;
		var id = tmpOptions["id"];
		var y = $(id);
		var data = y.data();
		var options = data.slider.options;
		var formInput = $(options.formField);
		var currentValue = formInput.val();
		
    if (options.fieldType == 'float') {
			val = parseFloat(currentValue);
		} else {
			val = parseInt(currentValue);
		}
		options.value = val;
		Log.Notice("keyup value=" + val );
}

function handleSliderMove(evt) {

		var y = $(this);
		var val = null;
		var data = y.data();
		var options = data.slider.options;
		var formInput = $(options.formField);
		var currentValue = formInput.val();
		var value = options.value;
    if (currentValue == value) return;
		
    if (options.fieldType == 'float') {
			val = parseFloat(value);
		} else {
			val = parseInt(value);
		}
		
		formInput.val(val);
		Log.Notice("keyup value=" + val );
}

var sliders = [
	{id: '#slider1', formField: '#s1', max: 1.000, min: 0.000, step: 0.005, fieldType: 'float'},
	{id: '#slider2', formField: '#s2', max: 1.000, min: 0.000, step: 0.005, fieldType: 'float'},
	{id: '#slider3', formField: '#s3', max: 1000, min: 0, step: 5, fieldType: 'int'}
	];
	
function initSliders (sliderArray) {
	
	var defaultData = {
		animate: false,
		distance: 0,
		max: 100,
		min: 0,
		orientation: "vertical",
		range: false,
		step: 1,
		value: 0,
		values: null,
		formField: '',
		fieldType: 'int'
	}
	for (var i = 0; i<sliderArray.length; i++) {
		var sliderData = sliderArray[i];
		var data = new Object();
		for (var field in defaultData) {
			data[field] = defaultData[field];
		}
		for (var field in sliderData) {
			data[field] = sliderData[field];
		}
		$(data["id"])
			.slider(data)
			.bind('mouseup mousemove keyup', null, handleSliderMove);
		//$(data['formField']).change(data, handleFormChange);
	}
}
$(document).ready(function () {
	
  Log.Hide();
	//restoreSelect('scalePage');
	//restoreSelect('imageChoice');
	//restoreSelect('rectChoice');

	initSliders(sliders);
});

</script>
</head>

<body>

<div id="panel2">
 <form id="my-form" name="my-form" >
  <div class="slide">
  <label for="s1">Red:</label>
  <div id="slider1" ></div>
   <input type="text" name="s1" id="s1" value="" size="2">
  </div>
  <div class="slide">
  <label for="s2">Green:</label>
  <div id="slider2" ></div> 
  <input type="text" name="s2" id="s2" value="" size="2">
  </div>
  <div class="slide">
  <label for="s3">Blue:</label>
  <div id="slider3" ></div>
  <input type="text" name="s3" id="s3" value="" size="2">
  </div>
 </form>
</div>

</body>
</html>
