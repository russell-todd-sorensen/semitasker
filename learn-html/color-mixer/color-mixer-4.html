<!DOCTYPE html>
<html lang="en_US">
<head>
<meta charset="utf-8" >
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="http://ic00408/css/log.css" media="all">
<link rel="stylesheet" type="text/css" href="http://ic00408/js/jQuery.UI.Combined.1.8.20.1/Content/Content/themes/base/jquery.ui.all.css">
<link rel="stylesheet" href="http://ic00408/css/green-form.css" >

<style>

svg {
    background-color: #333;
}

.pointer {
    cursor: pointer;
}

#slider-box-1 {
    width: 180px;
    height: 20px;
    position: relative;
}

#slider-1 {
    display: inline-block;
    position: absolute;
    bottom: 0;
    left: 0;
}
   

</style>
<!--<link rel="stylesheet" href="http://ic00408/css/box-model.css" >-->


<script src="http://ic00408/js/jquery-1.7.1.js"></script>
<script src="http://ic00408/js/jQuery.UI.Combined.1.8.20.1/Content/Scripts/jquery-ui-1.8.20.js"></script>
<script src="http://ic00408/js/d3.v3.js"></script>
<script src="http://ic00408/js/log-2.js"></script>
<script src="http://ic00408/js/data.js"></script>
<script src="http://ic00408/js/form-save-restore.js"></script>
<script src="http://ic00408/js/binary-hex-conversions.js"></script>
<script src="http://ic00408/js/example-library.js"></script>
<script src="http://ic00408/js/svg-transform.js"></script>

<script>
// <![CDATA[ 

var xyStart = new Object();

function startMove (evt) {
		 
	 var mouseX = evt.pageX;
	 var mouseY = evt.pageY;
	 
	 xyStart["x"] = mouseX;
	 xyStart["y"] = mouseY;
	 var slider = evt.data.slider
	 xyStart[slider] = [parseFloat($(slider).css('left')),parseFloat($(slider).css('bottom'))];
	 $('body')
	 	.bind('mousemove',evt.data,moveSlider)
	 	.bind('mouseup',evt.data,endMoveSlider);
}

function moveSlider (evt) {
	 var mouseX = evt.pageX;
	 var mouseY = evt.pageY;
	
	 var dx = mouseX - xyStart["x"];
	 var dy = mouseY - xyStart["y"];
   var slider = evt.data.slider;
	 var skew = evt.data.skew;
	 var newX = xyStart[slider][0] + dx;
	 var newY = xyStart[slider][1] + dy;
	 
	 
	 if (newX > evt.data.maxX-skew) {
		 //Log.Notice('newX > maxX newX=' + newX + ' maxX=' + evt.data.maxX); 
		 newX = evt.data.maxX-skew;
	 }
	 else if (newX < evt.data.minX-skew) {
		 newX = evt.data.minX-skew;
	 }
	 
	 $(slider)
	 	.css('left', newX);
		
   evt.data.call(newX-skew);
}

function endMoveSlider (evt) {
	moveSlider(evt);
	$('body').unbind('mousemove').unbind('mouseup');
}

function registerSliderMove (value) {
	Log.Notice('value=' + value);
}

$(document).ready(function(e) {
	
	//$('#slider-2').bind('mousedown','#slider-2',startMove);
	$('#slider-1').bind('mousedown',{slider:'#slider-1',minX:0,maxX:180,skew:5,call:registerSliderMove},startMove);
	//$('#slider-3').bind('mousedown','#slider-3',startMove);
	//$('#slider-4').bind('mousedown','#slider-4',startMove);
});


// ]]>
</script>

</head>
<body>

<div id="slider-box-1" class="pointer">
<svg id="gradient-image-1">
<defs>
<linearGradient id="gradient-1" gradientUnits="objectBoundingBox" color-interpolation="sRGB" >
 <stop offset="0%" stop-color="#000" stop-opacity="1.0" />
 <stop offset="100%" stop-color="#F00" stop-opacity="1.0" />
</linearGradient>
</defs>
<rect id="r1" x="0" y="0" height="5" width="180" fill="url(#gradient-1)" stroke="none" />
</svg>
<div id="slider-1"><img src="triangle-slider-1.svg"></div>
</div>
</body>
</html>
