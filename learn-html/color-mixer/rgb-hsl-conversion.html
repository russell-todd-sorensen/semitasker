<!DOCTYPE html>
<html lang="en_US">
<head>
<meta charset="utf-8" >
<title>HSL RGB Conversion Checker</title>
<link rel="stylesheet" type="text/css" href="http://ic00408/css/log.css" media="all">
<link rel="stylesheet" type="text/css" href="http://ic00408/js/jQuery.UI.Combined.1.8.20.1/Content/Content/themes/base/jquery.ui.all.css">
<link rel="stylesheet" href="http://ic00408/css/green-form.css" >

<style>

svg {
    background-color: #FFF;
}

html, body {
    background-color: #000;
    padding: 0;
    margin: 0;
    border: 0;
    font-family: "Consolas Bold";
    font-family: "Agency FB Bold";
    font-family: "Tw Cen MT Bold";
}

.pointer {
    cursor: pointer;
}

#slider-box-1 {
    position: relative;
    display: none;
}

.text, .label, .label-2 {
    fill: #CCCCDD;
    font-size: 15px;
    font-weight: bold;
   /*  font-family: "Consolas Bold";*/
    letter-spacing: 3px;
    font-family: "Agency FB Bold";
}

.label:hover {
    fill: #E0C64A;
}

#no-show {
    display: block;
}

.control-line {
    stroke: #444;
    stroke-width: 1;
}

#form {
    font-family: inherit;
    color: white;
    position: absolute;
    left: 0;
    top: 0;
    display: none;
}

#form ul {
    list-style: none;
}

form, fieldset, label, select, option {
    font-family: inherit;
}

#calculations {
    background-color: white;
}
#calculations div {
    color: #808080;
}
#p1, #graph line {
    /*fill: #808080; 
    stroke: #808080;*/
    stroke-width: 1px;
}
#f1 {
    position: absolute;
    top: 5px;
    left: 5px;
}
</style>
<!--<link rel="stylesheet" href="http://ic00408/css/box-model.css" >-->


<script src="http://ic00408/js/jquery-1.7.1.js"></script>
<script src="http://ic00408/js/jQuery.UI.Combined.1.8.20.1/Content/Scripts/jquery-ui-1.8.20.js"></script>
<script src="http://ic00408/js/d3.v3.js"></script>
<script src="http://ic00408/js/log-2.js"></script>
<script src="http://ic00408/js/data.js"></script>
<script src="http://ic00408/js/form-save-restore.js"></script>
<script src="http://ic00408/js/binary-hex-conversions.js"></script>
<script src="http://ic00408/js/example-library.js"></script>
<script src="http://ic00408/js/svg-transform.js"></script>
<script src="js/color-mixer-15.js" ></script>
<script>
// <![CDATA[ 


function generateTest(id, x) {
	if (arguments.length < 2) {
		var x = 0;
	} else {
		x = parseInt(x);
	}

	var div = d3.select('#' + id);
	var color,rgb,hsl;
	for (var r=0;r<10; r++) {
		for (var g=0;g<10;g++) {
			for (var b=0;b<10;b++) {
				color = 'rgb(' + (r + x) + ',' + (g + x) + ',' + (b + x) + ')';
				rgb = d3.rgb(color);
				hsl = rgb.hsl();
				hslDisplay = 'hsl(' + hsl.h + ',' + hsl.s + ',' + hsl.l + ')';
				div
				 .append('div')
				 .text(color + ' ' + hslDisplay)
				 .style('background-color', color);
			}
		}
	}
}

function generateTest2(id,h,sd,ld) {
	if (arguments.length < 2) {
		var h = 0;
	} else {
		var h = parseInt(h);
	}
	if (arguments.length < 3) {
		var sd = 0;
	} else {
		varsd = parseInt(sd);
	}
	if (arguments.length < 4) {
		var ld = 0;
	} else {
		var ld = parseInt(ld);
	}
	
	var div = d3.select('#' + id);
	var color,rgb,hsl;
		for (var s=0;s<30;s++) {
			for (var l=0;l<30;l++) {
				color = 'hsl(' + h + ',' + (s*.25 + sd) + '%,' + (l*.25 + ld) + '%)';
				hsl = d3.hsl(color);
				rgb = hsl.rgb();
				rgbDisplay = 'rgb(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ')';
				div
				 .append('div')
				 .text(color + ' ' + rgbDisplay)
				 .style('background-color', color);
			}
		}
}


function convert_rgb_hsl(r, g, b) {
    var min = Math.min(r /= 255, g /= 255, b /= 255), max = Math.max(r, g, b), d = max - min, h, s, l = (max + min) / 2;
    if (d) {
      s = l < .5 ? d / (max + min) : d / (2 - max - min);
      if (r == max) h = (g - b) / d + (g < b ? 6 : 0); else if (g == max) h = (b - r) / d + 2; else h = (r - g) / d + 4;
      h = Math.round(h*60);
    } else {
      h = NaN;
      s = l > 0 && l < 1 ? 0 : h;
    }
		
		
		return {h:h,s:s,l:l}
}
function convert_rgb_hsl_internal(r, g, b) {
	  var r1 = r;
		var g1 = g;
		var b1 = b;
    var min = Math.min(r /= 255, g /= 255, b /= 255), max = Math.max(r, g, b), d = max - min, h, s, l = (max + min) / 2;
    if (d) {
      s = l < .5 ? d / (max + min) : d / (2 - max - min);
      if (r == max) h = (g - b) / d + (g < b ? 6 : 0); else if (g == max) h = (b - r) / d + 2; else h = (r - g) / d + 4;
      h = Math.round(h*60);
    } else {
      h = NaN;
      s = l > 0 && l < 1 ? 0 : h;
    }
		
		
		return {h:h,s:s,l:l,d:d,max:max,min:min,r:r1,g:g1,b:b1,x:0,y:0}
}

var path = 'M 20 500 ';
var points = [];
var pointIndex = 1;
var picture = d3.select('#graph');
var timeoutId;

function drawLine() {
	var pMinusOne = pointIndex-1;
	if (pointIndex >= points.length) {
		Log.Notice('points.length=' + points.length + ' pointIndex = ' + pointIndex);
		return;
	}
  var p1 = points[pMinusOne];
	var p2 = points[pointIndex];
	d3.select('#graph')
	 .append('line')
	 .attr({
		'x1':p1.x,
	  'y1':p1.y,
		'x2':p2.x,
		'y2':p2.y,
		'stroke':'rgb(' + p1.r + ',' + p1.g +',' + p1.b +')'});
	pointIndex++;
	timeoutId = setTimeout(drawLine,10);
}
function drawPoint() {
	var pMinusOne = pointIndex-1;
	if (pointIndex >= points.length) {
		Log.Notice('points.length=' + points.length + ' pointIndex = ' + pointIndex);
		return;
	}
  var p1 = points[pMinusOne];
	var p2 = points[pointIndex];
	d3.select('#points')
	 .append('circle')
	 .attr({
		'cx':p1.x,
	  'cy':p1.y,
		'r':5,
		'fill':'rgb(' + p1.r + ',' + p1.g +',' + p1.b +')'})
		.transition()
		.ease('linear')
		.duration(1000)
		.attr('r',2.5)
		;
	pointIndex++;
	timeoutId = setTimeout(drawPoint,10);
}


var r=0,g=0,b=0


function graphStuff() {
  points[points.length] = {x:20,y:500,r:r,g:g,b:b};
	for (r=0;r<=255;r=r+25) {
		for (g=0;g<=255;g=g+10) {
			for (b=0; b<=255;b=b+25) {
				//data = new Object();
				var data = convert_rgb_hsl_internal(r,g,b);
				data.y = Math.round(500 - (data.d * 400));
				data.x = 20 + (r + g + b);
				points[points.length] = data;
				//path += "L" + x + ' ' + y + ' ';
        
			}
		}
	}

}


function collectStats(id,h) {
	if (arguments.length < 2) {
		var h = 0;
	} else {
		var h = parseInt(h);
	}
	
	var div = d3.select('#' + id);
	var color,color2,rgb,hsl,hsl2, equal, notEqual;
		for (var s=200;s<=220;s++) {
			equal = 0;
			notEqual = 0;
			for (var l=200;l<=220;l++) {
				
				//hsl = d3.hsl(color);
        hsl = d3.hsl(h,(s*.25)/100,(l*.25)/100);
				rgb = hsl.rgb();
				if (rgb.r == rgb.g && rgb.g == rgb.b) {
          hsl2 = d3.hsl(rgb.r/255*360, 0, rgb.r/255);
					Log.Notice('r=' + rgb.r + ' g=' + rgb.g + ' b=' + rgb.b);
        } else {
          hsl2 = rgb.hsl();
        }
				if (hsl.h == hsl2.h && hsl.s == hsl2.s && hsl.l == hsl2.l) {
					equal++;
				} else {
					notEqual++;
				}
			}
			color = 'hsl(' + hsl.h + ',' + hsl.s + ',' + hsl.l + ')';
			color2 = 'hsl(' + hsl2.h + ',' + hsl2.s + ',' + hsl2.l + ')';
			div
				.append('div')
				.text(color + '   ' + color2 +  + '   ' + rgb + '   equal: ' + equal + ' notEqual: ' + notEqual)
				.style('background-color', color);
		}
}


$(document).ready(function(e) {

	Log.Hide();
	//collectStats('calculations', 220);

	graphStuff(); 
  timeoutId = setTimeout(drawPoint,10);
});



// ]]>
</script>

</head>
<body>
<div id="form">
<form>
<ul>
<fieldset>
<legend>Options</legend>
<li><label for="rStep">rStep</label>
<select id="theory" onChange="generateTC()">
 <option value="compliment" selected="selected">Compliment</option>
 <option value="split-compliment">Split Compliment</option>
 <option value="split-compliment-2">Split Compliment 2</option>
 <option value="analogous">Analogous</option>
 <option value="analogous-2">Analogous 2</option>
 <option value="monochrom-1">Monochromatic 1</option>
 <option value="monochrom-2">Monochromatic 2</option>
 <option value="monochrom-3">Monochromatic 3</option>
 <option value="monochrom-4">Monochromatic 4</option>
 </select>
</li>
<li>
<label for="angle">Angle</label>
<input id="angle" type="range" value="60" min="0" max="90"  onChange="generateTC()">
<span id="angle-display">60&deg;</span>
</li>
</fieldset>
</ul>
</form>
</div>
<div id="app-0">
<svg height="2000" width="2000" viewBox="0 0 2000 2000">
<defs>

<g id="lollypop-1">
 <circle cx="10" cy="20" r="10" />
 <line x1="10" y1="10" x2="10" y2="0" />
</g>

<g id="lollypop-2">
 <circle cx="5" cy="10" r="5" />
 <line x1="5" y1="5" x2="5" y2="0" />
</g>

<g id="lollypop-3">
 <line x1="0" y1="10" x2="5" y2="10" />
 <circle cx="10" cy="10" r="5" />
 <line x1="15" y1="10" x2="20" y2="10" />
</g>

<g id="lollypop-4">
 <line x1="0" y1="10" x2="5" y2="10" />
 <circle cx="10" cy="10" r="5" />
 <!--<line x1="15" y1="10" x2="20" y2="10" />-->
</g>

<g id="lollypop-5">
 <line x1="5" y1="5" x2="5" y2="0" />
 <circle cx="5" cy="10" r="5" />
 <line x1="5" y1="15" x2="5" y2="20" />
</g>

<!-- gradient-hsl-1 remains fixed at all times -->
<linearGradient id="gradient-hsl-1" gradientUnits="objectBoundingBox" color-interpolation="sRGB" >
 <stop offset="0%" stop-color="#FF0000" stop-opacity="1.0" id="hsl-lg-4-0" />
 <stop offset="16.67%" stop-color="#FFFF00" stop-opacity="1.0" id="hsl-lg-4-17" />
 <stop offset="33.3%" stop-color="#00FF00" stop-opacity="1.0" id="hsl-lg-4-33" />
 <stop offset="50%" stop-color="#00FFFF" stop-opacity="1.0" id="hsl-lg-4-50" />
 <stop offset="66.67%" stop-color="#0000FF" stop-opacity="1.0" id="hsl-lg-4-67" />
 <stop offset="83.3%" stop-color="#FF00FF" stop-opacity="1.0" id="hsl-lg-4-83" />
 <stop offset="100%" stop-color="#FF0000" stop-opacity="1.0" id="hsl-lg-4-100" />
</linearGradient>

<linearGradient id="gradient-main-hsl" gradientUnits="objectBoundingBox"
x1="50%" y1="0%" x2="50%" y2="100%" color-interpolation="sRGB">
 <stop id="stop-1" offset="0%" stop-color="#000000" stop-opacity="1.0" />
 <stop id="stop-2" offset="0%" stop-color="#808080" stop-opacity="1.0" />
 <stop id="stop-3" offset="100%" stop-color="#000000" stop-opacity="0.0" />
</linearGradient>

<circle id="c1" />

</defs>

<!--
<g id="hsl-from-rgb" transform="translate(510,20)">
 <rect id="hsl-from-rgb" x="0" y="0" height="256" width="360" fill="url(#gradient-hsl-1)"/>
 <rect id="hsl-screen" x="0" y="0" height="256" width="360" fill="url(#gradient-main-hsl)" />
 <rect id="hsl-swatch-current" x="-145" y="0" height="100" width="100" fill="hsl(180,0%, 50%)" stroke="none" />
 <g id="SWATCH-MAIN-hsl-sliders" style="display: none;" transform="translate(0,220)"> -->
 
  <!-- Hue Control Sount of Main Swatch
  <rect  x="0" y="56" height="5" width="360" fill="url(#gradient-33)" stroke="none" id="r-33" />
  <use  id="slider-33" class="pointer" x="175" y="36" minX="0"    maxX="360" xlink:href="#lollypop-5" fill="hsl(180,0%, 50%)" stroke="#eee" stroke-width="1"/>
	 -->
	<!-- Value/Level Control East side of Main Swatch 
 <rect x="378" y="-220" height="256" width="5" fill="url(#gradient-35)" stroke="none" id="r-35"/>
 <use id="slider-35" class="pointer" x="383" y="-101" minX="0" maxX="255" xlink:href="#lollypop-4" fill="hsl(180,0%, 50%)" stroke="#eee" stroke-width="1" />-->
  <!-- Saturation Control West Side of Main Swatch
  <rect x="-25"  y="-220" height="256" width="5" fill="url(#gradient-34)" stroke="none" id="r-34"/>
  <use id="slider-34" class="pointer" x="-20"   y="-229" minX="0" maxX="255" xlink:href="#lollypop-3" fill="hsl(180,0%, 50%)" stroke="#eee" stroke-width="1" />
 </g>
</g>
 -->
<g transform="scale(1.75)" >
 <g id="graph" ></g>
 <g id="points"></g>
</g>
</svg>
</div>

<div id="calculations">

</div>

<form id="f1">
<fieldset>
<legend>General Animation Options</legend>
<ul>
 <li><label for="dots">Show Dots</label> 
  <input type="checkbox" name="dots" id="dots" checked="checked" />
 </li>
 <li>
  <label for="rSpacing">Red Spacing:</label>
  <input id="rSpacing" name="rSpacing" type="range" min="1" max="25" step="5"
         onChange="adjustScale('rSpacing')">
  </li>
</ul>
 </fieldset>

 </form>
  <div id="instructions">
 <form id="panel">
 <fieldset>
  <legend>Instructions</legend>
 <ul>
  <li>Select Image</li>
  <li>Refresh Page to Start Animation.</li>
 </ul>
 </fieldset>
</form>
</div>
</body>
</html>
