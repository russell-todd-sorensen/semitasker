<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" >

<title>URL/Filter Bug</title>

<link rel="stylesheet" type="text/css" href="/css/log.css" media="all">
<link rel="stylesheet" type="text/css"
      href="/js/jQuery.UI.Combined.1.8.20.1/Content/Content/themes/base/jquery.ui.all.css">
<link rel="stylesheet" href="/css/logo-maker-1.css">
<link rel="stylesheet" href="/css/green-form.css" >
<link rel="stylesheet" href="filter-bug.css">

<style>
#weee {
    background-size: 200px 200px;
    background-repeat:no-repeat;
    background-image: url('/images/parrot-2.jpg'),  url('wave.svg');
    background-blend-mode: difference;
}
</style>
<script src="/js/jquery-1.7.1.js"></script>
<script src="/js/jQuery.UI.Combined.1.8.20.1/Content/Scripts/jquery-ui-1.8.20.js"></script>
<script src="/js/d3.v3.js"></script>
<script src="/js/log-2.js"></script>
<script src="/js/data.js"></script>
<script src="/js/form-save-restore.js"></script>
<script src="/js/binary-hex-conversions.js"></script>
<script src="/js/example-library.js"></script>
<script src="/js/svg-transform.js"></script>
<script src="/js/panel-show-hide.js"></script>
<script src="js/filter-mania-improved-3.js"></script>
<script>

function setStartImage(imageSelectId) {
  Data.loadSelectOptions(imageSelectId,Data.Images);
  Data.restoreSelect('imageFilter');
  Data.restoreSelect('imageFilter2');
  Data.restoreSelect('imageChoice');
  SvgTransform.adjustObjectHeightWidth('image2', 'RGRect', 'linear-displace-rect-1');
}

panelHidden["controls"] = [{
  id:'panel1',
  visible:true,
  css:{
    true:{
      position:'relative'
    },
    false:{
      position:'absolute'
    }
  },
  extra: [
    {
      id:'controls',
      css:{
        true: {
          position:'relative',
          zIndex:0,
          "background-color":'transparent'
        },
        false: {
          position:'absolute',
          zIndex:100,
          "background-color":'#444444'
        }
      }
   },
 ]}
];

$(document).ready(function () {
  //Data.loadSelectOptions('imageFilter',Data.Filters);
  //Data.loadSelectOptions('imageFilter2',Data.Filters);
  setStartImage('imageChoice');
  //Log.Hide();
  Log.Remove();
});

</script>
</head>
<body>
<div id="font-form" class="font-form-on">
<div id="panel">
<form id="distort-font">
<fieldset>
<legend onClick="togglePanel('controls');">General Animation Options</legend>
<ul id="panel1">
 <li><label for="imageFilter">Select Filter</label>
 <select id="imageFilter"
  onChange="SvgTransform.changeFilter('imageFilter', '#image2','#graphics-2' )">
  <option value="">No Filter</option>
  <option value="url(#fish-eye-1)">Fish Eye One</option>
  <option value="url(#fish-eye-2)">Fish Eye Two</option>
  </select>
  </li>
 <li><label for="imageFilter2">Select Filter 2</label>
 <select id="imageFilter2"
  onChange="SvgTransform.changeFilter('imageFilter2', '#clickMe', '#graphics-container')">
    <option value="">No Filter</option>
    <option value="url(#fish-eye-1)">Fish Eye One</option>
    <option value="url(#fish-eye-2)">Fish Eye Two</option>
  </select>
  </li>
 <li>
  <label for="imageChoice">Select Image</label>
  <select
    id="imageChoice"
    name="imageChoice"
    onChange="SvgTransform.changeImage('imageChoice','#image2');
         SvgTransform.adjustObjectHeightWidth('image2', 'RGRect',
          'linear-displace-rect-1'); ">
 </select>
 </li>
 </ul>
 </fieldset>
</form>
 </div>
 </div>
 <svg
  id="iam-svg"
  xmlns:svg="http://www.w3.org/2000/svg"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  version="1.0"
  x="0"
  y="0"
  width="1500"
  height="2000"
  viewBox="0 0 1500 2000"
  style="cursor: pointer;">

<defs>

<radialGradient color-interpolation="sRGB" id="FishEye" spreadMethod="pad" cx="20%" cy="20%">
<animate attributeName="cx" values="0%;20%;100%;80%;0%" begin="0s" dur="15s" repeatCount="indefinite" />
<animate attributeName="cy" values="0%;100%;100%;80%;0%" begin="0s" dur="15s" repeatCount="indefinite" />
  <stop stop-color="green" offset="0%" ></stop>
  <stop stop-color="orange" offset="30%"></stop>
  <stop stop-color="red" offset="100%" ></stop>
</radialGradient>

<rect id="FishEyeRect" x="0" y="0" height="100%" width="100%" style="fill: url(#FishEye); stroke: none;"  crossorigin="use-credentials"/>

<radialGradient color-interpolation="sRGB" id="FishEye-2" spreadMethod="pad" cx="20%" cy="20%">
<animate attributeName="cx" values="0%;70%;90%;70%;0%" begin="0s" dur="20s" repeatCount="indefinite" />
<animate attributeName="cy" values="30%;90%;50%;0%;30%" begin="0s" dur="20s" repeatCount="indefinite" />
 <stop stop-color="red" offset="0%" ></stop>
 <stop stop-color="orange" offset="2%">
 </stop>
  <stop stop-color="green" offset="100%" ></stop>
</radialGradient>

<rect id="FishEyeRect-2" x="0" y="0" height="100%" width="100%" style="fill: url(#FishEye-2); stroke: none;" />


<linearGradient id="h-linear-distort" color-interpolation="sRGB" spreadMethod="repeat" >
 <stop stop-color="#FFFFFF" offset="0%" />
 <stop stop-color="#000000" offset="50%" />
 <stop stop-color="#FFFFFF" offset="100%" />
</linearGradient>

<rect id="linear-displace-rect-1" x="0" y="0" height="100%" width="100%" style="fill: url(#h-linear-distort); stroke: none;" />


<radialGradient color-interpolation="sRGB" id="RG" spreadMethod="reflect">
 <stop stop-color="green" offset="0%" ></stop>
 <stop stop-color="orange" offset="0%" >
  <animate attributeName="offset" from=".0" to=".2" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="green" offset="10%" id="g-1">
  <animate attributeName="offset" from=".1" to=".3" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="orange" offset="20%" id="o-1">
  <animate attributeName="offset" from=".2" to=".4" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="green" offset="30%" id="g-2">
  <animate attributeName="offset" from=".3" to=".5" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="orange" offset="40%" id="o-2">
  <animate attributeName="offset" from=".4" to=".6" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="green" offset="50%" id="g-3">
  <animate attributeName="offset" from=".5" to=".7" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="orange" offset="60%" id="o-3">
  <animate attributeName="offset" from=".6" to=".8" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="green" offset="70%" id="g-4">
  <animate attributeName="offset" from=".7" to=".9" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="orange" offset="80%" id="o-4">
  <animate attributeName="offset" from=".8" to="1" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="green" offset="90%" id="g-5">
  <animate attributeName="offset" from=".9" to="1" dur="3s" repeatCount="indefinite" />
 </stop>
 <stop stop-color="orange" offset="100%" id="o-5">
 </stop>
</radialGradient>

<rect id="RGRect" x="0" y="0" height="100%" width="100%" style="fill: url(#RG); stroke: none;" />

<mask id="RG-mask" >
 <use xlink:href="#RG" x="0" y="0" height="100%" width="100%" />
</mask>


<filter id="fish-eye-1"  color-interpolation="sRGB">

<!--<feImage xlink:href="#FishEyeRect" result="tile" crossorigin="use-credentials" />
<feImage xlink:href="#FishEye" result="tile" crossorigin="use-credentials" />
 <feImage xlink:href="/images/rgb-hsl-conversion.png" result="tile" />
 <feImage xlink:href="wave.svg" result="tile"  crossorigin="use-credentials" />
  <feTile />
  <image id="weee" xlink:href="wave.svg" height="300" width="300" result="tile"/>-->
  <feImage xlink:href="data:image/svg+xml;utf8,%3csvg version='1.1'      xmlns='http://www.w3.org/2000/svg'     xmlns:xlink='http://www.w3.org/1999/xlink'     xmlns:ev='http://www.w3.org/2001/xml%2devents'          baseProfile='full'%3e		 %3cdefs%3e%3cradialGradient color%2dinterpolation='sRGB' id='FishEye' spreadMethod='pad' cx='50%25' cy='50%25'%3e%3canimate attributeName='cx' values='0%25;20%25;100%25;80%25;0%25' begin='0s' dur='15s' repeatCount='indefinite' /%3e%3canimate attributeName='cy' values='0%25;100%25;100%25;80%25;0%25' begin='0s' dur='15s' repeatCount='indefinite' /%3e  %3cstop stop%2dcolor='green' offset='0%25' %3e%3c/stop%3e  %3cstop stop%2dcolor='orange' offset='30%25'%3e%3c/stop%3e  %3cstop stop%2dcolor='red' offset='100%25' %3e%3c/stop%3e%3c/radialGradient%3e%3c/defs%3e%3crect id='FishEyeRect' x='0' y='0' height='100%25' width='100%25' style='fill: url(%23FishEye); stroke: none;' /%3e%3c/svg%3e" result="tile" />
  <feDisplacementMap
    in2="tile"
    in="SourceGraphic"
    scale="80"
    xChannelSelector="R"
    yChannelSelector="R" >
  </feDisplacementMap>
</filter>

<filter id="fish-eye-2"  color-interpolation="sRGB">
  <feImage xlink:href="#FishEyeRect-2" result="tile" crossorigin="use-credentials" />

  <feDisplacementMap
    in2="tile"
    in="SourceGraphic"
    scale="80"
    xChannelSelector="R"
    yChannelSelector="R" >
  </feDisplacementMap>
</filter>

</defs>


<g id="clickMe" transform="translate(10,10)" filter="" >
  <image id="image2" xlink:href="/images/Butterfly 6.jpg" height="100%" x="0" y="0" width="100%"/>
</g>

<g id="graphics-1"  transform="translate(550,0)" >
        <text style="font-size: 120; fill: #abc; stroke: none;"
              mask="#RG-mask" x="0" y="100">This is some text</text>
        <use xlink:href="#rgb-grad-rect-1" x="360" y="20" fill="url(#red-grad)" />
        <use xlink:href="#rgb-grad-rect-1" x="360" y="50" fill="url(#green-grad)" />
        <use xlink:href="#rgb-grad-rect-1" x="360" y="80" fill="url(#blue-grad)" />
       </g>
      
      <g id="graphics-container"  transform="translate(550,0)">
        <g id="graphics-2" filter="">
          <text style="font-size: 120; fill: #abc; stroke: none;"
                mask="#RG-mask" x="0" y="100">This is some text</text>
          <use xlink:href="#rgb-grad-rect-1" x="100" y="20" fill="url(#red-grad)" />
          <use xlink:href="#rgb-grad-rect-1" x="100" y="50" fill="url(#green-grad)" />
          <use xlink:href="#rgb-grad-rect-1" x="100" y="80" fill="url(#blue-grad)" />
        </g>
      </g>
<g transform="translate(800,50) scale(.25,.25)">
 <!--  <use  id="weee" xlink:href="#FishEyeRect" height="30" width="30" />  
 <image id="weee" xlink:href="wave.svg" height="300" width="300" />-->
 <rect id="weee" height="1000" width="1000" x="200" y="300" />
</g>    
</svg>

</body>
</html>