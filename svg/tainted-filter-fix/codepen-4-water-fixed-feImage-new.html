<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" >

<title>Codepen bug fix 3</title>

<style>
</style>
</div>
</head>
<body>
<div id="svg-container">
<svg version="1.1" 
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:ev="http://www.w3.org/2001/xml-events"
 width="1000"
 height="1250"
 viewport="0 0 1000 1250">
 <defs>
<style>

svg {
    background-image: url("/svg/grid-2.svg");
}
#rect1 {
    fill: url(#circle);
}
#rect2 {
    fill: url(#circle);
    stroke-width: 3;
    stroke:blanchedalmond;
}
#circle-1 {
    fill: url(#gf); 
    stroke: yellow; 
    stroke-width: 20; 
    stroke-dasharray: 1 20;
}
#myimage {
    opacity: 0.8;
    stroke: yellow;
    stroke-width:30;
    filter: url(#displacementFilter);

}
</style>
<filter id="displacementFilter">
 <feImage height="100%" width="100%" xlink:href="/images/feathers-2.jpg" result="image"/>
 <feDisplacementMap
    in2="SourceGraphic"
    in="image"
    result="DisplacementMap"
    scale="50"
    xChannelSelector="R"
    yChannelSelector="G">
  </feDisplacementMap>
</filter>

<radialGradient id="gf" color-interpolation="sRGB" spreadMethod="reflect">
 <stop stop-color="green" offset="0%"/>
 <stop stop-color="orange" offset="0%">
  <animate attributeName="offset" values="0;.5;0" dur="7s" repeatCount="4" />
 </stop>
 <stop stop-color="red" offset="25%">
  <animate attributeName="offset" values=".25;0;1;.25" dur="11s" repeatCount="4"/>
 </stop>
 <stop stop-color="green" offset="50%" id="g-1">
  <animate attributeName="offset" values="0.5;1.2;0.5" dur="3s" repeatCount="4" />
 </stop>
 <stop stop-color="orange" offset="100%" id="o-5"/>
</radialGradient>

<circle id="circle-1" r="200" cx="200" cy="200" stroke-linecap="round" >
    <animate attributeName="r" values="200;25;150;50;250" begin="0s" dur="37s" repeatCount="4"/>
    <animate attributeName="cx" values="150;50;250;50;250;50;150" begin="0s" dur="47s" repeatCount="4"/>
    <animate attributeName="cy" values="150;250;50;250;150;50;150" begin="0s" dur="57s" repeatCount="4"/>
</circle>
<pattern id="circle" x="0" y="0" width="100%" height="100%">
    <use xlink:href="#circle-1" stroke="red" stroke-width="2" />
</pattern>
<filter id="circle-pattern-bg">
    <feImage href="/images/mset-opt/mset-5666.png" height="100%" width="100%" result="image"/>
    <feDisplacementMap
        in="image"
        in2="SourceGraphic"
        result="DisplacementMap"
        scale="50"
        xChannelSelector="G"
        yChannelSelector="R">
        <animate attributeName="scale" values="0;-50;0;50;0" begin="5s" dur="40" repeatCount="2" />
  </feDisplacementMap>
    <!--<feComposite in2="DisplacementMap" in="SourceGaphic" operator="atop" />-->
</filter>
<filter id="circle-pattern-rg">
    <feImage href="/images/mset-opt/mset-5666.png" height="100%" width="100%" result="image"/>
    <feDisplacementMap
        in="image"
        in2="SourceGraphic"
        result="DisplacementMap"
        scale="50"
        xChannelSelector="B"
        yChannelSelector="G">
        <animate attributeName="scale" values="0;50;0-50;0" begin="0s" dur="40" repeatCount="2" />
  </feDisplacementMap>
    <!--<feComposite in2="DisplacementMap" in="SourceGaphic" operator="atop" />-->
</filter>
</defs>
<g id="outer-group-2" x="10" y="10" transform="translate(20,20)" filter="url(#circle-pattern-rg)" >
    <image id="image2" x="20" y="20" height="1075" width="1445" href="/images/mset-opt/mset-5666.png"
           filter="url(#circle-pattern-bg)" />
    <!--<rect id="rect2" x="0" y="0" height="350" width="450"/images/feathers-2.jpg />
    <use xlink:href="#circle-1" />-->
</g>
</svg>
</div>
</body>
</html>