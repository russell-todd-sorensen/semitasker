<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" >

<title>Validate if a given string can be interpreted as a decimal number.</title>
<script src=""></script>

<script>
/*
Validate if a given string can be interpreted as a decimal number.

Some examples:
"0" => true
" 0.1 " => true
"abc" => false
"1 a" => false
"2e10" => true
" -90e3   " => true
" 1e" => false
"e3" => false
" 6e-1" => true
" 99e2.5 " => false
"53.5e93" => true
" --6 " => false
"-+3" => false
"95a54e53" => false

Note: It is intended for the problem statement to be ambiguous.
You should gather all requirements up front before 
implementing one. However, here is a list of characters
that can be in a valid decimal number:

Numbers 0-9
Exponent - "e"
Positive/negative sign - "+"/"-"
Decimal point - "."
Of course, the context of these characters also matters in the input.
*/

/**
 * @param {string} s
 * @return {boolean}
 */
/* 
Decimal number representation will be analyzed in three sections.
*/
var isNumber = function(s) {

    console.log("Possible Decimal = '" + s + "'")
    var result        = false;
    var decimalPart   = false;
    var exponentStart = false;
    var exponentValue = false;

    // decimal part
    // will accept linear whitespace
    var decimal = "";
    var len = s.length

    var positivity = "+"
    var foundPositivity = false;
    var foundStart = false;
    var foundStopCondition = false;
    var foundDecimalPoint = false;
    var foundExponentStart = false;
    var foundExponentPositivity = false;
    var foundExponentValueStart = false;
    var foundTrailingWhitespace = false;
    var needTrailingDigits =  false; // will be true if we find decimal point
    var foundTrailingDigits = false; // false until we find a decimal point
    var stopCondition = "";
    var errorCondition = false;
    var errorCode = "Global:None";
    var probablyValid = false;
    var index;
    var char;

    globalLoop:
    while (true) {
        decimalLoop:
        for (index = 0; index < len;index++) {
            char = s[index];

            switch (char) {
            case ' ': 
            case '\t': 
                if (foundPositivity) {
                    if (!foundStart) {
                        errorCondition = true;
                        errorCode = "Decimal:Included Whitespace";
                        break globalLoop;
                    }
                    foundStopCondition = true;
                    stopCondition = "Decimal:Whitespace";
                    break decimalLoop;
                }
                if (foundStart) {
                    foundStopCondition = true;
                    stopCondition = "Decimal:Whitespace";
                    break decimalLoop;
                }
                break;
            case '-':
            case '+':
                if (foundPositivity) {
                    errorCondition = true;
                    errorCode = "Decimal:Extra Positivity";
                    break globalLoop;
                }
                if (foundStart) {
                    errorCondition = true;
                    errorCode = "Decimal:Extra Positivity"
                    break globalLoop;
                }
                positivity = char;
                foundPositivity = true;
                break;
            case 'e': 
                if (!foundStart) {
                    errorCondition = true;
                    errorCode = "Decimal:Exponent Before Decimal";
                    break globalLoop;
                }
                break decimalLoop;
            case '0':
            case '1': 
            case '2': 
            case '3': 
            case '4': 
            case '5': 
            case '6': 
            case '7': 
            case '8': 
            case '9':
                if (!foundStart) foundStart = true;
                if (!foundPositivity) foundPositivity = true; // even if we didn't, we did.
                if (needTrailingDigits) foundTrailingDigits = true;
                break;
            case '.':
                if (foundDecimalPoint) {
                    errorCondition = true;
                    errorCode = "Decimal:Extra Decimal Point";
                    break globalLoop;
                }
                if (!foundStart) {
                    foundStart = true;
                    needTrailingDigits = true;
                }
                foundDecimalPoint = true;
                break;
            default: 
                errorCondition = true;
                errorCode = "Decimal:Illegal Char ('" + char + "')";
                break globalLoop;
            }
        } // end of decimalLoop

        exponentLoop:
        for (;index < len;index++) {
            char = s[index];

            switch (char) {
            case 'e': 
                foundExponentStart = true;
                index++;
                break exponentLoop;
            default:
                break exponentLoop;
            }
        }

        exponentValueLoop: 
        for (;index<len;index++) {
            char = s[index];

            switch (char) {

            case '-':
            case '+':
                if (!foundExponentStart) {
                    errorCondition = true;
                    errorCode = "ExponentValue: Positivity Before Exponent Start";
                    break globalLoop;
                }
                if (foundExponentValueStart) {
                    errorCondition = true;
                    errorCode = "ExponentValue: Positivity ('" + char + "') Misplaced in Exponent";
                    break globalLoop;
                }
                if (foundExponentPositivity) {
                    errorCondition = true;
                    errorCode = "ExponentValue: Extra Positivity ('" + char + "') in Exponent";
                    break globalLoop;
                }
                foundExponentPositivity = true;
                break;
            case '0':
            case '1': 
            case '2': 
            case '3': 
            case '4': 
            case '5': 
            case '6': 
            case '7': 
            case '8': 
            case '9':
                if (!foundExponentStart) {
                    errorCondition = true;
                    errorCode = "Exponent:Missing Exponent Start (e)" 
                    break globalLoop;
                }
                if (foundTrailingWhitespace) {
                    errorCondition = true;
                    errorCode = "Exponent:Included Whitespace";
                    break globalLoop;
                }
                if (!foundExponentValueStart) foundExponentValueStart = true;
                break;
            case ' ': 
            case '\t': 
                //if (!foundExponentValueStart) foundTrailingWhitespace = true;
                foundTrailingWhitespace = true;
                break;
            default: 
                errorCondition = true;
                errorCode = "Exponent: Illegal Character ('" + char + "') in Exponent";
                break globalLoop;
            }
        } // end exponentValueLoop

        probablyValid = true;
        // this isn't really a loop :)
        break globalLoop;
    } // end globalLoop;

    if (probablyValid) {
        result = (probablyValid
            && foundStart 
            && (
                (foundTrailingDigits && needTrailingDigits)
                ||
                (!foundTrailingDigits && !needTrailingDigits)
               )
            && (
                (foundExponentStart && foundExponentValueStart) 
                ||
                (!foundExponentStart && !foundExponentValueStart)
            )
            && !(foundExponentPositivity && !foundExponentValueStart)
        )

        if (!result) {
            errorCondition = true;
            errorCode = "Global:Multi-Attribute Check Failure"
        }
    }

    console.log("errorCondition='" + errorCondition + "', errorCode='" + errorCode + "' index='" + index + "'");

    return result;

};

var result = isNumber("  -90e3  ");

var results = [
    "0", isNumber("0"),
    " 0.1 ", isNumber(" 0.1 "),
    "abc", isNumber("abc"),
    "1 a", isNumber("1 a"),
    "2e10", isNumber("2e10"),
    " -90e3   ", isNumber(" -90e3   "),
    " 1e", isNumber(" 1e"),
    "e3", isNumber("e3"),
    " 6e-1", isNumber(" 6e-1"),
    " 99e2.5 ", isNumber(" 99e2.5 "),
    "53.5e93", isNumber("53.5e93"),
    " --6", isNumber(" --6"),
    "-+3", isNumber("-+3"),
    "95a54e53", isNumber("95a54e53"),
    ".e3", isNumber(".e3"),
    " .e23 ", isNumber(" .e23 "),
    "1.e25", isNumber("1.e25"),
    "1.0e2 5", isNumber("1.0e2 5"),
    " 1.0e3 5 ", isNumber(" 1.0e3 5 "),
    "1.0e 45", isNumber("1.0e 45"),
    "1.0e 55 ", isNumber("1.0e 55 "),
    "1.0 e55 ", isNumber("1.0 e55 "),
    "   1e22    ", isNumber("   1e22    "),
    "-2.2e-122 ", isNumber("-2.2e-122 "),
    "-2.2e-12 2 ", isNumber("-2.2e-12 2 "),
    ".1", isNumber(".1"),
    "-.1", isNumber("-.1"),
    "-0.1", isNumber("-0.1"),
    "3.", isNumber("3."),
    "-3.", isNumber("-3."),
    ". 1", isNumber(". 1"),
    ". ", isNumber(". "),
    " . ", isNumber(" . "),
    " .", isNumber(" ."),
    " . ", isNumber(" . "),
    "2 . ", isNumber("2 . "),
    "4e+", isNumber("4e+"),
    "4e-", isNumber("4e-"),
    "4e- ", isNumber("4e- "),
    "4e -", isNumber("4e -"),
    "4 e-", isNumber("4 e-"),



]

console.log ("results = " + results)
</script>
</head>
<body>
</body>
</html>


