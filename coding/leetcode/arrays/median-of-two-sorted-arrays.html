<html>
    <head>
    <script>
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function(nums1, nums2) {
    var flen, slen;
    var first, secnd;
    //compare first item in each array
    var min, max;
    var order = [];
    if (nums1[0] <= nums2[0]) {
        first = nums1;
        secnd = nums2;
    } else {
        first = nums2;
        secnd = nums1;
    }

    flen = first.length
    slen = secnd.length

    // median index calculation
    var type = 0;
    var m1 = 0;
    var m2 = 0;
    m1 = parseInt((flen+slen)/2)
    if ((flen+slen) % 2 == 0) m2 = m1+1;

    var p1,p2,p3,p4;
    p1 = {in:first, idx: 0, val: first[0]}

    if (secnd[0] >= first[flen-1]) {
        type = 1;
        p2 = {in:first, idx: flen-1,      val: first[flen-1]}
        p3 = {in:secnd, idx: flen,        val: secnd[0]}
        p4 = {in:secnd, idx: flen+slen-1, val: secnd[slen-1]}
    } else {
        p2 = {in:secnd, idx: "unknown", val: secnd[0]}

        if (secnd[slen-1] > first[flen-1]) {
            type = 2;
            p3 = {in:first, idx: "unknown", val: first[flen-1]}
            p4 = {in:secnd, idx: flen+slen-1, val: secnd[slen-1]}
        } else {
            type = 3;
            p3 = {in:secnd, idx: "unknown", val: secnd[slen-1]}
            p4 = {in:first, idx: flen+slen-1, val: first[flen-1]}
        }
    }


    var descr;
    switch (type) {
    case 1:
        descr = "Arrays do not overlap";
        break;
    case 2:
        descr = "First Array ends in second array";
        break;
    case 3:
        descr = "Second Array is entirely in first array";
        break;
    default:
        descr = "Unknown type='" + type + "'";
        break;
    }

    console.log("Example='" + eg + "' Type='" + type + "' descr='" + descr + "'");
    // right now just workin on fully overlapping case 2
    if (type != 2) {
        return
    }

    // Find where p2 would sit in first array
    var prevIndex = 0
    var nextIndex = flen-1
    var p2Index   = parseInt((flen-1)/2)
    var p2Value   = p2.val
    var counter   = 0
    var diff      = nextIndex - prevIndex;
    var trace     = []
    while (diff > 0 || counter > 500) {
        trace[trace.length] = {p2Index:p2Index, valAt: first[p2Index], diff: diff};
        counter++;
        if (p2Value == first[p2Index] ) {
            //they are equal take the next index
            p2Index++;
            while (p2Index < flen) {
                // we want to advnce p2Index as much as possible
                if (first[p2Index] == p2Value) {
                    p2Index++;
                    continue;
                }
                break;
            }
            diff = 0;
            trace[trace.length] = {p2Index:p2Index, valAt: first[p2Index], diff: diff};
            break;
        }
        if (diff == 1) {
            if (p2Value > first[p2Index]) {
                p2Index++
            } else if (p2Value < first[p2Index]) {
                p2Index--
            }
            trace[trace.length] = {p2Index:p2Index, valAt: first[p2Index], diff: diff};
            break;   
        }
        // p2 is in second half of current range
        if (first[p2Index] < p2Value) {
            prevIndex = p2Index
            diff = nextIndex - prevIndex
            p2Index = parseInt(diff/2) + prevIndex
            continue
        }
        // p2 is in the first half of current range
        if (first[p2Index] > p2Value) {
            nextIndex = p2Index
            diff = nextIndex - prevIndex
            p2Index = parseInt(diff/2) + prevIndex
            continue
        }
        console.log("something is wrong, p2Value='" 
            + p2Value + "' not > = < than '" 
            + first[p2Index] + "' at index '" + p2Index + "'" );
    }

    if (diff <= 1) {    
        p2.idx = p2Index
    } else {
        p2.idx = "unknown"
    }

    // Find where p3 would sit in second array
    var prevIndex = 0
    var nextIndex = slen-1
    var p3Index   = parseInt((slen-1)/2)
    var p3Value   = p3.val
    var counter   = 0
    var diff      = nextIndex - prevIndex;
    var trace     = []
    while (diff > 0 || counter > 500) {
        trace[trace.length] = {p3Index:p3Index, valAt: secnd[p3Index], diff: diff};
        counter++;
        if (p3Value == secnd[p3Index] ) {
            //they are equal take the previous index
            p3Index--;
            while (p3Index >= 0) {
                // we want to rewind p3Index as much as possible 
                if (secnd[p3Index] == p3Value) {
                    p3Index--;
                    continue;
                }
                break;
            }
            // in case we went too far
            if (p3Index < 0) p3Index = 0;
            diff = 0;
            trace[trace.length] = {p3Index:p3Index, valAt: secnd[p3Index], diff: diff};
            break;
        }
        if (diff == 1) {
            if (p3Value > secnd[p3Index]) {
                p3Index++
            } else if (p3Value < secnd[p3Index]) {
                p3Index--
            }
            trace[trace.length] = {p3Index:p3Index, valAt: secnd[p3Index], diff: diff};
            break;   
        }
        // p3 is in second half of current range
        if (secnd[p3Index] < p3Value) {
            prevIndex = p3Index
            diff = nextIndex - prevIndex
            p3Index = parseInt(diff/2) + prevIndex
            continue
        }
        // p3 is in the first half of current range
        if (secnd[p3Index] > p3Value) {
            nextIndex = p3Index
            diff = nextIndex - prevIndex
            p3Index = parseInt(diff/2) + prevIndex
            continue
        }
        console.log("something is wrong, p3Value='" 
            + p3Value + "' not > = < than '" 
            + secnd[p3Index] + "' at index '" + p3Index + "'" );
    }
    if (diff <= 1) {    
        p3.idx = p3Index
    } else {
        p3.idx = "unknown" 
    }

    console.log ("p3.idx='" + p3.idx + "'")
    console.log("trace='" + trace + "'");
};
    

var arr1, arr2;
var answer;

var eg = 1;
function pickExample (choice) {
    switch (choice) {
    case 1:
        arr1 = [1, 2];
        arr2 = [3, 4];
        answer = (2 + 3)/2;
        break;
    case 2:
        arr1 = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];
        arr2 = [7,10,12,13,19,22,23,40,43,50];
        answer = (13 + 13)/2;
        break;
    case 3: 
        arr1 = [1, 3];
        arr2 = [2];
        answer = 2.0;
        break;
    case 4:
        arr1 = [1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20];
        arr2 = [7,10,12,13,19,22,23,40,43,50];
        answer = 13;
        break;
    case 5:
        arr1 = [1,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20];
        arr2 = [8,10,12,13,19,22,23,40,43,50];
        arr3 = [13];
        answer = 13;
        break;
    case 6:
        arr1 = [1,2,2,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20];
        arr2 = [8,10,12,13,19,22,23,40,43,50];
        arr3 = [12]
        answer = 12;
        break;
    case 7:
        arr1 = [1,2,2,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20];
        arr2 = [7,10,12,13,19,22,23,40,43,50];
        arr3 = [12];
        answer = 13;
        break;
    case 8:
        arr1 = [1,2,2,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20];
        arr2 = [2,7,10,12,13,19,22,23,40,43,50];
        arr3 = [12,12]
        answer = 12;
        break;
    case 9:
        arr1 = [2,4,6,8,10,12];
        arr2 = [1,3,5,7,9,11];
        arr3 = [6,7];
        answer = 6.5;
        break;
    case 10: 
        arr1 = [1,2,3,4,5,6];
        arr2 = [3,4,5,6,7,8,9];
        arr3 = [5];
        answer = 5.0;
        break;
    }


}
function cmpInt(a,b) {
    a = parseInt(a)
    b = parseInt(b)
    return (a>b?1:b>a?-1:0)
}

var bruteForceMedianValue = function(nums1,nums2) {
    var oneArray = new Array();
    var i,j
    console.log("arr1='" + nums1 + "'");
    console.log("arr2='" + nums2 + "'");
    for (i = 0;i < nums1.length;i++) {
        oneArray.push(nums1[i])
    }
    for (j = 0;j<nums2.length;j++) {
        oneArray.push(nums2[j]);
    }
    oneArray = oneArray.sort(cmpInt);

    var medIndex = parseInt((i + j - 1)/2);
    var medValue1
    var medValue0 = oneArray[medIndex]
    var medString = "medIndex[0]='" + medIndex + "' value='" + medValue0 + "' "
    if ((i+j)%2 == 0) {
        medIndex++
        medValue1 = oneArray[medIndex]
        medValue = (medValue0 + medValue1)/2;
        medString = medString + "medIndex[1]='" + medIndex + "' value='" + medValue1 + "' Median value='" + medValue + "'"
    } else {
        medValue = medValue0;
    }
    console.log(oneArray)
    console.log(medString)
    return medValue
}


for (var i = 2; i < 3; i++) {
    pickExample(i);
    console.log("Example " + i + " arr1='" + arr1 + "'" )
    console.log("Example " + i + " arr2='" + arr2 + "'" )
    result = findMedianSortedArrays(arr1,arr2)
    console.log ("result = " + result)
}
    </script>
    </head>
    <body>
<b>Hi</b>
    </body>
</html>


