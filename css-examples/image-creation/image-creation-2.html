<!DOCTYPE HTML>
<html lang="en_US">
<head>
<meta charset="utf-8">
<title>Image Creation in JavaScript</title>
<link rel="stylesheet" href="main.css" type="text/css">

<style>
 
body {

}
 
 
</style>

<script language="javascript" src="../js/jquery-v141.js"></script>
<script language="javascript">
 
 var log;
 var myImage = new Image();
 var prop = myImage.toString();
 
 myImage.src = "../images/rgb-5x5.png";
 var height = myImage.height;
 var width = myImage.width;
 
 function doImageStuff () {
	 
	 var elem = document.getElementById('myCanvas');
	 var imageData;
	 
	 if (!elem || !elem.getContext) {
		 log.append('doImageStuff: elem or elem.getContext not found\n');
		 return;
	 }
	 
	 var context = elem.getContext('2d');
	 
	 if (!context || !context.putImageData) {
		 log.append('doImageStuff: context or context.putImageData not found\n');
		 return;
	 }
	 
	 if (!context.createImageData) {
		 log.append('doImageStuff: context.createImage exists\n');
		 imageData = context.createImageData (height, width);
	 } else if (context.getImageData) {
		 imageData = context.getImageData(0, 0, width, height);
		 log.append('doImageStuff: context.getImageData exists\n');
	 } else {
		 log.append('doImageStuff: using default image creation method\n');
		 imageData = {'width': width, 'height': height, 'data':new Array(width*height*4)};
	 }
	 
	 var pixels = imageData.data;
	 var rVal = Math.floor(255);
	 var gVal = Math.floor(0);
	 var bVal = Math.floor(0);
	 var aVal = Math.floor(128);
	 
	 for (var i=0, n=pixels.length; i<n; i+=4) {
		 
		 pixels[parseInt(i)+parseInt(0)] = rVal;
		 pixels[parseInt(i)+parseInt(1)] = gVal;
		 pixels[parseInt(i)+parseInt(2)] = bVal;
		 pixels[parseInt(i)+parseInt(3)] = aVal;
		 log.append('pixels[' + parseInt(i+0) + '] - pixels[' + parseInt(i+3) + ']=' + 
		 pixels[parseInt(i)+parseInt(0)] + ' ' + pixels[parseInt(i)+parseInt(1)] + ' ' + pixels[parseInt(i)+parseInt(2)] + ' ' + pixels[parseInt(i)+parseInt(3)] + '\n');
	 }
	 context.putImageData(imageData, 0, 0);
 }
 
  function doImageStuff2 (id) {
	 
	 var elem = document.getElementById(id);
	 var imageData;
	 
	 if (!elem || !elem.getContext) {
		 log.append('doImageStuff: elem or elem.getContext not found\n');
		 return;
	 }
	 
	 var context = elem.getContext('2d');
	 
	 if (!context || !context.putImageData) {
		 log.append('doImageStuff: context or context.putImageData not found\n');
		 return;
	 }
	 
	 if (!context.createImageData) {
		 log.append('doImageStuff: context.createImage exists\n');
		 imageData = context.createImageData (height, width);
	 } else if (context.getImageData) {
		 imageData = context.getImageData(0, 0, width, height);
		 log.append('doImageStuff: context.getImageData exists\n');
	 } else {
		 log.append('doImageStuff: using default image creation method\n');
		 imageData = {'width': width, 'height': height, 'data':new Array(width*height*4)};
	 }
	 
	 var pixels = imageData.data;
	 var rVal = Math.floor(255);
	 var gVal = Math.floor(0);
	 var bVal = Math.floor(0);
	 var aVal = Math.floor(128);
	 
	 for (var i=0, n=pixels.length; i<n; i+=4) {
		 
		 pixels[parseInt(i)+parseInt(0)] = rVal;
		 pixels[parseInt(i)+parseInt(1)] = gVal;
		 pixels[parseInt(i)+parseInt(2)] = bVal;
		 pixels[parseInt(i)+parseInt(3)] = aVal;
		 log.append('pixels[' + parseInt(i+0) + '] - pixels[' + parseInt(i+3) + ']=' + 
		 pixels[parseInt(i)+parseInt(0)] + ' ' + pixels[parseInt(i)+parseInt(1)] + ' ' + pixels[parseInt(i)+parseInt(2)] + ' ' + pixels[parseInt(i)+parseInt(3)] + '\n');
	 }
	 //context.putImageData(imageData, 0, 0);
 }
// This runs at after the document is 'ready'
$(document).ready(function() {
	log = $('#log');
	log.append('Document Ready\n');
	log.append('prop = ' + prop + '\n');
	log.append('myImage.height=' + height + '\n');
	log.append('myImage.width=' + width + '\n');
	doImageStuff();
	//doImageStuff2('myImg');
	
	//$('body').css('background-image', 'url(../images/rgb-5x5.png)');
});
</script>
 


</head>
<body>

<canvas id="myCanvas" height="5" width="5"><img id="myImg" src="../images/rgb-5x5.png">Your browser doesn't support canvas</canvas>



<pre id="log">Log:</pre>


</body>
</html>
