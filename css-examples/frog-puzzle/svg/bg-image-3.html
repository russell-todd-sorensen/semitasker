<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<title>Moving tiles in SVG</title>
<style>
#t2 {
    font-size: 48px;
    fill: black;
    font-family: 'Keania One', Arial;
}
#svg2 {
    background-color: white;
    cursor: pointer;
}
.A {
    font-size: 20px;
    font-family: Arial;
}
#r1 {
    fill: rgba(0,0,0,0);
    stroke: red;
    stroke-width: 2;
    fill: url('/images/building-1.jpg');
}
#mpoints2 {
}
#pt1,
#pt2 {
    fill: none;
    stroke: grey;
    stroke-width: 2px;
}
#l1 {
    stroke: yellow;
    stroke-width: 2px;
}
#c1,
#c2 {
    stroke: red;
    stroke-width: 2px;
    fill: none;
}
</style>
</head>
<body>
<svg 
    id="svg2"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xml:base="https://home.semitasker.com/"
    externalResourcesRequired="true"
    x="0"
    y="0"
    height="1500"
    width="2000"
    >

<defs>
<polygon id="pt1" points="0,0 128,0 128,96 0,96" />
<polygon id="pt2" points="100,100 228,145 95,60 100,100" />

<filter id="f1" >
<feImage href="/images/building-1.jpg" result="tile"/>
<feTile in="tile" result="tile2" />
</filter>

<filter id="f2" x="0" y="0" width="100%" height="100%">
<feImage href="/images/building-1.jpg" result="tile" />
<!--<feTile in="tile" result="tile2" /> -->
</filter>

<image id="img2" href="/images/desert-1.jpg" />

<clipPath id="cp1">
<use href="#pt1" x="0" y="0" height="100" width="200" />
</clipPath>

<clipPath id="cp2">
<use href="#pt1" x="201" y="0" height="100" width="200" />
</clipPath>

<clipPath id="cp3">
<use href="#pt1" x="402" y="0" height="100" width="200" />
</clipPath>

<clipPath id="cp11">
<use href="#pt1" x="0" y="0" height="96" width="128" />
</clipPath>

<clipPath id="cp12">
<use href="#pt1" x="129" y="0" height="96" width="128" />
</clipPath>

<clipPath id="cp13">
<use href="#pt1" x="257" y="0" height="96" width="128" />
</clipPath>

<clipPath id="cp14">
<use href="#pt1" x="385" y="0" height="96" width="128" />
</clipPath>

<clipPath id="cp21">
<use href="#pt2" x="0" y="0" />
</clipPath>

</defs>
<g id="p1" transform="translate(100,100)" >
 <use id="ref1" href="#pt1" fill="green" filter="url(#f2)" />
</g>
<g id="p2" transform="translate(300,100)" >
 <use id="ref2" href="#pt1" fill="yellow" transform="rotate(20)" filter="url(#f1)"/>
</g>

<g transform="translate(0,0)" >
<g id="p3" >
<use href="#img2" clip-path="url(#cp1)" x="300" y="300" />
</g>
<g id="p4" >
<use href="#img2" clip-path="url(#cp2)" x="300" y="300" />
</g>
<g id="p5" >
<use href="#img2" clip-path="url(#cp3)" x="300" y="300" />
</g>
</g>

<g transform="translate(300,800)" >
<g id="p11" >
<use href="#img2" clip-path="url(#cp11)" x="0" y="0" />
<use href="#pt1" x="0" y="0" />
</g>
<g id="p12" transform="translate(0,0)">
<animateTransform attributeName="transform"
                          attributeType="XML"
                          type="translate"
                          values="0 0;0 96;-128 96;-128 0;0 0"
                          dur="2.0s"
                          repeatCount="indefinite"/>
<use href="#img2" clip-path="url(#cp12)" x="0" y="0" />
<use href="#pt1" x="129" y="0" />
</g>
<g id="p13" transform="translate(0,0) rotate(-10)">
<use href="#img2" clip-path="url(#cp13)" x="0" y="0" />
<use href="#pt1" x="257" y="0" />
</g>
<g id="po14" transform="rotate(10,448,48)">
<animateTransform attributeName="transform"
                          attributeType="XML"
                          type="rotate"
                          from="0 448 48"
                          to="359 448 48"
                          dur="20s"
                          repeatCount="indefinite"/>
<g id="p14" >
<!--<animateTransform attributeName="transform"
                          attributeType="XML"
                          type="rotate"
                          from="0 448 48"
                          to="359 448 48"
                          dur="20s"
                          repeatCount="indefinite"/>-->
<animateTransform attributeName="transform"
                          attributeType="XML"
                          type="translate"
                          values="0 0;0 96;-128 96;-128 0;0 0"
                          dur="2.5s"
                          repeatCount="indefinite"/>
<use href="#img2" clip-path="url(#cp14)" x="0" y="0" />
<use href="#pt1" x="385" y="0" />
<line id="l1" x1="0" y1="0" x2="385" y="96" />
<circle id="c1" cx="448" cy="48" r="4" />
</g>
</g>

<g id="p21" transform="translate(0,0)">
        <animateTransform attributeName="transform"
                                  attributeType="XML"
                                  type="rotate"
                                  from="0 141 101.66667"
                                  to="359 141 101.66667"
                                  dur="2s"
                                  repeatCount="indefinite"/>
<use href="#img2" clip-path="url(#cp21)" x="0" y="0" />
<use href="#pt2" x="0" y="0" />
<circle id="c2" cx="141" cy="101.66667" r="4" />
</g>

</g>

</svg>
<script src="/js/d3.v5.js" ></script>
<script src="/js/geometric.js" ></script>

<script>
    var centroid 
// <![CDATA[
    window.addEventListener('DOMContentLoaded', () => {
    centroid = geometric.polygonCentroid([[100,100], [228,145], [95,60], [100,100]])
    });
// ]]>
</script>
</body>
</html>