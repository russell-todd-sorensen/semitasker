<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" >
<meta name="viewport" content="width=device-width, initial-scale=1" >
<meta name="theme-color" content="#587c00" >
<meta name="description" content="Maze Generator WebApp: code by Russell Sorensen.
Generates Maze image given dimensions, walls and cell config. Solves for all
possible solutions, depth first." >

<title>Maze: Design and Solve</title>
<link rel="stylesheet" href="css/maze-6.css" media="all">

<script>
// avoid need to load logging widget
var Log = {}
Log.Notice = function() {}
Log.Hide = function() {}
Log.Remove = function() {}
Log.Debug = function() {}
</script>
<script src="https://ajax.googleapis.com/ajax/libs/d3js/3.5.17/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="/js/form-save-restore.js"></script>

<script>

var config2 = {
    textId: 't2',
    pointsId: 'mPoints2',
    svgId: 'svg2',
    formFontSizeId: 'fontSize',
    formFontFamilyId: 'fontFamily',
    textHref: '#t2',                //the hash is part of the href :(
    defaultFontIndex: 4,            // Arial
    fontSize: 48,
    updateFontSize: false,
    fontFamily: 'Arial',
    updateFontFamily: false,
}
</script>
<script src="js/maze-6.js"></script>

</head>
<body>

<style>
#formContainer {
    font-family: "Days One";
    display: inline-block;
    vertical-align: top;
}

#formContainer ul {
    list-style: none;
    margin-block-start: 0;
    margin-block-end: 16px;
    margin-left: 0;
    padding-left: 10px;
    padding-right: 0;
    width: 450px;
}

#optionForm li,
#mazeChooser li {
    padding: 2.5px;
}

#optionForm fieldset,
#mazeChooser fieldset {
    background-color: white;
    color: #7c5800;
    border: 2px solid #00587c;
    margin-bottom: 7px;
    padding-right: 0;
}

#optionForm legend,
#mazeChooser legend {
    padding: 2px 5px;
    font-size: larger;
    font-weight: bolder;
    color: #00587c;
    background-color:white ;
    border: 2px solid;
}

#optionForm select,
#optionForm select option, 
#optionForm input,
#optionForm button,
#optionForm textarea,
#mazeChooser select,
#mazeChooser select option, 
#mazeChooser input,
#mazeChooser button,
#mazeChooser textarea {
    color: #587c00;
    font-weight: bold;
    vertical-align: top;
    border: 1.5px solid #00587c;
    font-size: 14px;
    padding: 3px;
    text-transform:capitalize;
}
#optionForm input[type="checkbox" i] {
    height: 1.5em;
}

#optionForm button,
#mazeChooser button,
#mazeChooser select,
#mazeChooser input {
    padding: 3px;
}

#optionForm input,
#mazeChooser input {
    width: 40px;
}
#optionForm input#wallStart {
    width: 55px;
    margin-left: -15px;
}

#optionForm div.status-wrap input,
#mazeChooser div.status-wrap input {
    width: initial;
}

#optionForm div.status-wrap input#maze-name,
#mazeChooser div.status-wrap input#maze-name {
    width: 125px;
}

#optionForm textarea,
#mazeChooser textarea {
    display: block;
    height: 7em;
    width: 410px;
}

#optionForm option[selected=selected],
#mazeChooser option[selected=selected] {
    background-color: #587c00;
    color: #00587c;
    font-weight: bold;
}

#optionForm div.short-wrap,
#mazeChooser div.short-wrap {
    padding:0;
    border:none;
    margin:0;
    display: inline-block;
    width: 220px;
}

#optionForm li.short,
#mazeChooser li.short {
    width: 220px;
    display: inline-block;
}

#optionForm div.status-wrap,
#mazeChooser div.status-wrap {
    padding:0;
    border:none;
    margin:0;
    display: inline-block;
    width: 440px;
}

#optionForm li.status,
#mazeChooser li.status {
    width: 220px;
    display: inline-block;
}

#optionForm label,
#mazeChooser label {
    display: inline-block;
    width: 140px;
}

#optionForm label::after,
#mazeChooser label::after {
    content: ':';
}

#optionForm label.inline,
#mazeChooser label.inline {
    display: inline;
}

#optionForm label.status, 
#mazeChooser label.status {
    display: inline-block;
    width: 60px;
    padding-left: 15px;
}

#optionForm input.submit,
#mazeChooser input.submit {
    float: right;
    border: 1px solid #7c5800;
}

#optionForm input.submit:hover,
#mazeChooser input.submit:hover {
    border: 1px solid red;
}

#optionForm #maze-actions.minimize ul,
#optionForm #maze-options.minimize ul,
#mazeChooser #maze-choice.minimize ul {
    display: none;
}

#optionForm #maze-actions.minimize,
#optionForm #maze-options.minimize,
#mazeChooser #maze-choice.minimize {
    border: none;
}

#maze-actions button,
#mazeChooser button {
    min-width: 50px;
}

input + span {
    padding-right: 5px;
}

input:invalid+span:after {
    position: absolute;
    content: '✖';
    padding-left: 5px;
}

input:valid+span:after {
    position: absolute;
    content: '✓ ';
    padding-left: 5px;
}

input[type="checkbox" i] {
    appearance: none;
}

#optionForm input[type="checkbox" i].custom {
    width: 1.2em;
    height: 1.2em;
    padding-left: .2em;
    border: none;
}

#optionForm input[type="checkbox" i].custom:after,
#optionForm input[type="checkbox" i].custom:after {
    display: inline-block;
    margin-left: 0.5em;
    width: 1em;
    height: 1.2em;
    padding-left: .2em;
    background-color:rgb(255, 255, 255);
    color: rgb(255, 255, 255);
    border-radius: .2em .2em;
    border: 1px solid #00587c;
    content: " ";

}

#optionForm input[type="checkbox" i].custom:checked:after {
    display: inline-block;
    width: 1em;
    height: 1.2em;
    padding-left: .2em;
    color:rgb(255, 255, 255);
    border-radius: .2em .2em;
    border: 1px solid #00587c;
    background-color:#00587c;
    content:    '✓';
}


/*
input[type="checkbox" i].custom {
    background-color: #00587c;
    color: -internal-light-dark(black, white);
    background-color: -internal-light-dark(rgb(255, 255, 255), #00587cff);
    border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));
}

*/
</style>
<div id="formContainer">
<form id="mazeChooser" 
        onSubmit="return false;" 
        onChange="Data.saveForm('mazeChooser');">
<fieldset id="maze-choice">
<legend onClick="toggleMinimize('maze-choice')" 
    title="Toggle Show Saved Mazes">Maze Select</legend>
<ul>
<li><label for="mazeName">Maze</label>
<select id="mazeName" name="mazeName" 
        onChange="loadMaze('mazeName',true)">
    <option value="">default empty</option>
    <option value="example">example</option>
</select>
</li>
</ul>
</fieldset>
</form>
<form id="optionForm" onSubmit="return false;" spellcheck="false">
<fieldset id="maze-options">
<legend onClick="toggleMinimize('maze-options')" title="Toggle Show/Hide">Maze Options</legend>
<ul>
<div class="short-wrap">
<li class="short">
<label for="cols">Cell Cols</label> <!-- width of maze -->
<input type="number" name="cols" id="cols"
        value="2" min="1" max="100" step="1" />
</li>
<li class="short">
<label for="rows">Cell Rows</label> <!-- height of maze -->
<input type="number" name="rows" id="rows"
        value="2" min="1" max="100" step="1" />
</li>
</div>
<style>
</style>
<div class="short-wrap">
<li class="short">
<label for="startId">Start Cell ID</label> <!-- starting point -->
<input type="text" name="startId" id="startId"
        value="C-0-0" pattern="([Cc]-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)|(null))" />
        <span class="validity"></span>
</li>
<li class="short">
<label for="exitId">Exit Wall ID</label> <!-- ending partition id -->
<input type="text" name="exitId" id="exitId"
        value="V-2-1" pattern="([VvHh]-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)|(null))"   />
        <span class="validity"></span>
</li>
</div>

<div class="short-wrap">
<li class="short">
<label for="wallPerim">Wall Perimeter</label> <!-- place walls around perimeter -->
<input type="checkbox" name="wallPerim" id="wallPerim" class="custom"
        value="1" />
</li>
<li class="short">
<label for="wallStartP">Wall Start</label> <!-- place some walls around start cell -->
<input type="checkbox" name="wallStartP" id="wallStartP" class="custom"
        value="1" />
</li>
</div>
  
<div class="short-wrap">
<li class="short">
</li>
<li class="short" title="0 == Open, 3 == Wall: N, E, S, W">
<label for="wallStart">Start Walls</label> <!-- place some walls around start cell -->
<input type="text" name="wallStart" id="wallStart"
        value="" placeHolder="0, 0, 0, 0"/>
</li>
</div>
    
<li>
<label for="insertWalls">Add Walls</label> <!-- ending partition id -->
<div>
<textarea name="insertWalls" id="insertWalls">

</textarea>
</div>
</li>

<li>
<label for="removeWalls">Remove Walls</label> <!-- ending partition id -->
<div>
<textarea name="removeWalls" id="removeWalls">
</textarea>
</div>
</li>
</ul>
</fieldset>
<fieldset id="maze-actions">
<legend onClick="toggleMinimize('maze-actions')" title="Toggle Show/Hide">Maze Actions</legend>
<ul>
<div class="status-wrap" id="init-status" >
<li id="init-li">
<label for="initializeMaze">Init</label> <!-- ending partition id -->
<button name="initializeMaze" id="initializeMaze"
       onClick="initMaze('maze-name','cols','rows','startId','exitId','removeWalls','insertWalls');">Init</button>
<label for="maze-name" class="status">Name</label>
<input type="text" id="maze-name" name="maze-name" placeholder="maze name" value="" />
</li>
</div>
<div class="status-wrap" id="solve-status" >
<li id="solve-li">
<label for="solveTheMaze">Solve</label> <!-- ending partition id -->
<button name="solveTheMaze" id="solveTheMaze"
       onClick="solveMaze('maze-name','numSolutions');">Solve</button>
<span id="numSolutions"></span>
</li>
<li id="draw-li">
<label for="drawAllSolns">Draw</label> <!-- ending partition id -->
<button name="drawAllSolns" id="drawAllSolns"
       onClick="drawSols('solns','maze-name')">Draw</button>
</li>
<li id="clear-li" title="Clear drawn solutions">
<label for="clearSolutions">Clear</label> <!-- ending partition id -->
<button name="clearSolutions" id="clearSolutions"
       onClick="clearSols('solns');">Clear</button>
</li>
</fieldset>
</ul>
</form>
</div>
<script>
var toggleMinimize = function (id) {
    let fs = $(`#${id}`),
        cssClass = "minimize";

    if (fs.hasClass(cssClass)) {
        fs.removeClass(cssClass);
    } else {
        fs.addClass(cssClass);
    }
}

</script>
<script>
var loadMaze = function (selectId, saveP) {
    let mazeName = $(`#${selectId}`).val();
    if (saveP) {
        Data.saveSelect(selectId,"loadMaze");
    }
    console.log(`mazeName=${mazeName}`);
}
var myOptions = [
    {value:"5x7"},
    {value:"8x10sweet",text:"My Sweet 8x10"},
] 
window.addEventListener('DOMContentLoaded', () => {
    Data.writeSelect("mazeName",myOptions,true);
    Data.restoreSelect("mazeName");
    Data.restoreForm("mazeChooser",null);
    Data.restoreForm("optionForm",null);
    //loadMaze("mazeName");
});
</script>
<svg 
    id="svg2"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    externalResourcesRequired="true"
    x="0"
    y="0"
    width="1000"
    height="1000"
    viewBox="0 0 1000 1000"
    >
<defs>

<rect id="conf-cell-base" height="50" width="50" />
<rect id="cell-base" height="100" width="100" />
<line id="hwall-base" x1="0" y1="0" x2="100" y2="0" /> 
<line id="vwall-base" x1="0" y1="0" x2="0" y2="100" />
<line id="hconf-base" x1="5" y1="0" x2="95" y2="0" />
<line id="vconf-base" x1="0" y1="5" x2="0" y2="95" />


<style>
/* these styles on "g" allow children to inherit */

#toggle-path-nw,
#toggle-path-ew,
#toggle-path-sw,
#toggle-path-ww {
    fill: rgba(0,0,0,0.1)
}

#toggle-text-nw,
#toggle-text-ew,
#toggle-text-sw,
#toggle-text-ww {
    font-family: "Days One";
    font-size: 10px;
    text-anchor: middle;
    fill: rgba(0,0,0,1);
    stroke: none;
    stroke-width:0;
}

.theme-bg1 {
    fill:#587c00;
}
.theme-bg2 {
    fill:#00587c;
}
.theme-bg3 {
    fill: #7c5800;
}
.theme-bg4 {
    fill: #000;
}
.theme-bg5 {
    fill: #FFF;
}
</style>

</defs>
<!-- Drawn maze components should show up here.-->


</svg>
</body>
</html>