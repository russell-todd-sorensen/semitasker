<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<title>100 Prisoners' Strategy</title>
<link rel="stylesheet" href="/css/main.css" media="all">
<style>
html,
head {
    background-color: #aaa;
    font-size: 16px;
    font-family: 'Fira Code', 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
}
body {
    font-size: 1em;
    font-family: inherit;
}
form {
    display: inline;
}
button {
    margin-left: 2px;
}
ul,
li {
    display: inline-block;
}
fieldset {
    display: inline-block;
    border: 1px solid black;
    padding: 3px;
    margin: 5px;
    width: 500px;
}
legend {
    border: 1px solid black;
    padding: 3px;
}
label,
input {
    font-family: inherit;
    display: inline-block;
}
input {
    text-align: right;
}
label {
    width: 130px;
}
input {
    width: 130px;
}
label.check {
    width: 50px;
}
label.check.wide {
    width: 130px;
}
input[type="checkbox"] {
    width: 25px;
}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/d3js/3.5.17/d3.min.js" defer="" async=""></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" defer="" async=""></script>
<script src="js/probability-and-stats.js" defer="" async=""></script>
<script src="js/shuffle-6-svg.js"></script>
<script src="js/shuffle-6-svg-strategy.js" defer="" async=""></script>
</head>
<body>

<div id="controls">
<form id="form1" action="" method="GET" oninput="rows.value=Math.ceil(parseInt(gSize.value)/parseInt(cols.value))" onsubmit="() => {return false;}">
<fieldset id="fs1">
<ul id="ul1">
<li>
    <label for="gSize">Prisoners</label>
    <input id="gSize" name="gSize" value="10" type="number" min="1" step="1">
</li>
<li>
    <label for="cols">Columns</label>
    <input id="cols" name="cols" value="5" type="number" min="1" step="1">
</li>
<li>
    <label>Rows</label><output id="rows" name="rows" form="form1">5</output>
</li>
</ul>
<ul id="ul2">
<li>
    <input type="button" value="Setup File Boxes" onclick="myPrisonerSearch.setupGrid('svg-container');">
</li>
<li>
    <input type="button" value="Run Strategy" onclick="initFollowNumbers('form1');">
</li>
</ul>
</fieldset>
</form>
</div>
<div id="file-box-room">
    <p>ooo</p>
</div>
<div id="ideasAndCommentary">
<li>
    intro first show how to sort 100 items in only 100 operations.
</li>
</div>
<style id="form-grid-style">
#controls {
    display:grid;
    font-size: 3em;
    gap: 10px;
    grid-auto-rows: minmax(100px, auto);
    grid-auto-columns: 100px;
}
#ul1 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-columns: repeat(3, auto);
    padding-inline-start: 0;
}
#ul2 {
    display: grid;
    grid-template-columns: repeat(2, auto);
    padding-inline-start: 0;
}
#ul1 > li,
#ul2 > li {
    display: grid;
    grid-template-columns: auto;
}
#ul1 input,
#ul1 output,
#ul2 input {
    font-size: inherit;
    text-align: right;
    width: 9ch;
}

#ul1 output {
    background-color: #eee;
    padding-right: .5ch;
    border: 1px inset #222;
    border-radius: .05em;
    font-size: 1.05em;
}

#ul2 input[type="button"] {
    width: auto;
    display: inline;
    margin: auto;
}
</style>
<style id="file-box-style">

#file-box-room #anchor,
#file-box-room #row-heads,
#file-box-room #col-heads,
#file-box-room #data-grid  {
    border: 0.5px solid rgba(255,0,0,.5);
    gap: 10px;
}
#file-box-room div.data {
    height: 100px;
    width: 100px;
    border: 1px solid rgba(0,0,0,.5);
    text-align:center;
    vertical-align:middle;
    border-radius: 10px; 
    line-height: 2em;
}
</style>
<style id="dynamic-grid-style">
#file-box-room {
    fill: transparent;
    background-color:transparent;
}

#file-box-room #anchor rect,
#file-box-room #col-heads rect,
#file-box-room #row-heads rect,
#file-box-room #data-grid rect {
    height: 100px;
    width: 100px;
    fill:transparent;
    background-color:transparent;
    border: 1px solid rgba(0,0,0,.5);
    text-align: center;
    vertical-align: middle;
    border-radius: 10px;
    line-height: 2em;
    font-size: 3em;
}
#file-box-room #data-grid div.row-col {
    border: 1px solid rgba(0,0,0,0.01);
    color: rgba(0,0,0,0.01);
    font-size: 2px;
    text-align: center;
    vertical-align: middle;
}
</style>
<style id="dynamic-box-style">

</style>
<!-- reuseable template for svg doc-->
<!-- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template -->

<template id="svg-template" type="image/svg+xml"><svg id="svgtmp" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="100%" height="100%">
<style id="svg-styles">
svg#svgvis {
    fill:transparent;
    background-color:transparent;
    stroke:white;
    stroke-width:2;
}
svg g#main rect#bg,
svg g#main ellipse#ellipse1 {
    fill: transparent;
    background-color: transparent;
    stroke: white;
    stroke-width: 2;
}
#path3 {
    stroke: yellow;
    stroke-width:2;
}
#path4 {
    stroke: cyan;
    stroke-width:2;
}
#path1 {
    stroke: purple;
    stroke-width:2;
}
#item {
    stroke: black;
    stroke-width: 1;
    fill: transparent;
    text-anchor:middle;
    font-size:3em;
}
#item text,
#item-rect {
    stroke: inherit;
    stroke-width: inherit;
    font-size: inherit;
    fill: inherit;
    text-anchor: inherit;
}
#file-box-room #atext text,
#file-box-room #col-heads text,
#file-box-room #row-heads text,
#file-box-room #data-grid text {
    stroke:none;
    font-size: 3em;
    text-anchor:middle;
    transform: translate(1em,1.3em);
    fill:black;
}
</style>
<defs id="defs">
    <!-- examples of path defs -->
<path id="path1" transform="translate(244,0)" d="M51.000, 51.000 C173.500 51.000 51.000 51.000 173.500 51.000"></path>
<path id="path2" transform="translate(0,122.5)" d="M51.000, 51.000 C173.500 51.000 51.000 295.000 173.500 295.000"></path>
<path id="path33" d="M51.000, 51.000 C418.500 51.000 51.000 295.000 418.500 295.000"></path>
<path id="path3" d="M50.000, 50.000 C50.000 50.000 50.000 410.000 50.000 410.000" />
<path id="path4" transform="translate(0,488)" d="M51.000, 51.000 C418.500 51.000 51.000 -71.000 418.500 -71.000"></path>
<ellipse transform="translate(50%,50%)" id="ellipse1" cx="50%" cy="50%" rx="50%" ry="50%"></ellipse>
<g id="item">
    <rect id="item-rect" x="0" y="0" height="100" width="100" rx="10" ry="10"></rect>
</g>

</defs>
<rect id="bg" x="0" y="0" height="100%" width="100%"></rect>

</svg></template>
<script>

var pState,
    myVis,
    myPrisonerSearch;

var config = {
    mode: "url2form",
    map: [
        {
            urlvar:"gs",
            default:10,
            form:"form1",
            formvar:"gSize",
            param:"numPrisoners",
        },
        {
            urlvar:"cols",
            default:5,
            form:"form1",
            formvar:"cols",
            param:"numColumns",
        },
    ],
}

window.addEventListener('DOMContentLoaded', () => {
    // The current state of url and form is gathered here:
    pState = new PageState({
        config: config,
        events: [{target:"form1",desc:["input",{"bubbles":true, "cancelable":false}]}]
    });
    
    myPrisonerSearch = new PrisonerSearch(pState);

});
</script>
<div id="svg-container">
<svg 
    id="svgvis" 
    xmlns:svg="http://www.w3.org/2000/svg" 
    xmlns="http://www.w3.org/2000/svg" 
    xmlns:xlink="http://www.w3.org/1999/xlink" 
    x="0" 
    y="0" 
    width="620" 
    height="740" 
    viewbox="0 0 620 740"
    >
<style id="svg-styles">
svg#svgvis {
    fill:transparent;
    background-color:transparent;
    stroke:white;
    stroke-width:2;
}
svg g#main rect#bg,
svg g#main ellipse#ellipse1 {
    fill: transparent;
    background-color: transparent;
    stroke: white;
    stroke-width: 2;
}
#path3 {
    stroke: yellow;
    stroke-width:2;
}
#path4 {
    stroke: cyan;
    stroke-width:2;
}
#path1 {
    stroke: purple;
    stroke-width:2;
}
#item {
    stroke: black;
    stroke-width: 1;
    fill: transparent;
    text-anchor:middle;
    font-size:3em;
}
#item text,
#item-rect {
    stroke: inherit;
    stroke-width: inherit;
    font-size: inherit;
    fill: inherit;
    text-anchor: inherit;
}
#file-box-room #atext text,
#file-box-room #col-heads text,
#file-box-room #row-heads text,
#file-box-room #data-grid text {
    stroke:none;
    font-size: 3em;
    text-anchor:middle;
    transform: translate(1em,1.3em);
    fill:black;
}
#myCircle {
    stroke:purple;
    stroke-width:2;
}
#test1,
#test2,
#test3,
#myLine {
    stroke:orange;
    stroke-width:2;
}

</style>
<defs id="defs">
    <!-- examples of path defs -->
<path id="path1" transform="translate(244,0)" d="M51.000, 51.000 C173.500 51.000 51.000 51.000 173.500 51.000"/>
<path id="path2" transform="translate(0,122.5)" d="M51.000, 51.000 C173.500 51.000 51.000 295.000 173.500 295.000"/>
<path id="path3" d="M0.000, 0.000 C360.000 0.000 0.000 240.000 360.000 240.000"/>
<path id="path32" d="M0.000, 0.000 C360.000 0.000 0.000 240.000 360.000 240.000
                     M360.000 240.000 C0.000 240.000 360.000 0.000 0.000 0.000"/>
<path id="path4" transform="translate(0,488)" d="M51.000, 51.000 C418.500 51.000 51.000 -71.000 418.500 -71.000"/>
<ellipse id="ellipse1" cx="50%" cy="50%" rx="50%" ry="50%"/>
<g id="item">
    <rect id="item-rect" x="0" y="0" height="100" width="100" rx="10" ry="10"/>
</g>

<circle id="myCircle" r="60" cx="60" cy="0" />
<line id="myLine" x1="0" y1="0" x2="120" y2="0"/>
<path id="myCirclePath" d="M0,0a60,60 0 1,0 120,0a60,60 0 1,0 -120,0" />
<path id="myHorizontalEllipsePath" d="M0,0a120,60 0 1,0 240,0a120,60 0 1,0 -240,0" />
<path id="myVerticalEllipsePath" d="M0,0a60,120 0 1,0 120,0a60,120 0 1,0 -120,0" />
<path id="myHalfVerticalEllipsePathPlus" d="M0,0a60,120 0 1,0 120,0" />
<path id="myHalfVerticalEllipsePathMinus" d="M0,0a-60,-120 0 1,0 -120,0" />
<path id="myHalfVerticalEllipsePathPlusReverse" d="M0,0a60,120 0 1,1 120,0" />
<path id="myHalfVerticalEllipsePathMinusReverse" d="M0,0a-60,-120 0 1,1 -120,0" />
<path id="for-pris0" d="" />
<path id="test1" d="M0,0a60,120 0 1,0 120,0a60,120 0 1,0 -120,0" />
<path id="test2" d="M120,0a60,120 0 1,0 -120,0" />
<path id="test3" d="M0,0 a120,150 0 1,0 240,0" />
</defs>
<rect id="bg" x="0" y="0" height="100%" width="100%"></rect>

<g id="file-box-room" class="file-box-wrapper" transform="translate(20,20)">

<g id="anchor" class="anchor-grid" transform="translate(0,0)">
 <g id="atext" transform="translate(0,0)">
    <use href="#item"/>
    <text>0</text>
 </g>
</g>
<g id="col-heads" class="col-grid" transform="translate(120,0)">
    <g id="col-1" transform="translate(0,0)">
        <use href="#item"/>
        <text>1</text>
    </g>
    <g id="col-2" transform="translate(120,0)">
        <use href="#item"/>
        <text>2</text>
    </g>
    <g id="col-3" transform="translate(240,0)">
        <use href="#item"/>
        <text>3</text>
    </g>
    <g id="col-4" transform="translate(360,0)">
        <use href="#item"/>
        <text>4</text>
    </g>
</g>
<g id="row-heads" class="row-grid" transform="translate(0,120)">
    <g id="row-1" transform="translate(0,0)">
        <use href="#item"/>
        <text>1</text>
    </g>
    <g id="row-2" transform="translate(0,120)">
        <use href="#item"/>
        <text>2</text>
    </g>
    <g id="row-3" transform="translate(0,240)">
        <use href="#item"/>
        <text>3</text>
    </g>
    <g id="row-4" transform="translate(0,360)">
        <use href="#item"/>
        <text>4</text>
    </g>
    <g id="row-5" transform="translate(0,480)">
        <use href="#item"/>
        <text>5</text>
    </g>
</g>
<g id="data-grid" class="data-grid" transform="translate(120,120)">

    <g id="pris0" class="data col0 row0" transform="translate(0,0)">
        <use href="#item"/>
        <text>1</text>
        <animateMotion
            begin="pris0.move"
            dur="1.5s"
            calcMode="spline"
            rotate="0"
            repeatCount="1"
            fill="freeze"
            values="0; .25; .35; .5; .35; .15; 0"
            keyTimes="0; 0.25; 0.5; 0.75; 1"
            keySplines="0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1">
<!-- keyPoints=".5; .75; 1.0"  #test1  #myHalfVerticalEllipsePathPlusReverse  -->
           <mpath id="mpath-pris0" href="#path32" />
        </animateMotion>
    </g>
    <g id="pris1" class="data col1 row0" transform="translate(120,0)">
        <use href="#item"/>
        <text>2</text>
        <animateMotion
            begin="pris0.click"
            dur="1.5s"
            calcMode="spline"
            rotate="0"
            repeatCount="1"
            fill="freeze"
            values="0; .25; .35; .5; .35; .15; 0"
            keyTimes="0; 0.25; 0.5; 0.75; 1"
            keySplines="0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1">
           <mpath href="#myHalfVerticalEllipsePathPlusReverse" />
        </animateMotion>
    </g>
    <g id="pris2" class="data col2 row0" transform="translate(240,0)">
        <use href="#item"/>
        <text>3</text>
    </g>
    <g id="pris3" class="data col3 row0" transform="translate(360,0)">
        <use href="#item"/>
        <text>4</text>
    </g>
    <g id="pris4" class="data col0 row1" transform="translate(0,120)">
        <use href="#item"/>
        <text>11</text>
        <animateMotion
            begin="pris4.click"
            dur="10s"
            calcMode="spline"
            rotate="0"
            repeatCount="2"
            values="0; .25; .75; 1.0; .5; 0"
            keyTimes="0; 0.25; 0.5; 0.75; 1"
            keySplines="0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1; 0.5 0 0.5 1">
            <mpath href="#path32"/>
        </animateMotion>
    </g>
    <g id="pris5" class="data col1 row1" transform="translate(120,120)">
        <use href="#item"/>
        <text>12</text>
    </g>
    <g id="pris6" class="data col2 row1" transform="translate(240,120)">
        <use href="#item"/>
        <text>13</text>
    </g>
    <g id="pris7" class="data col3 row1" transform="translate(360,120)">
        <use href="#item"/>
        <text>14</text>
    </g>
    <g id="pris8" class="data col0 row2" transform="translate(0,240)">
        <use href="#item"/>
        <text>21</text>
    </g>
    <g id="pris9" class="data col1 row2" transform="translate(120,240)">
        <use href="#item"/>
        <text>22</text>
    </g>
    <g id="pris10" class="data col2 row2" transform="translate(240,240)">
        <use href="#item"/>
        <text>23</text>
    </g>
    <g id="pris11" class="data col3 row2" transform="translate(360,240)">
        <use href="#item"/>
        <text>24</text>
    </g>
    <g id="pris12" class="data col0 row3" transform="translate(0,360)">
        <use href="#item"/>
        <text>31</text>
    </g>
    <g id="pris13" class="data col1 row3" transform="translate(120,360)">
        <use href="#item"/>
        <text>32</text>
    </g>
    <g id="pris14" class="data col2 row3" transform="translate(240,360)">
        <use href="#item"/>
        <text>33</text>
    </g>
    <g id="pris15" class="data col3 row3" transform="translate(360,360)">
        <use href="#item"/>
        <text>34</text>
    </g>
    <g id="pris16" class="data col0 row4" transform="translate(0,480)">
        <use href="#item"/>
        <text>41</text>
    </g>
    <g id="pris17" class="data col1 row4" transform="translate(120,480)">
        <use href="#item"/>
        <text>42</text>
    </g>
    <g id="pris18" class="data col2 row4" transform="translate(240,480)">
        <use href="#item"/>
        <text>43</text>
    </g>
    <g id="pris19" class="data col3 row4" transform="translate(360,480)">
        <use href="#item"/>
        <text>44</text>
    </g>
</g>
<g id="path-grid" class="path-grid" transform="translate(120,120)">
    <!-- This group is used to hold paths which will overflow the data
         area. This ensures that the data-grid bounding box remains 
         unchanged so it can be used to locate data boxes as they are
         moved around.
     -->
    <!-- <use href="#path32"/>
    <g id="path-usage">
        <use href="#path1"/>
        <use href="#path2"/>
        <use href="#path4"/>
    </g> 
    <use href="#myCircle"/> -->
    <use href="#myHalfVerticalEllipsePathPlusReverse" />
    <use href="#myHalfVerticalEllipsePathMinusReverse" transform="translate(120,0)" />
    <use href="#path32" />
    <use href="#test3" />
</g>
</g>
</svg></div>
<script>
var cx = 55,
    cy = 88,
    rx = 65,
    ry = 130;

// M-10,88a65,130 0 1,0 130,0a65,130 0 1,0 -130,0
//         cx=55
//
//
var calcSVGPathFromTo = function (
    from=0,
    to=1,
    options={
        x1:0,
        y1:0,
        x2:120,
        y2:0,
        dir:1, // or 0
        xdim:120,
        ydim:120
    }
) {
    // the starting point is always going to be (0,0)

}

</script>
</body>
</html>