<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8" >

<title></title>
<style>
</style>
<script src="js/probability-and-stats.js"></script>
<script src="js/shuffle-5.js"></script>

<script>
var shuffleTestArray = function(n=10,range=[0,15]) {
    let longArrayLen = range[1]-range[0],
        unshuffled = [],
        shuffled;
    for (let i=range[0];i<=range[1];unshuffled.push(i++)) {
    }

    shuffled = shuffle(null,unshuffled).slice(0,n)
    //unshift on a null:
    shuffled.unshift(null);
    return shuffled;
}
var smallestNotFoundPositiveInteger = function(array) {
    let len      = array.length,
        notFound = 1,
        max      = len,
        finished = false,
        tmp,
        cell     = null,
        maxItr   = 3*max,
        itr      = 0,
        idx      = 1;

        while (!finished && itr<maxItr) {
            switch (cell) {
            case null: 
                idx++;
                cell = array[idx]
                while(cell == notFound) {
                    idx++;
                    notFound++;
                    cell=array[idx];
                    itr++;
                }
                array[idx] = null;
                idx = cell;
                break;
            default: 
                if (cell<1||cell>max) { 
                    max--;
                    tmp = array[max]
                    array[max] = cell;
                    idx = tmp;
                } else {
                    idx = cell;
                }
                break;
            }
            cell = array[idx];
            itr++;
        }
}

// new algo array with pos integers in range min to max, 
// repeats allowed. in O(n) time and space, determine smallest
// positive integer not found in array.
var firstMissingPosInteger = function(inArray) {
    let copy = inArray.map(x=>parseInt(x)),
        start = 1,
        itr = 0,
        swap = function(a,i,j) {
            let tmp = a[i];
            a[i] = a[j];
            a[j] = tmp;
        },
        i,
        j,
        max = copy.length;

    copy.unshift(0);
    const len = copy.length-1;
    

    for (i=start;i<=len;i++) {
        j = copy[i]
        itr++;
        if (j == i) {
            continue;
        }
        while (j != i && itr<3*len) {
            if ((j-max) > 0) {
                swap(copy,i,max);
                max--;
            } else {
                swap(copy,i,j);
            }
            j = copy[i];
            itr++;
        }
    }
    return {i:i,j:j,max:max,inArray:inArray,copy:copy,missing:max-1,itr:itr}
}

</script>
</head>
<body>
<pre>

</pre>
</body>
</html>