<!DOCTYPE HTML>
<html lang="en_US">
<head>
<meta charset="utf-8">
<title>Fractal Image Creation 11 in JavaScript</title>
<link rel="stylesheet" href="main.css" type="text/css">
<link rel="stylesheet" type="text/css" href="http://ic00408/css/log.css" media="all">
<link rel="stylesheet" type="text/css" href="http://ic00408/js/jQuery.UI.Combined.1.8.20.1/Content/Content/themes/base/jquery.ui.all.css">


<style>
 
body,html {
  font-family:"Lucida Console", Monaco, monospace;
  margin:0;
  padding:0;
  border:0;
}


#main, #main2 {
    position: relative;
    border: 3px solid black;
    display: inline-block;
}

#myCanvas, #myCanvas2 {
    border: none;
    background-clip:padding-box;
}

#box, #box2 {
    position: absolute;
    top: 0;
    right: 0;
    background-color: rgba(255,0,0,.1);
    border: 1px solid black;
}

#timeout, #colorOffsetAmount, #fractalImageId {
    width: 30px;
}
</style>

<script src="http://ic00408/js/jquery-1.7.1.js"></script>
<script src="http://ic00408/js/jQuery.UI.Combined.1.8.20.1/Content/Scripts/jquery-ui-1.8.20.js"></script>
<script src="http://ic00408/js/d3.v3.js"></script>
<script src="http://ic00408/js/log-2.js"></script>
<script src="http://ic00408/js/data.js"></script>
<script src="http://ic00408/js/form-save-restore.js"></script>
<script src="http://ic00408/js/binary-hex-conversions.js"></script>
<script src="http://ic00408/js/example-library.js"></script>
<script src="http://ic00408/js/svg-transform.js"></script>
<script src="http://ic00408/js/schedule-function.js"></script>
<script src="http://ic00408/js/mouse-events.js"></script>
<script src="js/fractal-image-11.js"></script>
<script language="javascript">


var myFractalImages = new Array();
var myFractalImageId = myFractalImages.length;

function profileCounters (counters) {
	var length = counters.length;
	var maximum = 0;
	var minimum = 1024;
	var counts = new Array();
	var count;
	
	for (var i = 0; i<length;i++) {
		count = counters[i];
		if (counts[count]) {
			counts[count]++;
		} else {
			counts[count] = 1;
			if (count > maximum) {
				maximum = count;
			} 
			if (count < minimum) {
				minimum = count;
			}
		}
	}
	
	
	return {counts:counts,maximum:maximum,minimum:minimum};
}

var myCounters = [1,2,3,4,5,6,1,4,6,7,2,5,1,4,9];

var processForm = function () {
	var colorOffsetAmount=parseInt($('#colorOffsetAmount').val());
	var fractalImageId=parseInt($('#fractalImageId').val());
	return {
		id:parseInt($('#animationFunctionId option:selected').val()),
		timeout:parseInt($('#timeout').val()),
		data:{
			objId:fractalImageId,
			amount:colorOffsetAmount
		}
	};
}

var startAnimationPre = function() {
	
  var formData = processForm(formData);
	
	startAnimation(formData.id,formData.timeout,formData.data);
}

var drawImagePre = function() {
	
  var formData = processForm(formData);
	myFractalImages[formData.data.objId].drawImage();
	
}

var exampleRect = {
	start: {
		x: 0.4529654240128,
		y: 0.3506321791478193
	},
	end: {
		x: 0.4529653461376,
		y: 0.3506321445512928
	}
};

$(document).ready(function() {
  
  Log.Notice('Document Ready');
	
  myFractalImages[myFractalImageId] = new fractalImage('myCanvas','box',500,1000);
	//myFractalImages[myFractalImageId].rect = exampleRect;
	//myFractalImages[myFractalImageId].rmpRect = exampleRect;
	$(myFractalImages[myFractalImageId].mouseBox).bind('mousedown',myFractalImages[myFractalImageId],startMove);
	
	// second image
	myFractalImages[1] = new fractalImage('myCanvas2','box2',500,1000);
	$(myFractalImages[1].mouseBox).bind('mousedown',myFractalImages[1],startMove);
  Log.Remove();
});
</script>
 

</head>
<body>
<div id="controls">
<form onSubmit="return false;">
<button id="b1" onClick="drawImagePre();" value="Draw Image" >Draw Image</button>
ImageId: <input type="number" value="0" min="0" max="1" step="1" id="fractalImageId" name="fractalImageId" />
Animation: <select id="animationFunctionId" name="animationFunctionId">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">BW</option>
<option value="12">One</option>
<option value="13">13</option>
<option value="14">14</option>
</select>
Timer: <input type="number" value="70" min="10" max="100" step="10" id="timeout" name="timeout" />
Step: <input type="number" value="1" min="-10" max="10" step="1" id="colorOffsetAmount" name="colorOffsetAmount" />
<button id="b2" onClick="startAnimationPre()" value="Animate Image" >Animate Image</button>
<button id="b3" onClick="stopAnimation({objId:0,amount:1});" value="Stop Animation" >Stop Animation</button>
<button id="b4" onClick="reDrawImage({objId:0,amount:1});" value="ReDraw Image" >ReDraw Image</button>
</form>
</div>
<div id="main"><canvas id="myCanvas" height="50" width="100">Your browser doesn't support canvas</canvas>
<div id="box"></div>
</div>
<div id="main2"><canvas id="myCanvas2" height="50" width="100">Your browser doesn't support canvas</canvas>
<div id="box2"></div>
</div>
</body>
</html>
